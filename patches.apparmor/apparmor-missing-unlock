From 18103692ab79535aec583cd0b933e3c2d2bf9c16 Mon Sep 17 00:00:00 2001
From: John Johansen <john.johansen@canonical.com>
Date: Mon, 9 Nov 2009 23:40:49 -0800
Subject: AppArmor: Add missing unlock to next_profile

 There is a missing read_unlock in the while loop in next_profile.

Signed-off-by: John Johansen <john.johansen@canonical.com>
Acked-by: Jeff Mahoney <jeffm@suse.com>
---
 security/apparmor/apparmorfs.c |    1 -
 1 file changed, 1 deletion(-)

--- a/security/apparmor/apparmorfs.c
+++ b/security/apparmor/apparmorfs.c
@@ -98,7 +98,6 @@ static struct aa_profile *next_profile(s
 		read_lock(&ns->base.lock);
 		return list_first_entry(&ns->base.profiles, struct aa_profile,
 					base.list);
-		read_unlock(&ns->base.lock);
 	}
 	return NULL;
 }
