From john.johansen@canonical.com  Tue Nov 17 11:13:49 2009
From: John Johansen <john.johansen@canonical.com>
Date: Fri, 17 Jul 2009 16:21:12 +0000 (-0700)
Subject: AppArmor: fix C99 violation
Git-commit: 071c722a14e00e5c9bcd5516017a6f4889075e13
Git-Repo: git://kernel.ubuntu.com/jj/apparmor-mainline.git AppArmor-2.4

AppArmor: fix C99 violation

fix a build warning from a C99 violation (mixing code and declarations)

Signed-off-by: Jeff Mahoney <jeffm@suse.de>
Signed-off-by: John Johansen <john.johansen@canonical.com>
Signed-off-by: Andy Whitcroft <apw@canonical.com>
---
 security/apparmor/lsm.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

--- a/security/apparmor/lsm.c
+++ b/security/apparmor/lsm.c
@@ -183,11 +183,13 @@ static int common_perm_rm(const char *op
 			  struct dentry *dentry, u16 mask)
 {
 	struct inode *inode = dentry->d_inode;
+	struct path_cond cond = {};
 
 	if (!dir->mnt || !inode || !mediated_filesystem(inode))
 		return 0;
 
-	struct path_cond cond = { inode->i_uid, inode->i_mode };
+	cond.uid = inode->i_uid;
+	cond.mode = inode->i_mode;
 
 	return common_perm_dentry(op, dir, dentry, mask, &cond);
 }
