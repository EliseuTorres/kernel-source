From: Chen Gong <gong.chen@linux.intel.com>
Subject: APEI infrastructure support
References: fate#311701,fate#311703,fate#311704,fate#311771,fate#311706,fate#311772,bnc#697859
Patch-Mainline: yes

Signed-off-by: Thomas Renninger <trenn@suse.de>

APEI provides an interface for Platform Error Interface via ACPI.
Hardware errors can be looked up in firmware tables in order to
gain more information about the error source. This brings our
APEI support up to upstream levels.

Signed-off-by: Chen Gong <gong.chen@linux.intel.com>
Automatically created from "patches.drivers/001-apei_infrastructure.patch" by xen-port-patches.py

--- sle11sp2-2011-07-15.orig/arch/x86/mm/ioremap-xen.c	2011-06-20 11:07:40.000000000 +0200
+++ sle11sp2-2011-07-15/arch/x86/mm/ioremap-xen.c	2011-07-01 10:16:43.000000000 +0200
@@ -197,6 +197,16 @@ int page_is_ram(unsigned long pagenr)
 	return 0;
 }
 
+#ifdef CONFIG_MODULES
+/*
+ * Force the implementation of ioremap_page_range() to be pulled in from
+ * lib/lib.a even if there is no other reference from the core kernel to it
+ * (native uses it in __ioremap_caller()), so that it gets exported.
+ */
+static void *const __section(.discard.ioremap) __used
+_ioremap_page_range = ioremap_page_range;
+#endif
+
 /*
  * Fix up the linear direct mapping of the kernel to avoid cache attribute
  * conflicts.
