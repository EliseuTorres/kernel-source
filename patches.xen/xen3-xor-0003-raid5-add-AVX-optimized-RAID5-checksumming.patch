From: Jim Kukunas <james.t.kukunas@linux.intel.com>
Date: Tue, 22 May 2012 13:54:04 +1000
Subject: [PATCH 3/7] raid5: add AVX optimized RAID5 checksumming
References: FATE#313639
Patch-mainline: v3.5

Optimize RAID5 xor checksumming by taking advantage of
256-bit YMM registers introduced in AVX.

Signed-off-by: Jim Kukunas <james.t.kukunas@linux.intel.com>
Signed-off-by: NeilBrown <neilb@suse.de>
Automatically created from "patches.suse/xor-0003-raid5-add-AVX-optimized-RAID5-checksumming.patch" by xen-port-patches.py

--- sle11sp3.orig/arch/x86/include/mach-xen/asm/xor.h	2012-07-05 11:38:51.000000000 +0200
+++ sle11sp3/arch/x86/include/mach-xen/asm/xor.h	2012-11-12 12:09:31.000000000 +0100
@@ -18,6 +18,7 @@ do {						\
 	xor_speed(&xor_block_8regs_p);		\
 	xor_speed(&xor_block_32regs);		\
 	xor_speed(&xor_block_32regs_p);		\
+	AVX_XOR_SPEED;				\
 	xor_speed(&xor_block_sse);		\
 } while (0)
 
