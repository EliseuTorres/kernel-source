From: Michal Marek <mmarek@suse.cz>
Subject: Fix xen build with patches.arch/x86-Fix-sched_clock_cpu_...
Patch-mainline: depends (fixes another patch in the series)

patches.arch/x86-Fix-sched_clock_cpu-for-systems-with-unsynchronized-TSC.patch
added a call to check_tsc_unstable(), which is not available in the xen
flavor:
/usr/src/packages/BUILD/kernel-xen-2.6.32.9/linux-2.6.32/arch/x86/kernel/cpu/intel.c:73: undefined reference to `check_tsc_unstable'

Suggested-by: Jan Beulich <jbeulich@novell.com>
Signed-off-by: Michal Marek <mmarek@suse.cz>

---
 arch/x86/kernel/cpu/intel.c |    2 ++
 1 file changed, 2 insertions(+)

--- a/arch/x86/kernel/cpu/intel.c
+++ b/arch/x86/kernel/cpu/intel.c
@@ -70,7 +70,9 @@ static void __cpuinit early_init_intel(s
 	if (c->x86_power & (1 << 8)) {
 		set_cpu_cap(c, X86_FEATURE_CONSTANT_TSC);
 		set_cpu_cap(c, X86_FEATURE_NONSTOP_TSC);
+#ifndef CONFIG_XEN
 		if (!check_tsc_unstable())
+#endif
 			sched_clock_stable = 1;
 	}
 
