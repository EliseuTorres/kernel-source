From: Tejun Heo <tj@kernel.org>
Subject: x86: fix iommu=nodac parameter handling
References: bnc#463829, bnc#482220

nodac should forbid dac not instead of enabling it.  Fix it.

Signed-off-by: Tejun Heo <tj@kernel.org>
Signed-off-by: Tejun Heo <teheo@suse.de>
Automatically created from "patches.arch/x86-fix-nodac" by xen-port-patches.py

--- head-2009-12-04.orig/arch/x86/kernel/pci-dma-xen.c	2009-11-18 14:54:16.000000000 +0100
+++ head-2009-12-04/arch/x86/kernel/pci-dma-xen.c	2009-12-04 12:04:14.000000000 +0100
@@ -268,7 +268,7 @@ static __init int iommu_setup(char *p)
 		if (!strncmp(p, "allowdac", 8))
 			forbid_dac = 0;
 		if (!strncmp(p, "nodac", 5))
-			forbid_dac = -1;
+			forbid_dac = 1;
 		if (!strncmp(p, "usedac", 6)) {
 			forbid_dac = -1;
 			return 1;
