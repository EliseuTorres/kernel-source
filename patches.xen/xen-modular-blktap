From: ccoffing@novell.com
Subject: Retain backwards-compatible module name with CONFIG_XEN_BLKDEV_TAP=m
Patch-mainline: obsolete

---
 drivers/xen/blktap/Makefile   |    4 ++--
 drivers/xen/blktap/blocktap.c |    1 +
 drivers/xen/blktap2/Makefile  |    5 +++--
 3 files changed, 6 insertions(+), 4 deletions(-)

--- a/drivers/xen/blktap/Makefile
+++ b/drivers/xen/blktap/Makefile
@@ -1,5 +1,5 @@
 LINUXINCLUDE += -I../xen/include/public/io
 
-obj-$(CONFIG_XEN_BLKDEV_TAP) := xenblktap.o
+obj-$(CONFIG_XEN_BLKDEV_TAP) := blktap.o
 
-xenblktap-y := xenbus.o interface.o blktap.o 
+blktap-y := xenbus.o interface.o blocktap.o
--- /dev/null
+++ b/drivers/xen/blktap/blocktap.c
@@ -0,0 +1 @@
+#include "blktap.c"
--- a/drivers/xen/blktap2/Makefile
+++ b/drivers/xen/blktap2/Makefile
@@ -1,3 +1,4 @@
-obj-$(CONFIG_XEN_BLKDEV_TAP2) := blktap.o
+obj-$(CONFIG_XEN_BLKDEV_TAP2) := blktap2.o
 
-blktap-objs := control.o ring.o wait_queue.o device.o request.o sysfs.o
+blktap2-y := control.o ring.o wait_queue.o device.o request.o
+blktap2-$(CONFIG_SYSFS) += sysfs.o
