From: Benjamin Poirier <bpoirier@suse.de>
Subject: Restore context for PCI-MSI-Add-pci_enable_msi_range-and-pci_enable_msix.patch
Patch-mainline: never, it is just there to AVOID MODIFYING THE PREVIOUS PATCH
References: bug#908322 FATE#317535

Restore the context to what it was before xen3-auto-common.diff
See patches.xen/restore-context-for-xen3-auto-common.patch for more
information.
---
 include/linux/pci.h |    8 ++++++++
 1 file changed, 8 insertions(+)

--- a/include/linux/pci.h
+++ b/include/linux/pci.h
@@ -1082,6 +1082,10 @@ static inline int pci_enable_msix_range(
 {
 	return -ENOSYS;
 }
+the 3 following lines correspond to the context in xen3-auto-common.diff
+{
+	return 0;
+}
 #else
 extern int pci_enable_msi_block(struct pci_dev *dev, unsigned int nvec);
 extern void pci_msi_shutdown(struct pci_dev *dev);
@@ -1094,6 +1098,10 @@ extern void pci_disable_msix(struct pci_
 extern void msi_remove_pci_irq_vectors(struct pci_dev *dev);
 extern void pci_restore_msi_state(struct pci_dev *dev);
 extern int pci_msi_enabled(void);
+#endif
+
+#ifdef CONFIG_PCIEPORTBUS
+the 3 preceding lines correspond to the context in xen3-auto-common.diff
 int pci_enable_msi_range(struct pci_dev *dev, int minvec, int maxvec);
 int pci_enable_msix_range(struct pci_dev *dev, struct msix_entry *entries,
 			  int minvec, int maxvec);
