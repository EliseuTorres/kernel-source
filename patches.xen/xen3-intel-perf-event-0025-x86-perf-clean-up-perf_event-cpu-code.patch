From: Kevin Winchester <kjwinchester@gmail.com>
Subject: x86, perf: Clean up perf_event cpu code
References: bnc#789200, fate#313753, fate#312066, fate#313762
Patch-mainline: v3.2-rc1
Git-commit: de0428a7ad4856c7b5b8a2792488ac893e6f3faa
Signed-off-by: Tony Jones <tonyj@suse.de>

---
 arch/x86/kernel/cpu/Makefile |    6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

--- a/arch/x86/kernel/cpu/Makefile
+++ b/arch/x86/kernel/cpu/Makefile
@@ -42,7 +42,11 @@ obj-$(CONFIG_MTRR)			+= mtrr/
 obj-$(CONFIG_X86_LOCAL_APIC)		+= perfctr-watchdog.o
 
 disabled-obj-$(CONFIG_XEN) := hypervisor.o mshyperv.o perfctr-watchdog.o \
-			      perf_event.o sched.o vmware.o
+			      perf_event.o perf_event_amd.o perf_event_p6.o \
+			      perf_event_p4.o perf_event_intel_lbr.o \
+			      perf_event_intel_ds.o perf_event_intel.o \
+			      perf_event_intel_uncore.o \
+			      sched.o vmware.o
 
 quiet_cmd_mkcapflags = MKCAP   $@
       cmd_mkcapflags = $(PERL) $(srctree)/$(src)/mkcapflags.pl $< $@
