From: Martin K. Petersen <martin.petersen@oracle.com>
Date: Fri, 26 Feb 2010 00:20:38 -0500
Subject: [PATCH] block: Rename blk_queue_max_sectors to blk_queue_max_hw_sectors
X-Git: 086fa5ff0854c676ec333760f4c0154b3b242616
References: FATE#311054
Patch-Mainline: 2.6.34

The block layer calling convention is blk_queue_<limit name>.
blk_queue_max_sectors predates this practice, leading to some confusion.
Rename the function to appropriately reflect that its intended use is to
set max_hw_sectors.

Also introduce a temporary wrapper for backwards compability.  This can
be removed after the merge window is closed.

Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
Signed-off-by: Jens Axboe <jens.axboe@oracle.com>
Signed-off-by: Hannes Reinecke <hare@suse.de>
Automatically created from "patches.suse/block-Rename-blk_queue_max_sectors-to-blk_queue_max.patch" by xen-port-patches.py

--- sle11sp2-2011-05-31.orig/drivers/xen/blkfront/vbd.c	2010-01-18 16:54:56.000000000 +0100
+++ sle11sp2-2011-05-31/drivers/xen/blkfront/vbd.c	2011-05-31 11:18:53.000000000 +0200
@@ -311,7 +311,7 @@ xlvbd_init_blk_queue(struct gendisk *gd,
 
 	/* Hard sector size and max sectors impersonate the equiv. hardware. */
 	blk_queue_logical_block_size(rq, sector_size);
-	blk_queue_max_sectors(rq, 512);
+	blk_queue_max_hw_sectors(rq, 512);
 
 	/* Each segment in a request is up to an aligned page in size. */
 	blk_queue_segment_boundary(rq, PAGE_SIZE - 1);
--- sle11sp2-2011-05-31.orig/drivers/xen/blktap2/device.c	2011-05-05 15:34:54.000000000 +0200
+++ sle11sp2-2011-05-31/drivers/xen/blktap2/device.c	2011-05-31 11:18:58.000000000 +0200
@@ -988,7 +988,7 @@ blktap_device_configure(struct blktap *t
 
 	/* Hard sector size and max sectors impersonate the equiv. hardware. */
 	blk_queue_logical_block_size(rq, tap->params.sector_size);
-	blk_queue_max_sectors(rq, 512);
+	blk_queue_max_hw_sectors(rq, 512);
 
 	/* Each segment in a request is up to an aligned page in size. */
 	blk_queue_segment_boundary(rq, PAGE_SIZE - 1);
--- sle11sp2-2011-05-31.orig/drivers/xen/blktap2-new/device.c	2011-02-24 14:51:43.000000000 +0100
+++ sle11sp2-2011-05-31/drivers/xen/blktap2-new/device.c	2011-05-31 11:19:04.000000000 +0200
@@ -290,7 +290,7 @@ blktap_device_configure(struct blktap *t
 
 	/* Hard sector size and max sectors impersonate the equiv. hardware. */
 	blk_queue_logical_block_size(rq, params->sector_size);
-	blk_queue_max_sectors(rq, 512);
+	blk_queue_max_hw_sectors(rq, 512);
 
 	/* Each segment in a request is up to an aligned page in size. */
 	blk_queue_segment_boundary(rq, PAGE_SIZE - 1);
