From: Egbert Eich <eich@suse.com>
Date: Wed Nov 15 16:25:09 2013 +0200
Subject: drm/mgag200: Add additional limits for certain G200 variants
Patch-Mainline: to be upstreamed
Signed-off-by: Egbert Eich <eich@suse.com>

* On G200 SE the VRAM size limits the framebuffer pitch.
  We cannot validate the framebuffer pitch however as rejecting
  a mode at the time the fraembuffer is attached is not supported.
  This limit has been pulled from the UMS X.Org driver.
* According to the use UMS X.Org driver G200 WB chips don't support
  doublescan.

Signed-off-by: Egbert Eich <eich@suse.com>

---
 drivers/gpu/drm/mgag200/mgag200_mode.c |    6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/mgag200/mgag200_mode.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/mgag200/mgag200_mode.c
@@ -1564,6 +1567,7 @@ static struct drm_connector *mga_vga_ini
 {
 	struct drm_connector *connector;
 	struct mga_connector *mga_connector;
+	struct mga_device *mdev = dev->dev_private;
 
 	mga_connector = kzalloc(sizeof(struct mga_connector), GFP_KERNEL);
 	if (!mga_connector)
@@ -1572,7 +1576,7 @@ static struct drm_connector *mga_vga_ini
 	connector = &mga_connector->base;
 
 	connector->interlace_allowed = true;
-	connector->doublescan_allowed = true;
+	connector->doublescan_allowed = (mdev->type == G200_WB) ? false : true;
 
 	drm_connector_init(dev, connector,
 			   &mga_vga_connector_funcs, DRM_MODE_CONNECTOR_VGA);
