From: Takashi Iwai <tiwai@suse.de>
Patch-mainline: never
Subject: Revert commit 6311803b1294432ee680fec5e628efae0d485fa2 drm: use memchr_inv()

Compatibility patch taken from SUSE:SLE-11-SP3:GA/drm.

Acked-by: Michal Srb <msrb@suse.com>
---
 drivers/gpu/drm/drm_edid.c |    7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

--- a/drivers/gpu/drm/drm_edid.c
+++ b/drivers/gpu/drm/drm_edid.c
@@ -307,9 +307,12 @@ drm_do_probe_ddc_edid(struct i2c_adapter
 
 static bool drm_edid_is_zero(u8 *in_edid, int length)
 {
-	if (memchr_inv(in_edid, 0, length))
-		return false;
+	int i;
+	u32 *raw_edid = (u32 *)in_edid;
 
+	for (i = 0; i < length / 4; i++)
+		if (*(raw_edid + i) != 0)
+			return false;
 	return true;
 }
 
