From aefd330e694d5b7b9657cc53821c7879b14c8128 Mon Sep 17 00:00:00 2001
From: Sascha Hauer <s.hauer@pengutronix.de>
Date: Wed, 1 Feb 2012 11:38:21 +0100
Subject: drm/edid: drm modes have to be free with drm_mode_destroy
Git-commit: aefd330e694d5b7b9657cc53821c7879b14c8128
Patch-mainline: v3.4-rc1

to add the missing drm_mode_object_put for that mode.

Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>
Signed-off-by: Dave Airlie <airlied@redhat.com>
Acked-by: Michal Srb <msrb@suse.com>
---
 drivers/gpu/drm/drm_edid.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/drm_edid.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/drm_edid.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/drm_edid.c
@@ -783,7 +783,7 @@ drm_mode_std(struct drm_connector *conne
 		if (!mode)
 			return NULL;
 		if (drm_mode_hsync(mode) > drm_gtf2_hbreak(edid)) {
-			kfree(mode);
+			drm_mode_destroy(dev, mode);
 			mode = drm_gtf_mode_complex(dev, hsize, vsize,
 						    vrefresh_rate, 0, 0,
 						    drm_gtf2_m(edid),
