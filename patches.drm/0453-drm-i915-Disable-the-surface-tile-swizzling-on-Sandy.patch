From 5a19df7c8572ec2f188a346b2db1f842414802f5 Mon Sep 17 00:00:00 2001
From: Eric Anholt <eric@anholt.net>
Date: Thu, 5 Nov 2009 15:30:35 -0800
Patch-mainline: 2.6.34
References: fate#310916
Git-commit: c2416fc6bb16fa87bcc4b9d90a7632f3531bdee6
Subject: [PATCH 0453/2588] drm/i915: Disable the surface tile swizzling on
 Sandybridge.

I can't explain this, except that it makes my display correct.

Signed-off-by: Eric Anholt <eric@anholt.net>
(cherry picked from commit c2416fc6bb16fa87bcc4b9d90a7632f3531bdee6)

Signed-off-by: Takashi Iwai <tiwai@suse.de>
---
 drivers/gpu/drm/i915/intel_display.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/gpu/drm/i915/intel_display.c b/drivers/gpu/drm/i915/intel_display.c
index fa024bc..b53b894 100644
--- a/drivers/gpu/drm/i915/intel_display.c
+++ b/drivers/gpu/drm/i915/intel_display.c
@@ -3425,7 +3425,7 @@ static int intel_crtc_mode_set(struct drm_crtc *crtc,
 
 	intel_wait_for_vblank(dev);
 
-	if (HAS_PCH_SPLIT(dev)) {
+	if (IS_IRONLAKE(dev)) {
 		/* enable address swizzle for tiling buffer */
 		temp = I915_READ(DISP_ARB_CTL);
 		I915_WRITE(DISP_ARB_CTL, temp | DISP_TILE_SURFACE_SWIZZLING);
-- 
1.7.6

