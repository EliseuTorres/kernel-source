From 32f52df0ec0049112902c4a6df0604f4a4fd5cbc Mon Sep 17 00:00:00 2001
From: Zhao Yakui <yakui.zhao@intel.com>
Date: Wed, 2 Dec 2009 10:03:32 +0800
Patch-mainline: 2.6.33
References: fate#310916
Git-commit: f24bc39facc1e74eb989908106fe9f6d375ae16e
Subject: [PATCH 0079/2588] drm/i915: fix the incorrect condition judgement in
 dp_is_present_in_vbt

We were always looking for the PORT_IDPB entry.

Signed-off-by: Zhao Yakui <yakui.zhao@intel.com>
Reviewed-by: Zhenyu Wang <zhenyuw@linux.intel.com>
Signed-off-by: Eric Anholt <eric@anholt.net>
(cherry picked from commit f24bc39facc1e74eb989908106fe9f6d375ae16e)

Signed-off-by: Takashi Iwai <tiwai@suse.de>
---
 drivers/gpu/drm/i915/intel_dp.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/drivers/gpu/drm/i915/intel_dp.c b/drivers/gpu/drm/i915/intel_dp.c
index cfd7011..5843ece 100644
--- a/drivers/gpu/drm/i915/intel_dp.c
+++ b/drivers/gpu/drm/i915/intel_dp.c
@@ -1307,11 +1307,11 @@ int dp_is_present_in_vbt(struct drm_device *dev, int dp_reg)
 		return 1;
 
 	dp_port = 0;
-	if (dp_reg == DP_B || PCH_DP_B)
+	if (dp_reg == DP_B || dp_reg == PCH_DP_B)
 		dp_port = PORT_IDPB;
-	else if (dp_reg == DP_C || PCH_DP_C)
+	else if (dp_reg == DP_C || dp_reg == PCH_DP_C)
 		dp_port = PORT_IDPC;
-	else if (dp_reg == DP_D || PCH_DP_D)
+	else if (dp_reg == DP_D || dp_reg == PCH_DP_D)
 		dp_port = PORT_IDPD;
 
 	ret = 0;
-- 
1.7.6

