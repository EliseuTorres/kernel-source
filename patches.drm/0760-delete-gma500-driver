From b7cdd9e6323af368e26121c5b791eddc78e79fea Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@suse.de>
Date: Mon, 30 Jan 2012 14:12:59 -0800
Subject: staging: delete gma500 driver
Git-commit: b7cdd9e6323af368e26121c5b791eddc78e79fea
Patch-mainline: v3.3-rc4

It's now "properly" merged into the DRM tree in the kernel, so delete
the staging version of the driver as it is far obsolete and broken.

Requested-by: Alan Cox <alan@linux.intel.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
Acked-by: Michal Srb <msrb@suse.com>
---
 drivers/staging/Kconfig                       |    2 -
 drivers/staging/Makefile                      |    1 -
 drivers/staging/gma500/Kconfig                |   33 -
 drivers/staging/gma500/Makefile               |   52 -
 drivers/staging/gma500/TODO                   |   15 -
 drivers/staging/gma500/accel_2d.c             |  414 -------
 drivers/staging/gma500/backlight.c            |   49 -
 drivers/staging/gma500/cdv_device.c           |  350 ------
 drivers/staging/gma500/cdv_device.h           |   36 -
 drivers/staging/gma500/cdv_intel_crt.c        |  326 ------
 drivers/staging/gma500/cdv_intel_display.c    | 1508 -------------------------
 drivers/staging/gma500/cdv_intel_hdmi.c       |  376 ------
 drivers/staging/gma500/cdv_intel_lvds.c       |  721 ------------
 drivers/staging/gma500/displays/hdmi.h        |   33 -
 drivers/staging/gma500/displays/pyr_cmd.h     |   34 -
 drivers/staging/gma500/displays/pyr_vid.h     |   34 -
 drivers/staging/gma500/displays/tmd_cmd.h     |   34 -
 drivers/staging/gma500/displays/tmd_vid.h     |   34 -
 drivers/staging/gma500/displays/tpo_cmd.h     |   35 -
 drivers/staging/gma500/displays/tpo_vid.h     |   33 -
 drivers/staging/gma500/framebuffer.c          |  856 --------------
 drivers/staging/gma500/framebuffer.h          |   48 -
 drivers/staging/gma500/gem.c                  |  292 -----
 drivers/staging/gma500/gem_glue.c             |   89 --
 drivers/staging/gma500/gem_glue.h             |    2 -
 drivers/staging/gma500/gtt.c                  |  553 ---------
 drivers/staging/gma500/gtt.h                  |   64 --
 drivers/staging/gma500/intel_bios.c           |  303 -----
 drivers/staging/gma500/intel_bios.h           |  430 -------
 drivers/staging/gma500/intel_i2c.c            |  170 ---
 drivers/staging/gma500/intel_opregion.c       |   81 --
 drivers/staging/gma500/mdfld_device.c         |  714 ------------
 drivers/staging/gma500/mdfld_dsi_dbi.c        |  761 -------------
 drivers/staging/gma500/mdfld_dsi_dbi.h        |  173 ---
 drivers/staging/gma500/mdfld_dsi_dbi_dpu.c    |  778 -------------
 drivers/staging/gma500/mdfld_dsi_dbi_dpu.h    |  154 ---
 drivers/staging/gma500/mdfld_dsi_dpi.c        |  805 -------------
 drivers/staging/gma500/mdfld_dsi_dpi.h        |   78 --
 drivers/staging/gma500/mdfld_dsi_output.c     | 1014 -----------------
 drivers/staging/gma500/mdfld_dsi_output.h     |  138 ---
 drivers/staging/gma500/mdfld_dsi_pkg_sender.c | 1484 ------------------------
 drivers/staging/gma500/mdfld_dsi_pkg_sender.h |  184 ---
 drivers/staging/gma500/mdfld_intel_display.c  | 1404 -----------------------
 drivers/staging/gma500/mdfld_msic.h           |   31 -
 drivers/staging/gma500/mdfld_output.c         |  171 ---
 drivers/staging/gma500/mdfld_output.h         |   41 -
 drivers/staging/gma500/mdfld_pyr_cmd.c        |  558 ---------
 drivers/staging/gma500/mdfld_tmd_vid.c        |  206 ----
 drivers/staging/gma500/mdfld_tpo_cmd.c        |  509 ---------
 drivers/staging/gma500/mdfld_tpo_vid.c        |  140 ---
 drivers/staging/gma500/medfield.h             |  268 -----
 drivers/staging/gma500/mid_bios.c             |  270 -----
 drivers/staging/gma500/mid_bios.h             |   21 -
 drivers/staging/gma500/mmu.c                  |  858 --------------
 drivers/staging/gma500/mrst.h                 |  252 ----
 drivers/staging/gma500/mrst_crtc.c            |  604 ----------
 drivers/staging/gma500/mrst_device.c          |  634 -----------
 drivers/staging/gma500/mrst_hdmi.c            |  852 --------------
 drivers/staging/gma500/mrst_hdmi_i2c.c        |  328 ------
 drivers/staging/gma500/mrst_lvds.c            |  407 -------
 drivers/staging/gma500/power.c                |  318 ------
 drivers/staging/gma500/power.h                |   67 --
 drivers/staging/gma500/psb_device.c           |  321 ------
 drivers/staging/gma500/psb_drm.h              |  219 ----
 drivers/staging/gma500/psb_drv.c              | 1230 --------------------
 drivers/staging/gma500/psb_drv.h              |  952 ----------------
 drivers/staging/gma500/psb_intel_display.c    | 1429 -----------------------
 drivers/staging/gma500/psb_intel_display.h    |   28 -
 drivers/staging/gma500/psb_intel_drv.h        |  230 ----
 drivers/staging/gma500/psb_intel_lvds.c       |  854 --------------
 drivers/staging/gma500/psb_intel_modes.c      |   77 --
 drivers/staging/gma500/psb_intel_reg.h        | 1235 --------------------
 drivers/staging/gma500/psb_intel_sdvo.c       | 1293 ---------------------
 drivers/staging/gma500/psb_intel_sdvo_regs.h  |  338 ------
 drivers/staging/gma500/psb_irq.c              |  627 ----------
 drivers/staging/gma500/psb_irq.h              |   45 -
 drivers/staging/gma500/psb_lid.c              |   88 --
 drivers/staging/gma500/psb_reg.h              |  582 ----------
 78 files changed, 0 insertions(+), 30778 deletions(-)

Index: linux-3.0-SLE11-SP3/drivers/staging/Makefile
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/staging/Makefile
+++ linux-3.0-SLE11-SP3/drivers/staging/Makefile
@@ -68,6 +68,5 @@ obj-$(CONFIG_SPEAKUP)		+= speakup/
 obj-$(CONFIG_ALTERA_STAPL)	+=altera-stapl/
 obj-$(CONFIG_TOUCHSCREEN_CLEARPAD_TM1217)	+= cptm1217/
 obj-$(CONFIG_TOUCHSCREEN_SYNAPTICS_I2C_RMI4)	+= ste_rmi4/
-obj-$(CONFIG_DRM_PSB)		+= gma500/
 obj-$(CONFIG_INTEL_MEI)		+= mei/
 obj-$(CONFIG_MFD_NVEC)		+= nvec/
Index: linux-3.0-SLE11-SP3/drivers/staging/gma500/psb_intel_modes.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/staging/gma500/psb_intel_modes.c
+++ /dev/null
@@ -1,77 +0,0 @@
-/*
- * Copyright (c) 2007 Intel Corporation
- *
- * This program is free software; you can redistribute it and/or modify it
- * under the terms and conditions of the GNU General Public License,
- * version 2, as published by the Free Software Foundation.
- *
- * This program is distributed in the hope it will be useful, but WITHOUT
- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
- * more details.
- *
- * You should have received a copy of the GNU General Public License along with
- * this program; if not, write to the Free Software Foundation, Inc.,
- * 51 Franklin St - Fifth Floor, Boston, MA 02110-1301 USA.
- *
- * Authers: Jesse Barnes <jesse.barnes@intel.com>
- */
-
-#include <linux/i2c.h>
-#include <linux/fb.h>
-#include <drm/drmP.h>
-#include "psb_intel_drv.h"
-
-/**
- * psb_intel_ddc_probe
- *
- */
-bool psb_intel_ddc_probe(struct psb_intel_output *psb_intel_output)
-{
-	u8 out_buf[] = { 0x0, 0x0 };
-	u8 buf[2];
-	int ret;
-	struct i2c_msg msgs[] = {
-		{
-		 .addr = 0x50,
-		 .flags = 0,
-		 .len = 1,
-		 .buf = out_buf,
-		 },
-		{
-		 .addr = 0x50,
-		 .flags = I2C_M_RD,
-		 .len = 1,
-		 .buf = buf,
-		 }
-	};
-
-	ret = i2c_transfer(&psb_intel_output->ddc_bus->adapter, msgs, 2);
-	if (ret == 2)
-		return true;
-
-	return false;
-}
-
-/**
- * psb_intel_ddc_get_modes - get modelist from monitor
- * @connector: DRM connector device to use
- *
- * Fetch the EDID information from @connector using the DDC bus.
- */
-int psb_intel_ddc_get_modes(struct psb_intel_output *psb_intel_output)
-{
-	struct edid *edid;
-	int ret = 0;
-
-	edid =
-	    drm_get_edid(&psb_intel_output->base,
-			 &psb_intel_output->ddc_bus->adapter);
-	if (edid) {
-		drm_mode_connector_update_edid_property(&psb_intel_output->
-							base, edid);
-		ret = drm_add_edid_modes(&psb_intel_output->base, edid);
-		kfree(edid);
-	}
-	return ret;
-}
