From 99c9de892f1017d3616f2c4ddd6267f6c985fdff Mon Sep 17 00:00:00 2001
From: Dave Airlie <airlied@redhat.com>
Date: Tue, 9 Feb 2010 09:06:00 +1000
Patch-mainline: 2.6.33
References: fate#310916
Git-commit: efa8450f6c93c9d4c99adfea2f52f1d02d878d5b
Subject: [PATCH 0340/2588] drm/radeon/kms: add quirk for VGA without DDC on
 rv730 XFX card.

Reported on irc by nirbheek.

Signed-off-by: Dave Airlie <airlied@redhat.com>
(cherry picked from commit efa8450f6c93c9d4c99adfea2f52f1d02d878d5b)

Signed-off-by: Takashi Iwai <tiwai@suse.de>
---
 drivers/gpu/drm/radeon/radeon_atombios.c |    9 +++++++++
 1 files changed, 9 insertions(+), 0 deletions(-)

diff --git a/drivers/gpu/drm/radeon/radeon_atombios.c b/drivers/gpu/drm/radeon/radeon_atombios.c
index a43000d..1e29c60 100644
--- a/drivers/gpu/drm/radeon/radeon_atombios.c
+++ b/drivers/gpu/drm/radeon/radeon_atombios.c
@@ -303,6 +303,15 @@ static bool radeon_atom_apply_quirks(struct drm_device *dev,
 			*connector_type = DRM_MODE_CONNECTOR_DVID;
 	}
 
+	/* XFX Pine Group device rv730 reports no VGA DDC lines
+	 * even though they are wired up to record 0x93
+	 */
+	if ((dev->pdev->device == 0x9498) &&
+	    (dev->pdev->subsystem_vendor == 0x1682) &&
+	    (dev->pdev->subsystem_device == 0x2452)) {
+		struct radeon_device *rdev = dev->dev_private;
+		*i2c_bus = radeon_lookup_i2c_gpio(rdev, 0x93);
+	}
 	return true;
 }
 
-- 
1.7.6

