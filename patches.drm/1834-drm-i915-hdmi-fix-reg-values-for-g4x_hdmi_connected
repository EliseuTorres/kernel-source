From eeafaaca763408c099d2ade3a69e0716f296a97b Mon Sep 17 00:00:00 2001
From: Chris Wilson <chris@chris-wilson.co.uk>
Date: Fri, 25 May 2012 10:23:37 +0100
Subject: drm/i915/hdmi: Fix reg values for g4x_hdmi_connected
Git-commit: eeafaaca763408c099d2ade3a69e0716f296a97b
Patch-mainline: v3.6-rc1

Paulo pointed out that gen4 re-used the SDVO registers for HDMI (the
separate HDMI registers where introduced with the first PCH) and so
g4x_hdmi_connected() never selected the right bit and always returned
disconnected.

Regression in

commit 8ec22b214d76773c9d89f4040505ce10f677ed9a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri May 11 18:01:34 2012 +0100

    drm/i915/hdmi: Query the live connector status bit for G4x

Cc: Paulo Zanoni <przanoni@gmail.com>
Reviewed-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
Tested-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>
Acked-by: Michal Srb <msrb@suse.com>
---
 drivers/gpu/drm/i915/intel_hdmi.c |    7 ++-----
 1 files changed, 2 insertions(+), 5 deletions(-)

diff --git a/drivers/gpu/drm/i915/intel_hdmi.c b/drivers/gpu/drm/i915/intel_hdmi.c
index 77f0f8f..4c6f141 100644
--- a/drivers/gpu/drm/i915/intel_hdmi.c
+++ b/drivers/gpu/drm/i915/intel_hdmi.c
@@ -459,15 +459,12 @@ static bool g4x_hdmi_connected(struct intel_hdmi *intel_hdmi)
 	uint32_t bit;
 
 	switch (intel_hdmi->sdvox_reg) {
-	case HDMIB:
+	case SDVOB:
 		bit = HDMIB_HOTPLUG_LIVE_STATUS;
 		break;
-	case HDMIC:
+	case SDVOC:
 		bit = HDMIC_HOTPLUG_LIVE_STATUS;
 		break;
-	case HDMID:
-		bit = HDMID_HOTPLUG_LIVE_STATUS;
-		break;
 	default:
 		bit = 0;
 		break;

