From 87fff3fc71bf72b9fe304cc6860c94ca7f392c01 Mon Sep 17 00:00:00 2001
From: Daniel Vetter <daniel.vetter@ffwll.ch>
Date: Fri, 27 Aug 2010 16:25:54 +0200
Patch-mainline: 2.6.37
References: fate#310916
Git-commit: 77ad498ecaeb9a614d2a7bbfaab58a35c0cc577d
Subject: [PATCH 1347/2588] intel-gtt: drop unnecessary conditions in
 intel_gtt_stolen_entries

The dedection function in drm/i915/i915_dma.c works without it, so
drop it here, too. All the values are disdinct, anyway.

Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>
Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
(cherry picked from commit 77ad498ecaeb9a614d2a7bbfaab58a35c0cc577d)

Signed-off-by: Takashi Iwai <tiwai@suse.de>
---
 drivers/char/agp/intel-gtt.c |   42 ++++++++----------------------------------
 1 files changed, 8 insertions(+), 34 deletions(-)

diff --git a/drivers/char/agp/intel-gtt.c b/drivers/char/agp/intel-gtt.c
index 79eb106..a620296 100644
--- a/drivers/char/agp/intel-gtt.c
+++ b/drivers/char/agp/intel-gtt.c
@@ -704,54 +704,28 @@ static unsigned int intel_gtt_stolen_entries(void)
 			stolen_size = MB(32);
 			break;
 		case I915_GMCH_GMS_STOLEN_48M:
-			/* Check it's really I915G */
-			if (IS_I915 || IS_I965 || IS_G33 || IS_G4X)
-				stolen_size = MB(48);
-			else
-				stolen_size = 0;
+			stolen_size = MB(48);
 			break;
 		case I915_GMCH_GMS_STOLEN_64M:
-			/* Check it's really I915G */
-			if (IS_I915 || IS_I965 || IS_G33 || IS_G4X)
-				stolen_size = MB(64);
-			else
-				stolen_size = 0;
+			stolen_size = MB(64);
 			break;
 		case G33_GMCH_GMS_STOLEN_128M:
-			if (IS_G33 || IS_I965 || IS_G4X)
-				stolen_size = MB(128);
-			else
-				stolen_size = 0;
+			stolen_size = MB(128);
 			break;
 		case G33_GMCH_GMS_STOLEN_256M:
-			if (IS_G33 || IS_I965 || IS_G4X)
-				stolen_size = MB(256);
-			else
-				stolen_size = 0;
+			stolen_size = MB(256);
 			break;
 		case INTEL_GMCH_GMS_STOLEN_96M:
-			if (IS_I965 || IS_G4X)
-				stolen_size = MB(96);
-			else
-				stolen_size = 0;
+			stolen_size = MB(96);
 			break;
 		case INTEL_GMCH_GMS_STOLEN_160M:
-			if (IS_I965 || IS_G4X)
-				stolen_size = MB(160);
-			else
-				stolen_size = 0;
+			stolen_size = MB(160);
 			break;
 		case INTEL_GMCH_GMS_STOLEN_224M:
-			if (IS_I965 || IS_G4X)
-				stolen_size = MB(224);
-			else
-				stolen_size = 0;
+			stolen_size = MB(224);
 			break;
 		case INTEL_GMCH_GMS_STOLEN_352M:
-			if (IS_I965 || IS_G4X)
-				stolen_size = MB(352);
-			else
-				stolen_size = 0;
+			stolen_size = MB(352);
 			break;
 		default:
 			stolen_size = 0;
-- 
1.7.6

