From 7870f95da269a251d44d66d5382285b2665e2586 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Kristian=20H=C3=B8gsberg?= <krh@bitplanet.net>
Date: Wed, 16 Dec 2009 15:16:15 -0500
Patch-mainline: 2.6.33
References: fate#310916
Git-commit: 49ae35f2dd1ff78ee88d5f8a38d0af63c3ad9f71
Subject: [PATCH 0211/2588] drm/i915: Move PCI IDs into i915 driver
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

The old include/drm/drm_pciids.h used to be generated from the libdrm
git repo.  We don't use that anymore so just use a local list in the
driver like everybody else.

Signed-off-by: Kristian HÃ¸gsberg <krh@bitplanet.net>
Signed-off-by: Eric Anholt <eric@anholt.net>
(cherry picked from commit 49ae35f2dd1ff78ee88d5f8a38d0af63c3ad9f71)

Signed-off-by: Takashi Iwai <tiwai@suse.de>
---
 drivers/gpu/drm/i915/i915_drv.c |   42 +++++++++++++++++++++++++++++++++++++-
 1 files changed, 40 insertions(+), 2 deletions(-)

diff --git a/drivers/gpu/drm/i915/i915_drv.c b/drivers/gpu/drm/i915/i915_drv.c
index 2fac5a7..a823061 100644
--- a/drivers/gpu/drm/i915/i915_drv.c
+++ b/drivers/gpu/drm/i915/i915_drv.c
@@ -33,7 +33,6 @@
 #include "i915_drm.h"
 #include "i915_drv.h"
 
-#include "drm_pciids.h"
 #include <linux/console.h>
 #include "drm_crtc_helper.h"
 
@@ -48,8 +47,47 @@ module_param_named(powersave, i915_powersave, int, 0400);
 
 static struct drm_driver driver;
 
+#define INTEL_VGA_DEVICE(id) {			\
+	.class = PCI_CLASS_DISPLAY_VGA << 8,	\
+	.class_mask = 0xffff00,			\
+	.vendor = 0x8086,			\
+	.device = id,				\
+	.subvendor = PCI_ANY_ID,		\
+	.subdevice = PCI_ANY_ID,		\
+	.driver_data = 0 }
+
 static struct pci_device_id pciidlist[] = {
-	i915_PCI_IDS
+	INTEL_VGA_DEVICE(0x3577),
+	INTEL_VGA_DEVICE(0x2562),
+	INTEL_VGA_DEVICE(0x3582),
+	INTEL_VGA_DEVICE(0x2572),
+	INTEL_VGA_DEVICE(0x2582),
+	INTEL_VGA_DEVICE(0x258a),
+	INTEL_VGA_DEVICE(0x2592),
+	INTEL_VGA_DEVICE(0x2772),
+	INTEL_VGA_DEVICE(0x27a2),
+	INTEL_VGA_DEVICE(0x27ae),
+	INTEL_VGA_DEVICE(0x2972),
+	INTEL_VGA_DEVICE(0x2982),
+	INTEL_VGA_DEVICE(0x2992),
+	INTEL_VGA_DEVICE(0x29a2),
+	INTEL_VGA_DEVICE(0x29b2),
+	INTEL_VGA_DEVICE(0x29c2),
+	INTEL_VGA_DEVICE(0x29d2),
+	INTEL_VGA_DEVICE(0x2a02),
+	INTEL_VGA_DEVICE(0x2a12),
+	INTEL_VGA_DEVICE(0x2a42),
+	INTEL_VGA_DEVICE(0x2e02),
+	INTEL_VGA_DEVICE(0x2e12),
+	INTEL_VGA_DEVICE(0x2e22),
+	INTEL_VGA_DEVICE(0x2e32),
+	INTEL_VGA_DEVICE(0x2e42),
+	INTEL_VGA_DEVICE(0xa001),
+	INTEL_VGA_DEVICE(0xa011),
+	INTEL_VGA_DEVICE(0x35e8),
+	INTEL_VGA_DEVICE(0x0042),
+	INTEL_VGA_DEVICE(0x0046),
+	{0, 0, 0}
 };
 
 #if defined(CONFIG_DRM_I915_KMS)
-- 
1.7.6

