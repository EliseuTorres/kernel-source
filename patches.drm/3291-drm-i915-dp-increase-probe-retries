From 3c4bd8050d21fe067c2d3517906c04ed304b5152 Mon Sep 17 00:00:00 2001
From: Takashi Iwai <tiwai@suse.de>
Date: Tue, 6 Aug 2013 14:33:01 +0200
Subject: [PATCH] drm/i915: dp: increase probe retries
Patch-mainline: Submitted
References: bnc#831422

We've seen a problem that the DP port on a docking station is often
not detected properly or misconfigured (no proper native modes) with a
Haswell-based laptop.  The trace showed that the driver gave up or got
only insufficient EDID, maybe due to some unstable aux communication.

As a band-aid fix, increase the number of retries from 5 to 10.
This seems enough for our cases.

Signed-off-by: Takashi Iwai <tiwai@suse.de>
Acked-by: Takashi Iwai <tiwai@suse.de>

---
 drivers/gpu/drm/i915/intel_dp.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/drivers/gpu/drm/i915/intel_dp.c
+++ b/drivers/gpu/drm/i915/intel_dp.c
@@ -659,7 +659,7 @@ intel_dp_i2c_aux_ch(struct i2c_adapter *
 		break;
 	}
 
-	for (retry = 0; retry < 5; retry++) {
+	for (retry = 0; retry < 10; retry++) {
 		ret = intel_dp_aux_ch(intel_dp,
 				      msg, msg_bytes,
 				      reply, reply_bytes);
