From a7c6e75eb28d18ed8d53182891330f5c1fa4477c Mon Sep 17 00:00:00 2001
From: Ben Skeggs <bskeggs@redhat.com>
Date: Tue, 14 Aug 2012 15:02:29 +1000
Subject: drm/nouveau/fifo: version the dma channel class struct
Git-commit: a7c6e75eb28d18ed8d53182891330f5c1fa4477c
Patch-mainline: v3.7-rc3

Signed-off-by: Ben Skeggs <bskeggs@redhat.com>
Acked-by: Michal Srb <msrb@suse.com>
---
 drivers/gpu/drm/nouveau/core/engine/fifo/nv04.c   |    2 +-
 drivers/gpu/drm/nouveau/core/engine/fifo/nv10.c   |    2 +-
 drivers/gpu/drm/nouveau/core/engine/fifo/nv17.c   |    2 +-
 drivers/gpu/drm/nouveau/core/engine/fifo/nv40.c   |    2 +-
 drivers/gpu/drm/nouveau/core/include/core/class.h |    2 +-
 drivers/gpu/drm/nouveau/nouveau_chan.c            |    2 +-
 6 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/drivers/gpu/drm/nouveau/core/engine/fifo/nv04.c b/drivers/gpu/drm/nouveau/core/engine/fifo/nv04.c
index ed77192..cc49284 100644
--- a/drivers/gpu/drm/nouveau/core/engine/fifo/nv04.c
+++ b/drivers/gpu/drm/nouveau/core/engine/fifo/nv04.c
@@ -118,7 +118,7 @@ nv04_fifo_chan_ctor(struct nouveau_object *parent,
 {
 	struct nv04_fifo_priv *priv = (void *)engine;
 	struct nv04_fifo_chan *chan;
-	struct nv_channel_dma_class *args = data;
+	struct nv03_channel_dma_class *args = data;
 	int ret;
 
 	if (size < sizeof(*args))
diff --git a/drivers/gpu/drm/nouveau/core/engine/fifo/nv10.c b/drivers/gpu/drm/nouveau/core/engine/fifo/nv10.c
index 5d3638b..c4c78d5 100644
--- a/drivers/gpu/drm/nouveau/core/engine/fifo/nv10.c
+++ b/drivers/gpu/drm/nouveau/core/engine/fifo/nv10.c
@@ -61,7 +61,7 @@ nv10_fifo_chan_ctor(struct nouveau_object *parent,
 {
 	struct nv04_fifo_priv *priv = (void *)engine;
 	struct nv04_fifo_chan *chan;
-	struct nv_channel_dma_class *args = data;
+	struct nv03_channel_dma_class *args = data;
 	int ret;
 
 	if (size < sizeof(*args))
diff --git a/drivers/gpu/drm/nouveau/core/engine/fifo/nv17.c b/drivers/gpu/drm/nouveau/core/engine/fifo/nv17.c
index 347b91e..1733765 100644
--- a/drivers/gpu/drm/nouveau/core/engine/fifo/nv17.c
+++ b/drivers/gpu/drm/nouveau/core/engine/fifo/nv17.c
@@ -66,7 +66,7 @@ nv17_fifo_chan_ctor(struct nouveau_object *parent,
 {
 	struct nv04_fifo_priv *priv = (void *)engine;
 	struct nv04_fifo_chan *chan;
-	struct nv_channel_dma_class *args = data;
+	struct nv03_channel_dma_class *args = data;
 	int ret;
 
 	if (size < sizeof(*args))
diff --git a/drivers/gpu/drm/nouveau/core/engine/fifo/nv40.c b/drivers/gpu/drm/nouveau/core/engine/fifo/nv40.c
index 48114e6..aef8ca1 100644
--- a/drivers/gpu/drm/nouveau/core/engine/fifo/nv40.c
+++ b/drivers/gpu/drm/nouveau/core/engine/fifo/nv40.c
@@ -184,7 +184,7 @@ nv40_fifo_chan_ctor(struct nouveau_object *parent,
 {
 	struct nv04_fifo_priv *priv = (void *)engine;
 	struct nv04_fifo_chan *chan;
-	struct nv_channel_dma_class *args = data;
+	struct nv03_channel_dma_class *args = data;
 	int ret;
 
 	if (size < sizeof(*args))
diff --git a/drivers/gpu/drm/nouveau/core/include/core/class.h b/drivers/gpu/drm/nouveau/core/include/core/class.h
index 55b53ed..10279d2 100644
--- a/drivers/gpu/drm/nouveau/core/include/core/class.h
+++ b/drivers/gpu/drm/nouveau/core/include/core/class.h
@@ -57,7 +57,7 @@ struct nv_dma_class {
  * 406e: NV40_CHANNEL_DMA
  */
 
-struct nv_channel_dma_class {
+struct nv03_channel_dma_class {
 	u32 pushbuf;
 	u32 pad0;
 	u64 offset;
diff --git a/drivers/gpu/drm/nouveau/nouveau_chan.c b/drivers/gpu/drm/nouveau/nouveau_chan.c
index cf61dc0..e645184 100644
--- a/drivers/gpu/drm/nouveau/nouveau_chan.c
+++ b/drivers/gpu/drm/nouveau/nouveau_chan.c
@@ -223,7 +223,7 @@ nouveau_channel_dma(struct nouveau_drm *drm, struct nouveau_cli *cli,
 {
 	static const u16 oclasses[] = { 0x406e, 0x176e, 0x006e, 0x006b, 0 };
 	const u16 *oclass = oclasses;
-	struct nv_channel_dma_class args;
+	struct nv03_channel_dma_class args;
 	struct nouveau_channel *chan;
 	int ret;
 

