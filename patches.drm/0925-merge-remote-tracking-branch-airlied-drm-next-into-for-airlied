From ff5f4b0585620e5c158ecaad84d91c5bf3c5d0a1 Mon Sep 17 00:00:00 2001
From: Daniel Vetter <daniel.vetter@ffwll.ch>
Date: Thu, 23 Feb 2012 14:54:20 +0100
Subject: Merge remote-tracking branch 'airlied/drm-next' into for-airlied
Git-commit: ff5f4b0585620e5c158ecaad84d91c5bf3c5d0a1
Patch-mainline: v3.4-rc1

Manually resolve the conflict between the new enum drm property
helpers in drm-next and the new "force-dvi" option that the "audio" output
property gained in drm-intel-next.

While resolving this conflict, switch the new drm_prop_enum_list to
use the newly introduced enum defines instead of magic values.

Conflicts:
	drivers/gpu/drm/i915/intel_modes.c

Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>
Acked-by: Michal Srb <msrb@suse.com>

 drivers/gpu/drm/drm_crtc.c                  |  201 +++---
 drivers/gpu/drm/drm_crtc_helper.c           |   12 +-
 drivers/gpu/drm/drm_drv.c                   |   12 +-
 drivers/gpu/drm/drm_edid.c                  |    7 +-
 drivers/gpu/drm/drm_fb_helper.c             |   88 +--
 drivers/gpu/drm/drm_ioctl.c                 |    6 +
 drivers/gpu/drm/drm_modes.c                 |    2 -
 drivers/gpu/drm/drm_pci.c                   |    2 -
 drivers/gpu/drm/exynos/exynos_drm_fbdev.c   |   28 +-
 drivers/gpu/drm/gma500/framebuffer.c        |   11 +-
 drivers/gpu/drm/gma500/intel_gmbus.c        |    2 +-
 drivers/gpu/drm/gma500/psb_drv.c            |    2 +
 drivers/gpu/drm/gma500/psb_intel_sdvo.c     |   28 +-
 drivers/gpu/drm/i2c/ch7006_drv.c            |    5 +-
 drivers/gpu/drm/i810/i810_dma.c             |    2 +
 drivers/gpu/drm/i915/i915_dma.c             |    2 +
 drivers/gpu/drm/i915/intel_display.c        |    3 +
 drivers/gpu/drm/i915/intel_fb.c             |    6 +-
 drivers/gpu/drm/i915/intel_i2c.c            |    4 +-
 drivers/gpu/drm/i915/intel_modes.c          |   31 +-
 drivers/gpu/drm/i915/intel_sdvo.c           |   30 +-
 drivers/gpu/drm/mga/mga_dma.c               |    2 +
 drivers/gpu/drm/nouveau/nouveau_display.c   |   20 +-
 drivers/gpu/drm/nouveau/nouveau_fbcon.c     |    6 +-
 drivers/gpu/drm/nouveau/nouveau_state.c     |    2 +
 drivers/gpu/drm/r128/r128_drv.c             |    1 +
 drivers/gpu/drm/radeon/Makefile             |    2 +-
 drivers/gpu/drm/radeon/atombios_crtc.c      |   20 +-
 drivers/gpu/drm/radeon/atombios_i2c.c       |  139 ++++
 drivers/gpu/drm/radeon/evergreen.c          |   31 +
 drivers/gpu/drm/radeon/evergreen_blit_kms.c |   12 +-
 drivers/gpu/drm/radeon/evergreen_cs.c       |  958 +++++++++++++++++++++++++--
 drivers/gpu/drm/radeon/evergreend.h         |  377 +++++++++++
 drivers/gpu/drm/radeon/r100.c               |   56 +-
 drivers/gpu/drm/radeon/r200.c               |   29 +-
 drivers/gpu/drm/radeon/r600_blit_kms.c      |   15 +-
 drivers/gpu/drm/radeon/r600_cs.c            |  282 +++++++--
 drivers/gpu/drm/radeon/r600d.h              |   20 +
 drivers/gpu/drm/radeon/radeon.h             |   13 +
 drivers/gpu/drm/radeon/radeon_benchmark.c   |   12 +-
 drivers/gpu/drm/radeon/radeon_blit_common.h |   44 ++
 drivers/gpu/drm/radeon/radeon_cp.c          |    2 +
 drivers/gpu/drm/radeon/radeon_display.c     |   73 +--
 drivers/gpu/drm/radeon/radeon_drv.c         |    5 +-
 drivers/gpu/drm/radeon/radeon_fb.c          |    6 +-
 drivers/gpu/drm/radeon/radeon_i2c.c         |   27 +-
 drivers/gpu/drm/radeon/radeon_kms.c         |    2 +
 drivers/gpu/drm/radeon/radeon_object.c      |   46 ++
 drivers/gpu/drm/radeon/reg_srcs/cayman      |   11 +-
 drivers/gpu/drm/radeon/reg_srcs/evergreen   |   11 +-
 drivers/gpu/drm/radeon/reg_srcs/r600        |   19 +-
 drivers/gpu/drm/sis/sis_drv.c               |    2 +
 drivers/gpu/drm/via/via_map.c               |    2 +
 drivers/gpu/drm/vmwgfx/vmwgfx_drv.c         |   55 ++
 drivers/gpu/drm/vmwgfx/vmwgfx_drv.h         |   10 +-
 drivers/gpu/drm/vmwgfx/vmwgfx_execbuf.c     |   15 +-
 drivers/gpu/drm/vmwgfx/vmwgfx_fb.c          |   22 +-
 drivers/gpu/drm/vmwgfx/vmwgfx_fence.c       |  252 ++++---
 drivers/gpu/drm/vmwgfx/vmwgfx_fence.h       |    9 +-
 drivers/gpu/drm/vmwgfx/vmwgfx_kms.c         |   91 +++-
 drivers/gpu/drm/vmwgfx/vmwgfx_kms.h         |    8 +
 drivers/gpu/drm/vmwgfx/vmwgfx_ldu.c         |    4 +-
 drivers/gpu/drm/vmwgfx/vmwgfx_scrn.c        |   38 +-
 include/drm/drm.h                           |    2 +
 include/drm/drm_crtc.h                      |   16 +-
 include/drm/drm_fb_helper.h                 |    2 -
 include/drm/radeon_drm.h                    |   24 +-
 67 files changed, 2564 insertions(+), 715 deletions(-)

Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/i915/intel_modes.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/i915/intel_modes.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/i915/intel_modes.c
@@ -84,10 +84,10 @@ int intel_ddc_get_modes(struct drm_conne
 }
 
 static const struct drm_prop_enum_list force_audio_names[] = {
-	{ -2, "force-dvi" },
-	{ -1, "off" },
-	{  0, "auto" },
-	{  1, "on" },
+	{ HDMI_AUDIO_OFF_DVI, "force-dvi" },
+	{ HDMI_AUDIO_OFF, "off" },
+	{ HDMI_AUDIO_AUTO, "auto" },
+	{ HDMI_AUDIO_ON, "on" },
 };
 
 void
