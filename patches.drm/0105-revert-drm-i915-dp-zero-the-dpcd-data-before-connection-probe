From 4edd17a25c99f34bd7a75c1daf31afe840237da8 Mon Sep 17 00:00:00 2001
From: Keith Packard <keithp@keithp.com>
Date: Wed, 3 Aug 2011 10:34:58 -0700
Subject: Revert "drm/i915/dp: Zero the DPCD data before connection probe"
Git-commit: 4edd17a25c99f34bd7a75c1daf31afe840237da8
Patch-mainline: v3.1-rc1

This reverts commit 97cdd7101079adc3c626d159c62d43de949516c8.

Clearing the dpcd data means that if the fetch fails, any previous
data will be lost. On eDP, this is no fun as we only fetch dpcd at
init time, so the memset will destroy that the next time through.

Acked-by: Michal Srb <msrb@suse.com>
---

 drivers/gpu/drm/i915/intel_dp.c |    1 -
 1 file changed, 1 deletion(-)

--- a/drivers/gpu/drm/i915/intel_dp.c
+++ b/drivers/gpu/drm/i915/intel_dp.c
@@ -1697,7 +1697,6 @@ intel_dp_detect(struct drm_connector *connector, bool force)
 	struct edid *edid = NULL;
 
 	intel_dp->has_audio = false;
-	memset(intel_dp->dpcd, 0, sizeof(intel_dp->dpcd));
 
 	if (HAS_PCH_SPLIT(dev))
 		status = ironlake_dp_detect(intel_dp);


