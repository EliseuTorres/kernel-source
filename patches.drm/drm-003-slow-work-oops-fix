From: Takashi Iwai <tiwai@suse.de>
Subject: drm: Fix Oops with slow_work in 2.6.32
Patch-mainline: Never
References: fate#310916

Fix Oops with slow_work when no get_ref is defined.

Signed-off-by: Takashi Iwai <tiwai@suse.de>

---
 drivers/gpu/drm/drm_crtc_helper.c |    6 ++++++
 1 file changed, 6 insertions(+)

--- a/drivers/gpu/drm/drm_crtc_helper.c
+++ b/drivers/gpu/drm/drm_crtc_helper.c
@@ -973,6 +973,12 @@
 }
 EXPORT_SYMBOL(drm_helper_hpd_irq_event);
 
+static int output_poll_get_ref(struct slow_work *work)
+{
+	return 0;
+}
+
 static struct slow_work_ops output_poll_ops = {
+	.get_ref = output_poll_get_ref, /* 2.6.32 gives Oops without this */
 	.execute = output_poll_execute,
 };
