From 7b721ba4798f6804a61bcf051a67453282f62cc0 Mon Sep 17 00:00:00 2001
From: Alex Deucher <alexdeucher@gmail.com>
Date: Tue, 16 Feb 2010 11:44:21 -0500
Patch-mainline: 2.6.34
References: fate#310916
Git-commit: 8e0d84a63af351f5367103b83478f2cd4d9a3727
Subject: [PATCH 0430/2588] drm/radeon/kms: add LVDS pll quirk for Dell Studio
 15

fixes fdo bug 26358

Signed-off-by: Alex Deucher <alexdeucher@gmail.com>
Signed-off-by: Dave Airlie <airlied@redhat.com>
(cherry picked from commit 8e0d84a63af351f5367103b83478f2cd4d9a3727)

Signed-off-by: Takashi Iwai <tiwai@suse.de>
---
 drivers/gpu/drm/radeon/radeon_atombios.c |    9 +++++++++
 1 files changed, 9 insertions(+), 0 deletions(-)

diff --git a/drivers/gpu/drm/radeon/radeon_atombios.c b/drivers/gpu/drm/radeon/radeon_atombios.c
index ea30777..7f4362d 100644
--- a/drivers/gpu/drm/radeon/radeon_atombios.c
+++ b/drivers/gpu/drm/radeon/radeon_atombios.c
@@ -1143,6 +1143,15 @@ static void radeon_atom_apply_lvds_quirks(struct drm_device *dev,
 			lvds->pll_algo = PLL_ALGO_LEGACY;
 	}
 
+	/* Dell Studio 15 laptop panel doesn't like new pll divider algo */
+	if ((dev->pdev->device == 0x95c4) &&
+	    (dev->pdev->subsystem_vendor == 0x1028) &&
+	    (dev->pdev->subsystem_device == 0x029f)) {
+		if ((lvds->native_mode.hdisplay == 1280) &&
+		    (lvds->native_mode.vdisplay == 800))
+			lvds->pll_algo = PLL_ALGO_LEGACY;
+	}
+
 }
 
 union lvds_info {
-- 
1.7.6

