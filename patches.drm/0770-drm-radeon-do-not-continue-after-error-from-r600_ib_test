From 3fe89a0c799c62de68e9e6d6e33899cd7e0da901 Mon Sep 17 00:00:00 2001
From: Matthijs Kooijman <matthijs@stdin.nl>
Date: Thu, 2 Feb 2012 21:23:11 +0100
Subject: drm/radeon: do not continue after error from r600_ib_test
Git-commit: 3fe89a0c799c62de68e9e6d6e33899cd7e0da901
Patch-mainline: v3.3-rc4

This return statement got dropped while fixing the conflicts introduced
in 7a7e8734ac3.

Reviewed-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Dave Airlie <airlied@redhat.com>
Acked-by: Michal Srb <msrb@suse.com>
---
 drivers/gpu/drm/radeon/evergreen.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/radeon/evergreen.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/radeon/evergreen.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/radeon/evergreen.c
@@ -3286,6 +3286,7 @@ int evergreen_init(struct radeon_device
 	if (r) {
 		dev_err(rdev->dev, "IB initialization failed (%d).\n", r);
 		rdev->accel_working = false;
+		return r;
 	}
 
 	r = evergreen_startup(rdev);
