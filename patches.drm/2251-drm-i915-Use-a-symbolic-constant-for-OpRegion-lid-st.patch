From 83260d37634d9eac30b3cc214ec6b6439c7f5d9c Mon Sep 17 00:00:00 2001
From: Chris Wilson <chris@chris-wilson.co.uk>
Date: Thu, 24 Feb 2011 18:13:42 +0000
Patch-mainline: 2.6.39
References: fate#310916
Git-commit: 82d3c90cc8e3ca8a7b7fe67a292e30603c24e3d9
Subject: [PATCH 2251/2588] drm/i915: Use a symbolic constant for OpRegion lid
 state

Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
(cherry picked from commit 82d3c90cc8e3ca8a7b7fe67a292e30603c24e3d9)

Signed-off-by: Takashi Iwai <tiwai@suse.de>
---
 drivers/gpu/drm/i915/intel_opregion.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

diff --git a/drivers/gpu/drm/i915/intel_opregion.c b/drivers/gpu/drm/i915/intel_opregion.c
index 9efccb9..d2c7104 100644
--- a/drivers/gpu/drm/i915/intel_opregion.c
+++ b/drivers/gpu/drm/i915/intel_opregion.c
@@ -39,6 +39,8 @@
 
 #define OPREGION_HEADER_OFFSET 0
 #define OPREGION_ACPI_OFFSET   0x100
+#define   ACPI_CLID 0x01ac /* current lid state indicator */
+#define   ACPI_CDCK 0x01b0 /* current docking state indicator */
 #define OPREGION_SWSCI_OFFSET  0x200
 #define OPREGION_ASLE_OFFSET   0x300
 #define OPREGION_VBT_OFFSET    0x400
@@ -489,7 +491,7 @@ int intel_opregion_setup(struct drm_device *dev)
 	opregion->header = base;
 	opregion->vbt = base + OPREGION_VBT_OFFSET;
 
-	opregion->lid_state = base + 0x01ac;
+	opregion->lid_state = base + ACPI_CLID;
 
 	mboxes = opregion->header->mboxes;
 	if (mboxes & MBOX_ACPI) {
-- 
1.7.6

