From 7ae8e240849b5721351f0262ddca3d9b75f41d18 Mon Sep 17 00:00:00 2001
From: Chris Wilson <chris@chris-wilson.co.uk>
Date: Fri, 11 Feb 2011 20:31:19 +0000
Patch-mainline: 2.6.39
References: fate#310916
Git-commit: bed636abeaa3d8e8279e95380cb10ecb20d1b276
Subject: [PATCH 2240/2588] drm/i915: i915_mutex_interruptible() returns
 -EINTR

... so we handle that for i915_gem_fault() in the same manner as
ERESTARTSYS, or we send a SIGBUS to the faulting application.

Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
(cherry picked from commit bed636abeaa3d8e8279e95380cb10ecb20d1b276)

Signed-off-by: Takashi Iwai <tiwai@suse.de>
---
 drivers/gpu/drm/i915/i915_gem.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/drivers/gpu/drm/i915/i915_gem.c b/drivers/gpu/drm/i915/i915_gem.c
index 62cbddc..c7c7c9e 100644
--- a/drivers/gpu/drm/i915/i915_gem.c
+++ b/drivers/gpu/drm/i915/i915_gem.c
@@ -1259,6 +1259,7 @@ out:
 		set_need_resched();
 	case 0:
 	case -ERESTARTSYS:
+	case -EINTR:
 		return VM_FAULT_NOPAGE;
 	case -ENOMEM:
 		return VM_FAULT_OOM;
-- 
1.7.6

