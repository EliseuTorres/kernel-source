From 612a9aab56a93533e76e3ad91642db7033e03b69 Mon Sep 17 00:00:00 2001
From: Linus Torvalds <torvalds@linux-foundation.org>
Date: Wed, 3 Oct 2012 23:29:23 -0700
Subject: Merge branch 'drm-next' of git://people.freedesktop.org/~airlied/linux
Git-commit: 612a9aab56a93533e76e3ad91642db7033e03b69
Patch-mainline: v3.7-rc1

Pull drm merge (part 1) from Dave Airlie:
 "So first of all my tree and uapi stuff has a conflict mess, its my
  fault as the nouveau stuff didn't hit -next as were trying to rebase
  regressions out of it before we merged.

  Highlights:
   - SH mobile modesetting driver and associated helpers
   - some DRM core documentation
   - i915 modesetting rework, haswell hdmi, haswell and vlv fixes, write
     combined pte writing, ilk rc6 support,
   - nouveau: major driver rework into a hw core driver, makes features
     like SLI a lot saner to implement,
   - psb: add eDP/DP support for Cedarview
   - radeon: 2 layer page tables, async VM pte updates, better PLL
     selection for > 2 screens, better ACPI interactions

  The rest is general grab bag of fixes.

  So why part 1? well I have the exynos pull req which came in a bit
  late but was waiting for me to do something they shouldn't have and it
  looks fairly safe, and David Howells has some more header cleanups
  he'd like me to pull, that seem like a good idea, but I'd like to get
  this merge out of the way so -next dosen't get blocked."

Tons of conflicts mostly due to silly include line changes, but mostly
mindless.  A few other small semantic conflicts too, noted from Dave's
pre-merged branch.

* 'drm-next' of git://people.freedesktop.org/~airlied/linux: (447 commits)
  drm/nv98/crypt: fix fuc build with latest envyas
  drm/nouveau/devinit: fixup various issues with subdev ctor/init ordering
  drm/nv41/vm: fix and enable use of "real" pciegart
  drm/nv44/vm: fix and enable use of "real" pciegart
  drm/nv04/dmaobj: fixup vm target handling in preparation for nv4x pcie
  drm/nouveau: store supported dma mask in vmmgr
  drm/nvc0/ibus: initial implementation of subdev
  drm/nouveau/therm: add support for fan-control modes
  drm/nouveau/hwmon: rename pwm0* to pmw1* to follow hwmon's rules
  drm/nouveau/therm: calculate the pwm divisor on nv50+
  drm/nouveau/fan: rewrite the fan tachometer driver to get more precision, faster
  drm/nouveau/therm: move thermal-related functions to the therm subdev
  drm/nouveau/bios: parse the pwm divisor from the perf table
  drm/nouveau/therm: use the EXTDEV table to detect i2c monitoring devices
  drm/nouveau/therm: rework thermal table parsing
  drm/nouveau/gpio: expose the PWM/TOGGLE parameter found in the gpio vbios table
  drm/nouveau: fix pm initialization order
  drm/nouveau/bios: check that fixed tvdac gpio data is valid before using it
  drm/nouveau: log channel debug/error messages from client object rather than drm client
  drm/nouveau: have drm debugging macros build on top of core macros
  ...

Acked-by: Michal Srb <msrb@suse.com>
---
 drivers/gpu/drm/gma500/psb_drv.h            |    2 
 drivers/gpu/drm/i915/intel_dp.c             |    2 
 drivers/gpu/drm/i915/intel_drv.h            |    1 
 drivers/gpu/drm/nouveau/nouveau_acpi.c      |   12 
 drivers/gpu/drm/nouveau/nouveau_bios.c      | 3725 ----------------------------
 drivers/gpu/drm/nouveau/nouveau_calc.c      |    4 
 drivers/gpu/drm/nouveau/nouveau_connector.c |   25 
 drivers/gpu/drm/nouveau/nouveau_connector.h |    3 
 drivers/gpu/drm/nouveau/nouveau_display.c   |    3 
 drivers/gpu/drm/nouveau/nouveau_dp.c        |    4 
 drivers/gpu/drm/nouveau/nouveau_encoder.h   |    4 
 drivers/gpu/drm/nouveau/nouveau_fbcon.c     |   21 
 drivers/gpu/drm/nouveau/nouveau_fbcon.h     |    3 
 drivers/gpu/drm/nouveau/nouveau_gem.c       |   11 
 drivers/gpu/drm/nouveau/nouveau_hdmi.c      |    2 
 drivers/gpu/drm/nouveau/nouveau_hw.c        |    6 
 drivers/gpu/drm/nouveau/nouveau_hw.h        |    4 
 drivers/gpu/drm/nouveau/nouveau_ioc32.c     |    2 
 drivers/gpu/drm/nouveau/nouveau_perf.c      |    3 
 drivers/gpu/drm/nouveau/nouveau_pm.c        |   70 
 drivers/gpu/drm/nouveau/nouveau_prime.c     |    9 
 drivers/gpu/drm/nouveau/nouveau_volt.c      |    8 
 drivers/gpu/drm/nouveau/nv04_crtc.c         |    5 
 drivers/gpu/drm/nouveau/nv04_cursor.c       |    3 
 drivers/gpu/drm/nouveau/nv04_dac.c          |    2 
 drivers/gpu/drm/nouveau/nv04_dfp.c          |    5 
 drivers/gpu/drm/nouveau/nv04_display.c      |    4 
 drivers/gpu/drm/nouveau/nv04_pm.c           |    3 
 drivers/gpu/drm/nouveau/nv04_tv.c           |    5 
 drivers/gpu/drm/nouveau/nv17_tv.c           |    3 
 drivers/gpu/drm/nouveau/nv17_tv_modes.c     |    2 
 drivers/gpu/drm/nouveau/nv40_pm.c           |    2 
 drivers/gpu/drm/nouveau/nv50_crtc.c         |    5 
 drivers/gpu/drm/nouveau/nv50_cursor.c       |    5 
 drivers/gpu/drm/nouveau/nv50_display.c      |    8 
 drivers/gpu/drm/nouveau/nv50_evo.c          |   22 
 drivers/gpu/drm/nouveau/nv50_pm.c           |    2 
 drivers/gpu/drm/nouveau/nva3_pm.c           |    2 
 drivers/gpu/drm/nouveau/nvd0_display.c      |    4 
 drivers/gpu/drm/radeon/atombios_encoders.c  |    1 
 drivers/gpu/drm/radeon/radeon_acpi.c        |    4 
 drivers/gpu/drm/udl/udl_fb.c                |    1 
 42 files changed, 188 insertions(+), 3824 deletions(-)

Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/i915/intel_dp.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/i915/intel_dp.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/i915/intel_dp.c
@@ -34,7 +34,6 @@
 #include "intel_drv.h"
 #include <drm/i915_drm.h>
 #include "i915_drv.h"
-#include <drm/drm_dp_helper.h>
 
 #define DP_RECEIVER_CAP_SIZE	0xf
 #define DP_LINK_STATUS_SIZE	6
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/i915/intel_drv.h
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/i915/intel_drv.h
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/i915/intel_drv.h
@@ -31,6 +31,7 @@
 #include <drm/drm_crtc.h>
 #include <drm/drm_crtc_helper.h>
 #include <drm/drm_fb_helper.h>
+#include <drm/drm_dp_helper.h>
 
 #define _wait_for(COND, MS, W) ({ \
 	unsigned long timeout__ = jiffies + msecs_to_jiffies(MS);	\
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nouveau_acpi.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/nouveau/nouveau_acpi.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nouveau_acpi.c
@@ -9,7 +9,7 @@
 
 #include <linux/vga_switcheroo.h>
 
-#include "drm_edid.h"
+#include <drm/drm_edid.h>
 
 #include "nouveau_drm.h"
 #include "nouveau_acpi.h"
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nouveau_bios.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/nouveau/nouveau_bios.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nouveau_bios.c
@@ -24,10 +24,10 @@
 
 #include <subdev/bios.h>
 
-#include "drmP.h"
+#include <drm/drmP.h>
+
 #include "nouveau_drm.h"
 #include "nouveau_reg.h"
-#include "nouveau_drv.h"
 #include "nouveau_hw.h"
 #include "nouveau_encoder.h"
 
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nouveau_display.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/nouveau/nouveau_display.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nouveau_display.c
@@ -24,8 +24,8 @@
  *
  */
 
-#include "drmP.h"
-#include "drm_crtc_helper.h"
+#include <drm/drmP.h>
+#include <drm/drm_crtc_helper.h>
 
 #include "nouveau_fbcon.h"
 #include "nouveau_hw.h"
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nouveau_dp.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/nouveau/nouveau_dp.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nouveau_dp.c
@@ -23,7 +23,7 @@
  */
 
 #include <drm/drmP.h>
-#include "drm_dp_helper.h"
+#include <drm/drm_dp_helper.h>
 
 #include "nouveau_drm.h"
 #include "nouveau_connector.h"
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nouveau_gem.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/nouveau/nouveau_gem.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nouveau_gem.c
@@ -24,7 +24,6 @@
  *
  */
 #include <linux/dma-buf.h>
-#include <nouveau_drm.h>
 
 #include <subdev/fb.h>
 
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nouveau_hw.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/nouveau/nouveau_hw.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nouveau_hw.c
@@ -22,7 +22,7 @@
  * SOFTWARE.
  */
 
-#include "drmP.h"
+#include <drm/drmP.h>
 #include "nouveau_drm.h"
 #include "nouveau_hw.h"
 
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nouveau_hw.h
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/nouveau/nouveau_hw.h
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nouveau_hw.h
@@ -23,7 +23,7 @@
 #ifndef __NOUVEAU_HW_H__
 #define __NOUVEAU_HW_H__
 
-#include "drmP.h"
+#include <drm/drmP.h>
 #include "nv04_display.h"
 
 #include <subdev/bios/pll.h>
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nouveau_pm.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/nouveau/nouveau_pm.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nouveau_pm.c
@@ -29,7 +29,7 @@
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
 
-#include "drmP.h"
+#include <drm/drmP.h>
 
 #include "nouveau_drm.h"
 #include "nouveau_pm.h"
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nouveau_prime.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/nouveau/nouveau_prime.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nouveau_prime.c
@@ -24,8 +24,7 @@
 
 #include <linux/dma-buf.h>
 
-#include "drmP.h"
-#include "drm.h"
+#include <drm/drmP.h>
 
 #include "nouveau_drm.h"
 #include "nouveau_gem.h"
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nv04_cursor.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/nouveau/nv04_cursor.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nv04_cursor.c
@@ -1,5 +1,5 @@
-#include "drmP.h"
-#include "drm_mode.h"
+#include <drm/drmP.h>
+#include <drm/drm_mode.h>
 #include "nouveau_drm.h"
 #include "nouveau_reg.h"
 #include "nouveau_crtc.h"
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nv04_pm.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/nouveau/nv04_pm.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nv04_pm.c
@@ -22,7 +22,7 @@
  * Authors: Ben Skeggs
  */
 
-#include "drmP.h"
+#include <drm/drmP.h>
 #include "nouveau_drm.h"
 #include "nouveau_reg.h"
 #include "nouveau_hw.h"
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nv04_tv.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/nouveau/nv04_tv.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nv04_tv.c
@@ -24,7 +24,7 @@
  *
  */
 
-#include "drmP.h"
+#include <drm/drmP.h>
 #include "nouveau_drm.h"
 #include "nouveau_reg.h"
 #include "nouveau_encoder.h"
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nv17_tv.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/nouveau/nv17_tv.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nv17_tv.c
@@ -24,8 +24,8 @@
  *
  */
 
-#include "drmP.h"
-#include "drm_crtc_helper.h"
+#include <drm/drmP.h>
+#include <drm/drm_crtc_helper.h>
 #include "nouveau_drm.h"
 #include "nouveau_reg.h"
 #include "nouveau_encoder.h"
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nv17_tv_modes.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/nouveau/nv17_tv_modes.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nv17_tv_modes.c
@@ -24,8 +24,8 @@
  *
  */
 
-#include "drmP.h"
-#include "drm_crtc_helper.h"
+#include <drm/drmP.h>
+#include <drm/drm_crtc_helper.h>
 #include "nouveau_drm.h"
 #include "nouveau_encoder.h"
 #include "nouveau_crtc.h"
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nv40_pm.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/nouveau/nv40_pm.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nv40_pm.c
@@ -22,7 +22,7 @@
  * Authors: Ben Skeggs
  */
 
-#include "drmP.h"
+#include <drm/drmP.h>
 #include "nouveau_drm.h"
 #include "nouveau_bios.h"
 #include "nouveau_pm.h"
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nv50_pm.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/nouveau/nv50_pm.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nv50_pm.c
@@ -22,7 +22,7 @@
  * Authors: Ben Skeggs
  */
 
-#include "drmP.h"
+#include <drm/drmP.h>
 #include "nouveau_drm.h"
 #include "nouveau_bios.h"
 #include "nouveau_hw.h"
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nva3_pm.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/nouveau/nva3_pm.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nva3_pm.c
@@ -22,7 +22,7 @@
  * Authors: Ben Skeggs
  */
 
-#include "drmP.h"
+#include <drm/drmP.h>
 #include "nouveau_drm.h"
 #include "nouveau_bios.h"
 #include "nouveau_pm.h"
