From fbe6cc22c8575d4d74acf029e20894e71160947d Mon Sep 17 00:00:00 2001
From: Chris Wilson <chris@chris-wilson.co.uk>
Date: Wed, 8 Sep 2010 21:07:28 +0100
Patch-mainline: 2.6.37
References: fate#310916
Git-commit: 1af5fa1b7e5ff8332f8a2ee3c5fb44d93b34868d
Subject: [PATCH 1370/2588] drm/i915/dp: Flush the PLL register write before
 sleeping

Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
(cherry picked from commit 1af5fa1b7e5ff8332f8a2ee3c5fb44d93b34868d)

Signed-off-by: Takashi Iwai <tiwai@suse.de>
---
 drivers/gpu/drm/i915/intel_dp.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/drivers/gpu/drm/i915/intel_dp.c b/drivers/gpu/drm/i915/intel_dp.c
index 3609c32..0e76731 100644
--- a/drivers/gpu/drm/i915/intel_dp.c
+++ b/drivers/gpu/drm/i915/intel_dp.c
@@ -883,6 +883,7 @@ static void ironlake_edp_pll_off(struct drm_encoder *encoder)
 	dpa_ctl = I915_READ(DP_A);
 	dpa_ctl |= DP_PLL_ENABLE;
 	I915_WRITE(DP_A, dpa_ctl);
+	POSTING_READ(DP_A);
 	udelay(200);
 }
 
-- 
1.7.6

