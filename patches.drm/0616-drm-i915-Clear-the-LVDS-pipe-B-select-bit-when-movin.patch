From f92fd632a5d167d332a3efc32e7c10f1cddbc7d9 Mon Sep 17 00:00:00 2001
From: Eric Anholt <eric@anholt.net>
Date: Fri, 9 Apr 2010 14:18:55 -0700
Patch-mainline: 2.6.35
References: fate#310916
Git-commit: d275f6614e160fa71d6e2201eb34c9b41fd8473c
Subject: [PATCH 0616/2588] drm/i915: Clear the LVDS pipe B select bit when
 moving the LVDS to pipe A.

Based on a patch by Zhao Yakui.

Signed-off-by: Eric Anholt <eric@anholt.net>
(cherry picked from commit d275f6614e160fa71d6e2201eb34c9b41fd8473c)

Signed-off-by: Takashi Iwai <tiwai@suse.de>
---
 drivers/gpu/drm/i915/intel_display.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/drivers/gpu/drm/i915/intel_display.c b/drivers/gpu/drm/i915/intel_display.c
index efd54a6..508935d 100644
--- a/drivers/gpu/drm/i915/intel_display.c
+++ b/drivers/gpu/drm/i915/intel_display.c
@@ -3313,6 +3313,8 @@ static int intel_crtc_mode_set(struct drm_crtc *crtc,
 		lvds |= LVDS_PORT_EN | LVDS_A0A2_CLKA_POWER_UP;
 		if (pipe == 1)
 			lvds |= LVDS_PIPEB_SELECT;
+		else
+			lvds &= ~LVDS_PIPEB_SELECT;
 		/* set the corresponsding LVDS_BORDER bit */
 		lvds |= dev_priv->lvds_border_bits;
 		/* Set the B0-B3 data pairs corresponding to whether we're going to
-- 
1.7.6

