From 02809179bb10f73be38cb2d221f3cc9b871daaa5 Mon Sep 17 00:00:00 2001
From: Jim Cromie <jim.cromie@gmail.com>
Date: Fri, 20 Apr 2012 13:12:16 +0100
Subject: drm: replace open-coded ARRAY_SIZE with macro
Git-commit: 02809179bb10f73be38cb2d221f3cc9b871daaa5
Patch-mainline: v3.6-rc1

[airlied: fixed one more new one added since]

Signed-off-by: Jim Cromie <jim.cromie@gmail.com>
Signed-off-by: Dave Airlie <airlied@redhat.com>
Acked-by: Michal Srb <msrb@suse.com>
---
 drivers/gpu/drm/drm_edid_modes.h |    7 +++----
 1 files changed, 3 insertions(+), 4 deletions(-)

Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/drm_edid_modes.h
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/drm_edid_modes.h
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/drm_edid_modes.h
@@ -355,8 +355,7 @@ static const struct drm_display_mode drm
 		   DRM_MODE_FLAG_PHSYNC | DRM_MODE_FLAG_NVSYNC) },
 
 };
-static const int drm_num_dmt_modes =
-	sizeof(drm_dmt_modes) / sizeof(struct drm_display_mode);
+static const int drm_num_dmt_modes = ARRAY_SIZE(drm_dmt_modes);
 
 static const struct drm_display_mode edid_est_modes[] = {
 	{ DRM_MODE("800x600", DRM_MODE_TYPE_DRIVER, 40000, 800, 840,
@@ -471,7 +470,7 @@ static const struct minimode est3_modes[
 	{ 1920, 1440, 60, 0 },
 	{ 1920, 1440, 75, 0 },
 };
-static const int num_est3_modes = sizeof(est3_modes) / sizeof(est3_modes[0]);
+static const int num_est3_modes = ARRAY_SIZE(est3_modes);
 
 /*
  * Probably taken from CEA-861 spec.
@@ -760,8 +759,7 @@ static const struct drm_display_mode edi
 		   2492, 2640, 0, 1080, 1084, 1094, 1125, 0,
 		   DRM_MODE_FLAG_PHSYNC | DRM_MODE_FLAG_PVSYNC) },
 };
-static const int drm_num_cea_modes =
-	sizeof (edid_cea_modes) / sizeof (edid_cea_modes[0]);
+static const int drm_num_cea_modes = ARRAY_SIZE(edid_cea_modes);
 
 static const struct minimode extra_modes[] = {
 	{ 1024, 576,  60, 0 },
@@ -772,4 +770,4 @@ static const struct minimode extra_modes
 	{ 2048, 1152, 60, 0 },
 	{ 2048, 1536, 60, 0 },
 };
-static const int num_extra_modes = sizeof(extra_modes) / sizeof(extra_modes[0]);
+static const int num_extra_modes = ARRAY_SIZE(extra_modes);
