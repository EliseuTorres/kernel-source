From ae8d32631ad05bd96bad2efa8114e14083c66a78 Mon Sep 17 00:00:00 2001
From: Chris Wilson <chris@chris-wilson.co.uk>
Date: Mon, 6 Sep 2010 16:17:22 +0100
Patch-mainline: 2.6.36
References: fate#310916
Git-commit: 032d2a0d068b0368296a56469761394ef03207c3
Subject: [PATCH 1184/2588] drm/i915: Prevent double dpms on

Arguably this is a bug in drm-core in that we should not be called twice
in succession with DPMS_ON, however this is still occuring and we see
FDI link training failures on the second call leading to the occassional
blank display. For the time being ignore the repeated call.

Original patch by Dave Airlie <airlied@redhat.com>
Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
Cc: stable@kernel.org
(cherry picked from commit 032d2a0d068b0368296a56469761394ef03207c3)

Signed-off-by: Takashi Iwai <tiwai@suse.de>
---
 drivers/gpu/drm/i915/intel_display.c |    2 --
 1 files changed, 0 insertions(+), 2 deletions(-)

diff --git a/drivers/gpu/drm/i915/intel_display.c b/drivers/gpu/drm/i915/intel_display.c
index 3ac4eea..40cc5da 100644
--- a/drivers/gpu/drm/i915/intel_display.c
+++ b/drivers/gpu/drm/i915/intel_display.c
@@ -2373,8 +2373,6 @@ static void intel_crtc_dpms(struct drm_crtc *crtc, int mode)
 	if (intel_crtc->dpms_mode == mode)
 		return;
 
-	dev_priv->display.dpms(crtc, mode);
-
 	intel_crtc->dpms_mode = mode;
 	intel_crtc->cursor_on = mode == DRM_MODE_DPMS_ON;
 
-- 
1.7.6

