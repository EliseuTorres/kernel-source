From: Egbert Eich <Egbert Eich eich@suse.de>
Date: Thu May 2 11:54:42 2013 +0200
Subject: drm/mgag200: Simplify function mgag200_bo_unpin()
Patch-Mainline: to be upstreamed
Git-commit: afff14a31a821f2723ec9bf2557c62da1cb09278
Git-repo: git://people.freedesktop.org/~airlied/linux/
References: bnc #806990
Signed-off-by: Egbert Eich <eich@suse.com>

Signed-off-by: Egbert Eich <eich@suse.de>
---
 drivers/gpu/drm/mgag200/mgag200_ttm.c |    7 ++-----
 1 file changed, 2 insertions(+), 5 deletions(-)

--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/mgag200/mgag200_ttm.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/mgag200/mgag200_ttm.c
@@ -394,7 +394,7 @@ int mgag200_bo_pin(struct mgag200_bo *bo
 
 int mgag200_bo_unpin(struct mgag200_bo *bo)
 {
-	int i, ret;
+	int i;
 	if (!bo->pin_count) {
 		DRM_ERROR("unpin bad %p\n", bo);
 		return 0;
@@ -405,11 +405,8 @@ int mgag200_bo_unpin(struct mgag200_bo *
 
 	for (i = 0; i < bo->placement.num_placement ; i++)
 		bo->placements[i] &= ~TTM_PL_FLAG_NO_EVICT;
-	ret = ttm_bo_validate(&bo->bo, &bo->placement, false, false, false);
-	if (ret)
-		return ret;
 
-	return 0;
+	return ttm_bo_validate(&bo->bo, &bo->placement, false, false, false);
 }
 
 int mgag200_bo_push_sysram(struct mgag200_bo *bo)
