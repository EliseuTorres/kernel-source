From: Egbert Eich <Egbert Eich eich@suse.de>
Date: Thu May 2 11:11:23 2013 +0200
Subject: drm/mgag200: Free container instead of member in mga_user_framebuffer_destroy()
Patch-Mainline: to be upstreamed
Git-commit: 6c1d90fb0ed306a4f76869b607a225a6e1e147f7
Git-repo: git://people.freedesktop.org/~airlied/linux/
References: bnc #806990
Signed-off-by: Egbert Eich <eich@suse.com>

Technically freeing mga_fb->base is the same as freeing mga_fb as 'base'
the first member of the data structure.
Still this makes it cleaner.

Signed-off-by: Egbert Eich <eich@suse.de>
---
 drivers/gpu/drm/mgag200/mgag200_main.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/mgag200/mgag200_main.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/mgag200/mgag200_main.c
@@ -20,7 +20,7 @@ static void mga_user_framebuffer_destroy
 	if (mga_fb->obj)
 		drm_gem_object_unreference_unlocked(mga_fb->obj);
 	drm_framebuffer_cleanup(fb);
-	kfree(fb);
+	kfree(mga_fb);
 }
 
 static int mga_user_framebuffer_create_handle(struct drm_framebuffer *fb,
