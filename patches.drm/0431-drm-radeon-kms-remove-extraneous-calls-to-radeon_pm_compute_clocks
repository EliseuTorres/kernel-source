From 10b391b946c459a39b631aaf81880f94dcfbff46 Mon Sep 17 00:00:00 2001
From: Alex Deucher <alexander.deucher@amd.com>
Date: Fri, 4 Nov 2011 10:09:40 -0400
Subject: drm/radeon/kms: remove extraneous calls to radeon_pm_compute_clocks()
Git-commit: 10b391b946c459a39b631aaf81880f94dcfbff46
Patch-mainline: v3.2-rc2

It's already called via the DPMS functions.

Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Dave Airlie <airlied@redhat.com>
Acked-by: Michal Srb <msrb@suse.com>
---
 drivers/gpu/drm/radeon/atombios_crtc.c      |    6 ------
 drivers/gpu/drm/radeon/radeon_legacy_crtc.c |    6 ------
 2 files changed, 0 insertions(+), 12 deletions(-)

Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/radeon/atombios_crtc.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/radeon/atombios_crtc.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/radeon/atombios_crtc.c
@@ -1522,12 +1522,6 @@ static bool atombios_crtc_mode_fixup(str
 				     struct drm_display_mode *mode,
 				     struct drm_display_mode *adjusted_mode)
 {
-	struct drm_device *dev = crtc->dev;
-	struct radeon_device *rdev = dev->dev_private;
-
-	/* adjust pm to upcoming mode change */
-	radeon_pm_compute_clocks(rdev);
-
 	if (!radeon_crtc_scaling_mode_fixup(crtc, mode, adjusted_mode))
 		return false;
 	return true;
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/radeon/radeon_legacy_crtc.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/radeon/radeon_legacy_crtc.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/radeon/radeon_legacy_crtc.c
@@ -1002,12 +1002,6 @@ static bool radeon_crtc_mode_fixup(struc
 				   struct drm_display_mode *mode,
 				   struct drm_display_mode *adjusted_mode)
 {
-	struct drm_device *dev = crtc->dev;
-	struct radeon_device *rdev = dev->dev_private;
-
-	/* adjust pm to upcoming mode change */
-	radeon_pm_compute_clocks(rdev);
-
 	if (!radeon_crtc_scaling_mode_fixup(crtc, mode, adjusted_mode))
 		return false;
 	return true;
