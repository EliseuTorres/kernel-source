From 58a12e36ca585cce502f5300c2bbb5c34033da5b Mon Sep 17 00:00:00 2001
From: Jerome Glisse <jglisse@redhat.com>
Date: Wed, 9 Dec 2009 21:57:37 +0100
Patch-mainline: 2.6.33
References: fate#310916
Git-commit: eaa5fd1a66fefd7cc918d80250d66fa48b10b81f
Subject: [PATCH 0161/2588] drm/radeon/kms: actualy set the eviction
 placements we choose

Stupid bug, somehow copying the eviction placements into the
result structure was missing.

Signed-off-by: Jerome Glisse <jglisse@redhat.com>
Signed-off-by: Dave Airlie <airlied@linux.ie>
(cherry picked from commit eaa5fd1a66fefd7cc918d80250d66fa48b10b81f)

Signed-off-by: Takashi Iwai <tiwai@suse.de>
---
 drivers/gpu/drm/radeon/radeon_ttm.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/drivers/gpu/drm/radeon/radeon_ttm.c b/drivers/gpu/drm/radeon/radeon_ttm.c
index 446f5f3..5a19d52 100644
--- a/drivers/gpu/drm/radeon/radeon_ttm.c
+++ b/drivers/gpu/drm/radeon/radeon_ttm.c
@@ -209,6 +209,7 @@ static void radeon_evict_flags(struct ttm_buffer_object *bo,
 	default:
 		radeon_ttm_placement_from_domain(rbo, RADEON_GEM_DOMAIN_CPU);
 	}
+	*placement = rbo->placement;
 }
 
 static int radeon_verify_access(struct ttm_buffer_object *bo, struct file *filp)
-- 
1.7.6

