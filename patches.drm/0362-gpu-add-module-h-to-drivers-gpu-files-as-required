From e0cd3608135b2ed8eddbe3fdf048d22e0593d836 Mon Sep 17 00:00:00 2001
From: Paul Gortmaker <paul.gortmaker@windriver.com>
Date: Tue, 30 Aug 2011 11:04:30 -0400
Subject: gpu: add module.h to drivers/gpu files as required.
Git-commit: e0cd3608135b2ed8eddbe3fdf048d22e0593d836
Patch-mainline: v3.2-rc1

So that we don't get build failures once the implicit module.h
presence is removed.

Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
Acked-by: Michal Srb <msrb@suse.com>
---
 drivers/gpu/drm/drm_encoder_slave.c    |    2 ++
 drivers/gpu/drm/drm_fb_helper.c        |    1 +
 drivers/gpu/drm/drm_fops.c             |    1 +
 drivers/gpu/drm/i2c/ch7006_drv.c       |    2 ++
 drivers/gpu/drm/i2c/sil164_drv.c       |    2 ++
 drivers/gpu/drm/i810/i810_drv.c        |    2 ++
 drivers/gpu/drm/i915/i915_dma.c        |    1 +
 drivers/gpu/drm/i915/i915_drv.c        |    1 +
 drivers/gpu/drm/mga/mga_drv.c          |    2 ++
 drivers/gpu/drm/mga/mga_warp.c         |    1 +
 drivers/gpu/drm/nouveau/nouveau_drv.c  |    1 +
 drivers/gpu/drm/nouveau/nouveau_i2c.c  |    2 ++
 drivers/gpu/drm/nouveau/nouveau_temp.c |    2 ++
 drivers/gpu/drm/nouveau/nvc0_graph.c   |    1 +
 drivers/gpu/drm/r128/r128_cce.c        |    1 +
 drivers/gpu/drm/r128/r128_drv.c        |    2 ++
 drivers/gpu/drm/radeon/ni.c            |    1 +
 drivers/gpu/drm/radeon/r100.c          |    1 +
 drivers/gpu/drm/radeon/r600.c          |    1 +
 drivers/gpu/drm/radeon/r600_cp.c       |    2 ++
 drivers/gpu/drm/radeon/radeon_cp.c     |    2 ++
 drivers/gpu/drm/radeon/radeon_drv.c    |    1 +
 drivers/gpu/drm/savage/savage_drv.c    |    2 ++
 drivers/gpu/drm/sis/sis_drv.c          |    2 ++
 drivers/gpu/drm/tdfx/tdfx_drv.c        |    2 ++
 drivers/gpu/drm/via/via_drv.c          |    2 ++
 drivers/gpu/drm/vmwgfx/vmwgfx_drv.c    |    1 +
 27 files changed, 41 insertions(+), 0 deletions(-)

Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/drm_encoder_slave.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/drm_encoder_slave.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/drm_encoder_slave.c
@@ -24,6 +24,8 @@
  *
  */
 
+#include <linux/module.h>
+
 #include "drm_encoder_slave.h"
 
 /**
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/drm_fb_helper.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/drm_fb_helper.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/drm_fb_helper.c
@@ -31,6 +31,7 @@
 #include <linux/sysrq.h>
 #include <linux/slab.h>
 #include <linux/fb.h>
+#include <linux/module.h>
 #include "drmP.h"
 #include "drm_crtc.h"
 #include "drm_fb_helper.h"
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/drm_fops.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/drm_fops.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/drm_fops.c
@@ -37,6 +37,7 @@
 #include "drmP.h"
 #include <linux/poll.h>
 #include <linux/slab.h>
+#include <linux/module.h>
 
 /* from BKL pushdown: note that nothing else serializes idr_find() */
 DEFINE_MUTEX(drm_global_mutex);
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/i2c/ch7006_drv.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/i2c/ch7006_drv.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/i2c/ch7006_drv.c
@@ -24,6 +24,8 @@
  *
  */
 
+#include <linux/module.h>
+
 #include "ch7006_priv.h"
 
 /* DRM encoder functions */
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/i2c/sil164_drv.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/i2c/sil164_drv.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/i2c/sil164_drv.c
@@ -24,6 +24,8 @@
  *
  */
 
+#include <linux/module.h>
+
 #include "drmP.h"
 #include "drm_crtc_helper.h"
 #include "drm_encoder_slave.h"
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/i810/i810_drv.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/i810/i810_drv.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/i810/i810_drv.c
@@ -30,6 +30,8 @@
  *    Gareth Hughes <gareth@valinux.com>
  */
 
+#include <linux/module.h>
+
 #include "drmP.h"
 #include "drm.h"
 #include "i810_drm.h"
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/i915/i915_dma.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/i915/i915_dma.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/i915/i915_dma.c
@@ -41,6 +41,7 @@
 #include <linux/pnp.h>
 #include <linux/vga_switcheroo.h>
 #include <linux/slab.h>
+#include <linux/module.h>
 #include <acpi/video.h>
 
 static void i915_write_hws_pga(struct drm_device *dev)
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/i915/i915_drv.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/i915/i915_drv.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/i915/i915_drv.c
@@ -35,6 +35,7 @@
 #include "intel_drv.h"
 
 #include <linux/console.h>
+#include <linux/module.h>
 #include "drm_crtc_helper.h"
 
 static int i915_modeset __read_mostly = -1;
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/mga/mga_drv.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/mga/mga_drv.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/mga/mga_drv.c
@@ -29,6 +29,8 @@
  *    Gareth Hughes <gareth@valinux.com>
  */
 
+#include <linux/module.h>
+
 #include "drmP.h"
 #include "drm.h"
 #include "mga_drm.h"
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/mga/mga_warp.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/mga/mga_warp.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/mga/mga_warp.c
@@ -30,6 +30,7 @@
 #include <linux/firmware.h>
 #include <linux/ihex.h>
 #include <linux/platform_device.h>
+#include <linux/module.h>
 
 #include "drmP.h"
 #include "drm.h"
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nouveau_drv.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/nouveau/nouveau_drv.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nouveau_drv.c
@@ -23,6 +23,7 @@
  */
 
 #include <linux/console.h>
+#include <linux/module.h>
 
 #include "drmP.h"
 #include "drm.h"
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nouveau_i2c.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/nouveau/nouveau_i2c.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nouveau_i2c.c
@@ -22,6 +22,8 @@
  * Authors: Ben Skeggs
  */
 
+#include <linux/module.h>
+
 #include "drmP.h"
 #include "nouveau_drv.h"
 #include "nouveau_i2c.h"
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nouveau_temp.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/nouveau/nouveau_temp.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nouveau_temp.c
@@ -22,6 +22,8 @@
  * Authors: Martin Peres
  */
 
+#include <linux/module.h>
+
 #include "drmP.h"
 
 #include "nouveau_drv.h"
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nvc0_graph.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/nouveau/nvc0_graph.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/nouveau/nvc0_graph.c
@@ -23,6 +23,7 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/module.h>
 
 #include "drmP.h"
 
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/r128/r128_cce.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/r128/r128_cce.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/r128/r128_cce.c
@@ -32,6 +32,7 @@
 #include <linux/firmware.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/module.h>
 
 #include "drmP.h"
 #include "drm.h"
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/r128/r128_drv.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/r128/r128_drv.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/r128/r128_drv.c
@@ -29,6 +29,8 @@
  *    Gareth Hughes <gareth@valinux.com>
  */
 
+#include <linux/module.h>
+
 #include "drmP.h"
 #include "drm.h"
 #include "r128_drm.h"
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/radeon/ni.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/radeon/ni.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/radeon/ni.c
@@ -24,6 +24,7 @@
 #include <linux/firmware.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/module.h>
 #include "drmP.h"
 #include "radeon.h"
 #include "radeon_asic.h"
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/radeon/r100.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/radeon/r100.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/radeon/r100.c
@@ -41,6 +41,7 @@
 
 #include <linux/firmware.h>
 #include <linux/platform_device.h>
+#include <linux/module.h>
 
 #include "r100_reg_safe.h"
 #include "rn50_reg_safe.h"
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/radeon/r600.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/radeon/r600.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/radeon/r600.c
@@ -29,6 +29,7 @@
 #include <linux/seq_file.h>
 #include <linux/firmware.h>
 #include <linux/platform_device.h>
+#include <linux/module.h>
 #include "drmP.h"
 #include "radeon_drm.h"
 #include "radeon.h"
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/radeon/r600_cp.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/radeon/r600_cp.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/radeon/r600_cp.c
@@ -26,6 +26,8 @@
  *     Alex Deucher <alexander.deucher@amd.com>
  */
 
+#include <linux/module.h>
+
 #include "drmP.h"
 #include "drm.h"
 #include "radeon_drm.h"
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/radeon/radeon_cp.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/radeon/radeon_cp.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/radeon/radeon_cp.c
@@ -29,6 +29,8 @@
  *    Gareth Hughes <gareth@valinux.com>
  */
 
+#include <linux/module.h>
+
 #include "drmP.h"
 #include "drm.h"
 #include "drm_sarea.h"
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/radeon/radeon_drv.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/radeon/radeon_drv.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/radeon/radeon_drv.c
@@ -36,6 +36,7 @@
 
 #include "drm_pciids.h"
 #include <linux/console.h>
+#include <linux/module.h>
 
 #ifdef CONFIG_X86
 #include <linux/dmi.h>
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/savage/savage_drv.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/savage/savage_drv.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/savage/savage_drv.c
@@ -23,6 +23,8 @@
  * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
  */
 
+#include <linux/module.h>
+
 #include "drmP.h"
 #include "savage_drm.h"
 #include "savage_drv.h"
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/sis/sis_drv.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/sis/sis_drv.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/sis/sis_drv.c
@@ -25,6 +25,8 @@
  *
  */
 
+#include <linux/module.h>
+
 #include "drmP.h"
 #include "sis_drm.h"
 #include "sis_drv.h"
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/tdfx/tdfx_drv.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/tdfx/tdfx_drv.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/tdfx/tdfx_drv.c
@@ -30,6 +30,8 @@
  *    Gareth Hughes <gareth@valinux.com>
  */
 
+#include <linux/module.h>
+
 #include "drmP.h"
 #include "tdfx_drv.h"
 
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/via/via_drv.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/via/via_drv.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/via/via_drv.c
@@ -22,6 +22,8 @@
  * DEALINGS IN THE SOFTWARE.
  */
 
+#include <linux/module.h>
+
 #include "drmP.h"
 #include "via_drm.h"
 #include "via_drv.h"
Index: linux-3.0-SLE11-SP3/drivers/gpu/drm/vmwgfx/vmwgfx_drv.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/vmwgfx/vmwgfx_drv.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/vmwgfx/vmwgfx_drv.c
@@ -24,6 +24,7 @@
  * USE OR OTHER DEALINGS IN THE SOFTWARE.
  *
  **************************************************************************/
+#include <linux/module.h>
 
 #include "drmP.h"
 #include "vmwgfx_drv.h"
