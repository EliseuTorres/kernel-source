From 05564509d444255b4cda459480df413141146561 Mon Sep 17 00:00:00 2001
From: Eric Anholt <eric@anholt.net>
Date: Fri, 8 Jan 2010 14:25:16 -0800
Patch-mainline: 2.6.34
References: fate#310916
Git-commit: b9201c14d9c22fb3b3f313f69ee4f967353ca960
Subject: [PATCH 0458/2588] drm/i915: Disable the hangcheck reset on
 Sandybridge until we add support.

Signed-off-by: Eric Anholt <eric@anholt.net>
(cherry picked from commit b9201c14d9c22fb3b3f313f69ee4f967353ca960)

Signed-off-by: Takashi Iwai <tiwai@suse.de>
---
 drivers/gpu/drm/i915/i915_irq.c |    6 +++++-
 1 files changed, 5 insertions(+), 1 deletions(-)

diff --git a/drivers/gpu/drm/i915/i915_irq.c b/drivers/gpu/drm/i915/i915_irq.c
index ef79d94..f93f822 100644
--- a/drivers/gpu/drm/i915/i915_irq.c
+++ b/drivers/gpu/drm/i915/i915_irq.c
@@ -1239,7 +1239,11 @@ void i915_hangcheck_elapsed(unsigned long data)
 	struct drm_device *dev = (struct drm_device *)data;
 	drm_i915_private_t *dev_priv = dev->dev_private;
 	uint32_t acthd;
-       
+
+	/* No reset support on this chip yet. */
+	if (IS_GEN6(dev))
+		return;
+
 	if (!IS_I965G(dev))
 		acthd = I915_READ(ACTHD);
 	else
-- 
1.7.6

