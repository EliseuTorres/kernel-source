From 76111ee62650666121b2e3eb761d50339d4c3a61 Mon Sep 17 00:00:00 2001
From: Chris Wilson <chris@chris-wilson.co.uk>
Date: Sun, 12 Sep 2010 13:07:25 +0100
Patch-mainline: 2.6.37
References: fate#310916
Git-commit: c9f9ccc150e119bab6a1003e7762b024623011d8
Subject: [PATCH 1394/2588] drm/i915/lvds: Remove busy wait for powering up
 the panel.

We just assume that it will happen in a timely manner. A variant of this
patch was first written and tested by Arjan van de Van.

Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
(cherry picked from commit c9f9ccc150e119bab6a1003e7762b024623011d8)

Signed-off-by: Takashi Iwai <tiwai@suse.de>
---
 drivers/gpu/drm/i915/intel_lvds.c |    6 +-----
 1 files changed, 1 insertions(+), 5 deletions(-)

diff --git a/drivers/gpu/drm/i915/intel_lvds.c b/drivers/gpu/drm/i915/intel_lvds.c
index f4a3569..f8884ab 100644
--- a/drivers/gpu/drm/i915/intel_lvds.c
+++ b/drivers/gpu/drm/i915/intel_lvds.c
@@ -84,17 +84,13 @@ static void intel_lvds_set_power(struct drm_device *dev, bool on)
 	if (on) {
 		I915_WRITE(lvds_reg, I915_READ(lvds_reg) | LVDS_PORT_EN);
 		I915_WRITE(ctl_reg, I915_READ(ctl_reg) | POWER_TARGET_ON);
-		if (wait_for(I915_READ(status_reg) & PP_ON, 1000))
-			DRM_ERROR("timed out waiting to enable LVDS pipe");
-
 		intel_panel_set_backlight(dev, dev_priv->backlight_level);
 	} else {
 		intel_panel_set_backlight(dev, 0);
-
 		I915_WRITE(ctl_reg, I915_READ(ctl_reg) & ~POWER_TARGET_ON);
 		I915_WRITE(lvds_reg, I915_READ(lvds_reg) & ~LVDS_PORT_EN);
-		POSTING_READ(lvds_reg);
 	}
+	POSTING_READ(lvds_reg);
 }
 
 static void intel_lvds_dpms(struct drm_encoder *encoder, int mode)
-- 
1.7.6

