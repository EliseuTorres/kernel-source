From: Aristeu Rozanski <aris@redhat.com>
Date: Mon, 2 Jun 2014 15:15:29 -0300
Subject: sb_edac: remove bogus assumption on mc ordering
Git-commit: adc61bcd91aa8364efaa496e7a4699950c362c21
Patch-mainline: v3.17-rc1
References: fate#318187

When a MC is handled, the correct sbridge_dev is searched based on the node,
checking again later with the assumption the first memory controller found is
the first socket's memory controller is a bogus assumption. Get rid of it.

Cc: Tony Luck <tony.luck@intel.com>
Signed-off-by: Aristeu Rozanski <aris@redhat.com>
Signed-off-by: Mauro Carvalho Chehab <m.chehab@samsung.com>
Acked-by: Borislav Petkov <bp@suse.de>
---
 drivers/edac/sb_edac.c | 4 ----
 1 file changed, 4 deletions(-)

Index: current/drivers/edac/sb_edac.c
===================================================================
--- current.orig/drivers/edac/sb_edac.c	2015-04-20 21:17:19.976121988 +0200
+++ current/drivers/edac/sb_edac.c	2015-04-20 21:17:53.312121929 +0200
@@ -1810,11 +1810,6 @@ static int sbridge_mce_check_error(struc
 			  "%u APIC %x\n", mce->cpuvendor, mce->cpuid,
 			  mce->time, mce->socketid, mce->apicid);
 
-
-	/* Only handle if it is the right mc controller */
-	if (cpu_data(mce->cpu).phys_proc_id != pvt->sbridge_dev->mc)
-		return NOTIFY_DONE;
-
 	smp_rmb();
 	if ((pvt->mce_out + 1) % MCE_LOG_LEN == pvt->mce_in) {
 		smp_wmb();
