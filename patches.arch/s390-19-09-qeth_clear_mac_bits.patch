From: Gerald Schaefer <geraldsc@de.ibm.com>
Subject: Clear mac_bits field when switching between Layer 2 and Layer 3
References: bnc#617464,LTC#66065
Patch-mainline: Yes

Symptom:     Ethernet interface not working after switching from Layer 3 to
             Layer 2
Problem:     Mac address not retrieved from card
Solution:    Clear mac_bits field, causes qeth to retrieve mac address

Acked-by: John Jolly <jjolly@suse.de>
---
 drivers/s390/net/qeth_core_sys.c |    1 +
 1 file changed, 1 insertion(+)

--- a/drivers/s390/net/qeth_core_sys.c
+++ b/drivers/s390/net/qeth_core_sys.c
@@ -430,6 +430,7 @@ static ssize_t qeth_dev_layer2_store(str
 	if (card->options.layer2 == newdis)
 		goto out;
 	else {
+		card->info.mac_bits  = 0;
 		if (card->discipline.ccwgdriver) {
 			card->discipline.ccwgdriver->remove(card->gdev);
 			qeth_core_free_discipline(card);
