From: Mike Travis <travis@sgi.com>
Subject: x86: Remove enabling x2apic message for every CPU
References: bnc#564618, FATE#306952
Patch-mainline: 2.6.33-rc1
Git-commit: 450b1e8dd10f41b5adad73f48ce8f6707d17c5c4

Print only once that the system is supporting x2apic mode.

Signed-off-by: Mike Travis <travis@sgi.com>
Acked-by: Cyrill Gorcunov <gorcunov@openvz.org>
LKML-Reference: <4B226E92.5080904@sgi.com>
Signed-off-by: H. Peter Anvin <hpa@zytor.com>
Signed-off-by: Rafael J. Wysocki <rjw@suse.de>
---
 arch/x86/kernel/apic/apic.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

Index: linux-2.6.32-master/arch/x86/kernel/apic/apic.c
===================================================================
--- linux-2.6.32-master.orig/arch/x86/kernel/apic/apic.c
+++ linux-2.6.32-master/arch/x86/kernel/apic/apic.c
@@ -1356,7 +1356,7 @@ void enable_x2apic(void)
 
 	rdmsr(MSR_IA32_APICBASE, msr, msr2);
 	if (!(msr & X2APIC_ENABLE)) {
-		pr_info("Enabling x2apic\n");
+		printk_once(KERN_INFO "Enabling x2apic\n");
 		wrmsr(MSR_IA32_APICBASE, msr | X2APIC_ENABLE, 0);
 	}
 }
