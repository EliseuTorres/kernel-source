From: Martin Schwidefsky <schwidefsky@de.ibm.com>
Subject: s390/hmcdrv: Restrict s390 HMC driver to S390 arch
Patch-mainline: v3.18-rc2
Git-commit: c9eeb7b813c9525cda34b61dcf4455c52fc58890
References: FATE#318066, LTC#KRN1015

Summary:     kernel: SE/HMC file access
Description: This feature provides a device driver that allows to access
             files residing on a HMC drive CD/DVD-ROM. It can be used in
             an LPAR or a z/VM environment.

Upstream-Description:

             s390/hmcdrv: Restrict s390 HMC driver to S390 arch

             This driver is only usable on 64-bit s390 machines.  Mark the Kconfig
             dependencies to that users on other architectures are not prompted for it.

             Fixes: 8f933b1043e1e5 ("s390/hmcdrv: HMC drive CD/DVD access")
             Signed-off-by: Josh Boyer <jwboyer@fedoraproject.org>
             Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>


Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
Acked-by: John Jolly <jjolly@suse.de>
---
 drivers/s390/char/Kconfig |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/drivers/s390/char/Kconfig
+++ b/drivers/s390/char/Kconfig
@@ -105,7 +105,7 @@ config SCLP_ASYNC
 config HMC_DRV
 	def_tristate m
 	prompt "Support for file transfers from HMC drive CD/DVD-ROM"
-	depends on 64BIT
+	depends on S390 && 64BIT
 	select CRC16
 	help
 	  This option enables support for file transfers from a Hardware
