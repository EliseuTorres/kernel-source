From 872c3de1e9caf861c0b56a4830a7b0ef12fb8f46 Mon Sep 17 00:00:00 2001
From: Christian Borntraeger <borntraeger@de.ibm.com>
Date: Thu, 17 Nov 2011 11:00:44 +0100
Subject: [PATCH 13/42] KVM: s390: announce SYNC_MMU
Git-commit: 872c3de1e9caf861c0b56a4830a7b0ef12fb8f46
References: FATE#314101,FATE#310914
Patch-mainline: Merged into kvm

KVM on s390 always had a sync mmu. Any mapping change in userspace
mapping was always reflected immediately in the guest mapping.
- In older code the guest mapping was just an offset
- In newer code the last level page table is shared

Signed-off-by: Christian Borntraeger <borntraeger@de.ibm.com>
Signed-off-by: Carsten Otte <cotte@de.ibm.com>
Signed-off-by: Avi Kivity <avi@redhat.com>
Signed-off-by: Alexander Graf <agraf@suse.de>

---
 arch/s390/kvm/kvm-s390.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/arch/s390/kvm/kvm-s390.c b/arch/s390/kvm/kvm-s390.c
index 90bab3f..e66f31a 100644
--- a/arch/s390/kvm/kvm-s390.c
+++ b/arch/s390/kvm/kvm-s390.c
@@ -126,6 +126,7 @@ int kvm_dev_ioctl_check_extension(long ext)
 
 	switch (ext) {
 	case KVM_CAP_S390_PSW:
+	case KVM_CAP_SYNC_MMU:
 		r = 1;
 		break;
 	default:
-- 
1.6.0.2

