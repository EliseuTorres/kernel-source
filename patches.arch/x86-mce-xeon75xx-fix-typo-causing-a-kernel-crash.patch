From foo@baz Wed May 19 17:07:06 PDT 2010
Date: Wed, 19 May 2010 17:07:06 -0700
From: Greg Kroah-Hartman <gregkh@suse.de>
Subject: x86: mce-xeon75xx: fix typo causing a kernel crash.
Patch-mainline: never
References: bnc#606778

It's CONFIG_MODULES, not CONFIG_MODULE.  Without this, nasty things
can happen to your kernel, as was found out the hard way by SGI.

Why this module isn't upstream is a mystery to me as well.

Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

---
 arch/x86/kernel/cpu/mcheck/mce-xeon75xx.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/arch/x86/kernel/cpu/mcheck/mce-xeon75xx.c
+++ b/arch/x86/kernel/cpu/mcheck/mce-xeon75xx.c
@@ -409,7 +409,7 @@ MODULE_LICENSE("GPL v2");
 MODULE_AUTHOR("Andi Kleen");
 MODULE_DESCRIPTION("Intel Xeon 75xx specific DIMM error reporting");
 
-#ifdef CONFIG_MODULE
+#ifdef CONFIG_MODULES
 static void __exit xeon75xx_mce_exit(void)
 {
 	mce_cpu_specific_poll = NULL;
