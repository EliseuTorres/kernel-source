From: Martin Schwidefsky <schwidefsky@de.ibm.com>
Subject: kernel: size detection of 3270 terminals fails
Patch-mainline: not yet
References: bnc#881529, LTC#112394

Description:  kernel: size detection of 3270 terminals fails
Symptom:      The terminal size of 3270 devices attached to a Linux system
              is incorrect.
Problem:      The init_data array with the read-partition command is
              clear by the reset device callback before the command
              could be started. The command fails and the fallback
              to the default size 80x24 is used.
Solution:     Do not clear the init_data array in the reset device callback.
Reproduction: Attach a 3270 terminal to a Linux system.

Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
Acked-by: Torsten Duwe <duwe@suse.de>
---
 drivers/s390/char/raw3270.c |    1 -
 1 file changed, 1 deletion(-)

--- a/drivers/s390/char/raw3270.c
+++ b/drivers/s390/char/raw3270.c
@@ -633,7 +633,6 @@ raw3270_reset_device_cb(struct raw3270_r
 	} else
 		raw3270_writesf_readpart(rp);
 	memset(&rp->init_reset, 0, sizeof(rp->init_reset));
-	memset(&rp->init_data, 0, sizeof(rp->init_data));
 }
 
 static int
