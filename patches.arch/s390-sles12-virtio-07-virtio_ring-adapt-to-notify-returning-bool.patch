From: David Hildenbrand <dahi@linux.vnet.ibm.com>
Subject: virtio_ring: adapt to notify() returning bool
Patch-mainline: v3.13-rc1
Git-commit: 2342d6a6512ce5a3d2433bf77e6580e738cfd709
References: bnc#931860, LTC#VS1256

Summary:     s390/virtio: Performance enhanced paravirtualized I/O drivers
Description: This feature enhances performance of the paravirtualized I/O
             drivers on s390 with focus on virtio and virtio-ccw.

Upstream-Description:

             virtio_ring: adapt to notify() returning bool

             Correct if statement to check for bool returned by notify()
             (introduced in 5b1bf7cb673a).

             Signed-off-by: Heinz Graalfs <graalfs@linux.vnet.ibm.com>
             Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>


Signed-off-by: David Hildenbrand <dahi@linux.vnet.ibm.com>
Acked-by: John Jolly <jjolly@suse.de>
---
 drivers/virtio/virtio_ring.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/drivers/virtio/virtio_ring.c
+++ b/drivers/virtio/virtio_ring.c
@@ -441,7 +441,7 @@ bool virtqueue_notify(struct virtqueue *
 		return false;
 
 	/* Prod other side to tell it about changes. */
-	if (vq->notify(_vq) < 0) {
+	if (!vq->notify(_vq)) {
 		vq->broken = true;
 		return false;
 	}
