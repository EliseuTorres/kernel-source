From: Gerald Schaefer <geraldsc@de.ibm.com>
Subject: vdso: glibc does not use vdso functions
References: bnc#583296
Patch-mainline: Upstream submission made

Symptom:     No performance gain on gettimofday and clock_gettime
Problem:     The glibc and the kernel disagree about the symbol version
             for the __kernel_gettimeofday, __kernel_clock_gettime and
             __kernel_clock_getres functions. The kernel provided vdso
             defines these symbols with version LINUX_2.6.26 but the
             glibc expects the symbols to have version LINUX_2.6.29.
Solution:    Since the vdso code went upstream with kernel version 2.6.29
             the correct symbol version is LINUX_2.6.29. Correct the
             symbol version in the kernel provided vdso object.

Acked-by: John Jolly <jjolly@suse.de>

--

 arch/s390/include/asm/vdso.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/arch/s390/include/asm/vdso.h
+++ b/arch/s390/include/asm/vdso.h
@@ -7,7 +7,7 @@
 #define VDSO32_LBASE	0
 #define VDSO64_LBASE	0
 
-#define VDSO_VERSION_STRING	LINUX_2.6.26
+#define VDSO_VERSION_STRING	LINUX_2.6.29
 
 #ifndef __ASSEMBLY__
 
