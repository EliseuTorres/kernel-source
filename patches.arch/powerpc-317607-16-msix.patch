Subject: [SCSI] ipr: Increase msi-x interrupt vectors to 16
From: wenxiong@linux.vnet.ibm.com <wenxiong@linux.vnet.ibm.com>
Git-commit: 6634ff7ca245bf2c0738cf21b545a35470ac7fe0
Patch-mainline: v3.13-rc4-49-g6634ff7
References: fate#317607

Signed-off-by: Wen Xiong <wenxiong@linux.vnet.ibm.com>
Acked-by: Brian King <brking@linux.vnet.ibm.com>
Signed-off-by: James Bottomley <JBottomley@Parallels.com>
Acked-by: Dinar Valeev <dvaleev@suse.com>
---
 drivers/scsi/ipr.c |    2 +-
 drivers/scsi/ipr.h |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

Index: b/drivers/scsi/ipr.c
===================================================================
--- a/drivers/scsi/ipr.c	2014-12-10 02:28:36.711743137 -0600
+++ b/drivers/scsi/ipr.c	2014-12-10 02:28:50.471743011 -0600
@@ -220,7 +220,7 @@ module_param_named(max_devs, ipr_max_dev
 MODULE_PARM_DESC(max_devs, "Specify the maximum number of physical devices. "
 		 "[Default=" __stringify(IPR_DEFAULT_SIS64_DEVS) "]");
 module_param_named(number_of_msix, ipr_number_of_msix, int, 0);
-MODULE_PARM_DESC(number_of_msix, "Specify the number of MSIX interrupts to use on capable adapters (1 - 5).  (default:1)");
+MODULE_PARM_DESC(number_of_msix, "Specify the number of MSIX interrupts to use on capable adapters (1 - 16).  (default:2)");
 MODULE_LICENSE("GPL");
 MODULE_VERSION(IPR_DRIVER_VERSION);
 
Index: b/drivers/scsi/ipr.h
===================================================================
--- a/drivers/scsi/ipr.h	2014-12-10 02:28:36.711743137 -0600
+++ b/drivers/scsi/ipr.h	2014-12-10 02:28:50.471743011 -0600
@@ -311,7 +311,7 @@ IPR_PCII_NO_HOST_RRQ | IPR_PCII_IOARRIN_
  * Misc literals
  */
 #define IPR_NUM_IOADL_ENTRIES			IPR_MAX_SGLIST
-#define IPR_MAX_MSIX_VECTORS		0x5
+#define IPR_MAX_MSIX_VECTORS		0x10
 #define IPR_MAX_HRRQ_NUM		0x10
 #define IPR_INIT_HRRQ			0x0

