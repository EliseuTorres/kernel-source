From: Michael Holzheu <holzheu@linux.vnet.ibm.com>
Subject: [S390] Kconfig: Select CONFIG_KEXEC for CONFIG_CRASH_DUMP
Date:   Mon Nov 14 11:19:03 2011 +0100
Patch-mainline: v3.2-rc3
Git-commit: 96603b505cb6c54782a27599afef65cc108ef5f2
References: bnc#786472,ltc#82694,fate#314077
    
The kdump infrastructure is built on top of kexec. Therefore
CONFIG_KEXEC has to be enabled when CONFIG_CRASH_DUMP is selected.

Signed-off-by: Michael Holzheu <holzheu@linux.vnet.ibm.com>
Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
Acked-by: John L. Jolly <jjolly@suse.de>

diff --git a/arch/s390/Kconfig b/arch/s390/Kconfig
index a9fbd43..373679b 100644
--- a/arch/s390/Kconfig
+++ b/arch/s390/Kconfig
@@ -572,6 +572,7 @@ config KEXEC
 config CRASH_DUMP
 	bool "kernel crash dumps"
 	depends on 64BIT
+	select KEXEC
 	help
 	  Generate crash dump after being started by kexec.
 	  Crash dump kernels are loaded in the main kernel with kexec-tools
