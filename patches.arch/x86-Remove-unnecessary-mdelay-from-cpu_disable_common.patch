From: Suresh Siddha <suresh.b.siddha@intel.com>
Subject: x86: Remove unnecessary mdelay() from cpu_disable_common()
Patch-mainline: 2.6.33-rc1
Git-commit: 6d20792e85187b27ae3d1b76678a2dd7025e8bc2

fixup_irqs() already has a mdelay(). Remove the extra and
unnecessary mdelay() from cpu_disable_common().
    
Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com>
Signed-off-by: Ingo Molnar <mingo@elte.hu>
Signed-off-by: Rafael J. Wysocki <rjw@suse.de>
---
 arch/x86/kernel/smpboot.c |    9 ---------
 1 file changed, 9 deletions(-)

Index: linux-2.6.32-master/arch/x86/kernel/smpboot.c
===================================================================
--- linux-2.6.32-master.orig/arch/x86/kernel/smpboot.c
+++ linux-2.6.32-master/arch/x86/kernel/smpboot.c
@@ -1250,16 +1250,7 @@ static void __ref remove_cpu_from_maps(i
 void cpu_disable_common(void)
 {
 	int cpu = smp_processor_id();
-	/*
-	 * HACK:
-	 * Allow any queued timer interrupts to get serviced
-	 * This is only a temporary solution until we cleanup
-	 * fixup_irqs as we do for IA64.
-	 */
-	local_irq_enable();
-	mdelay(1);
 
-	local_irq_disable();
 	remove_siblinginfo(cpu);
 
 	/* It's now safe to remove this processor from the online map */
