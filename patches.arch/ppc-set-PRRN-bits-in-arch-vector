From: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Subject: Set the PRRN bits in the architecture vector
Patch-mainline: pending
References: bnc#808724

In order to get PRRN Notifications sent to a system we need to inform
pHyp that we are capable of handling these notifications. This patch
sets the appropriate bits in the architecture vector to do this for
powerpc machines.

Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Acked-by: Torsten Duwe <duwe@suse.de>

---
 arch/powerpc/kernel/prom_init.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

Index: linux/arch/powerpc/kernel/prom_init.c
===================================================================
--- linux.orig/arch/powerpc/kernel/prom_init.c	2013-02-25 01:21:23.000000000 -0600
+++ linux/arch/powerpc/kernel/prom_init.c	2013-03-08 13:46:50.000000000 -0600
@@ -710,6 +710,7 @@
 #define OV5_XCMO			0x00
 #endif
 #define OV5_TYPE1_AFFINITY	0x80	/* Type 1 NUMA affinity */
+#define OV5_PRRN		0x40	/* Platform Resource  Reassignment */
 #define OV5_PFO_HW_RNG		0x80	/* PFO Random Number Generator */
 #define OV5_PFO_HW_ENCR		0x20	/* PFO Encryption Accelerator */
 
@@ -766,7 +767,7 @@
 	OV5_DONATE_DEDICATE_CPU | OV5_MSI,
 	0,
 	OV5_CMO | OV5_XCMO,
-	OV5_TYPE1_AFFINITY,
+	OV5_TYPE1_AFFINITY | OV5_PRRN,
 	0,
 	0,
 	0,
