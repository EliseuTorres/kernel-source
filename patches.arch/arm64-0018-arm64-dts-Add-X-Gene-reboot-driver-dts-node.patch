From 1e30856aaaeba4b9f755860832951162de993d70 Mon Sep 17 00:00:00 2001
From: Feng Kan <fkan@apm.com>
Date: Thu, 23 Oct 2014 18:24:18 -0700
Subject: [PATCH 18/38] arm64: dts: Add X-Gene reboot driver dts node
Patch-mainline: No
References: bnc#902632

Add X-Gene platform reboot driver dts node.

Signed-off-by: Feng Kan <fkan@apm.com>
Signed-off-by: Alexander Graf <agraf@suse.de>

---
 arch/arm64/boot/dts/apm-storm.dtsi | 12 ++++++++++++
 1 file changed, 12 insertions(+)

diff --git a/arch/arm64/boot/dts/apm-storm.dtsi b/arch/arm64/boot/dts/apm-storm.dtsi
index cea114b..d0d533a 100644
--- a/arch/arm64/boot/dts/apm-storm.dtsi
+++ b/arch/arm64/boot/dts/apm-storm.dtsi
@@ -103,6 +103,11 @@
		#size-cells = <2>;
		ranges;

+		scu: system-clk-controller@17000000 {
+			compatible = "apm,xgene-scu","syscon";
+			reg = <0x0 0x17000000 0x0 0x400>;
+		};
+
		clocks {
			#address-cells = <2>;
			#size-cells = <2>;
@@ -341,6 +346,13 @@
			};
		};

+		reboot: reboot@17000014 {
+			compatible = "syscon-reboot";
+			regmap = <&scu>;
+			offset = <0x14>;
+			mask = <0x1>;
+		};
+
		pcie0: pcie@1f2b0000 {
			status = "disabled";
			device_type = "pci";
--
2.1.0
