From: Anton Blanchard <anton@samba.org>
Subject: powerpc/compat: 32-bit little endian machine name is ppcle, not ppc
Git-commit: 422b9b9684db3c511e65c91842275c43f5910ae9
Patch-mainline: v3.15-rc1
References: bnc#875242 

    I noticed this when testing setarch. No, we don't magically
    support a big endian userspace on a little endian kernel.
    
Signed-off-by: Anton Blanchard <anton@samba.org>
    Cc: stable@vger.kernel.org # v3.10+
Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Acked-by: Torsten Duwe <duwe@suse.de>

 arch/powerpc/include/asm/compat.h | 4 ++++
 1 file changed, 4 insertions(+)
Index: linux-3.12-SLE12/arch/powerpc/include/asm/compat.h
===================================================================
--- linux-3.12-SLE12.orig/arch/powerpc/include/asm/compat.h
+++ linux-3.12-SLE12/arch/powerpc/include/asm/compat.h
@@ -8,7 +8,11 @@
 #include <linux/sched.h>
 
 #define COMPAT_USER_HZ		100
+#ifdef __BIG_ENDIAN__
 #define COMPAT_UTS_MACHINE	"ppc\0\0"
+#else
+#define COMPAT_UTS_MACHINE	"ppcle\0\0"
+#endif
 
 typedef u32		compat_size_t;
 typedef s32		compat_ssize_t;
