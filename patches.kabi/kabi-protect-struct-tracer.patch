From: Jiri Slaby <jslaby@suse.cz>
Subject: kABI: protect struct tracer
Patch-mainline: never, kabi

In 3.0.72, commit 396db58dbf922549ccc9c4c779419d9163da3224 (tracing:
Prevent buffer overwrite disabled for latency tracers), upstream
commit 613f04a0f51e6e68ac6fe571ab79da3c0a5eb4da, added two members to
struct tracer. It indeed changed layout of that structure.

But this is only an internal structure to tracers, so just ignore
that.

Signed-off-by: Jiri Slaby <jslaby@suse.cz>
---
 kernel/trace/trace.h |    4 ++++
 1 file changed, 4 insertions(+)

--- a/kernel/trace/trace.h
+++ b/kernel/trace/trace.h
@@ -278,14 +278,18 @@ struct tracer {
 	enum print_line_t	(*print_line)(struct trace_iterator *iter);
 	/* If you handled the flag setting, return 0 */
 	int			(*set_flag)(u32 old_flags, u32 bit, int set);
+#ifndef __GENKSYMS__
 	/* Return 0 if OK with change, else return non-zero */
 	int			(*flag_changed)(struct tracer *tracer,
 						u32 mask, int set);
+#endif
 	struct tracer		*next;
 	struct tracer_flags	*flags;
 	int			print_max;
 	int			use_max_tr;
+#ifndef __GENKSYMS__
 	bool			enabled;
+#endif
 };
 
 
