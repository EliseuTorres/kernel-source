Subject: PPC: guard struct paca_struct kABI changes
From: Jiri Slaby <jslaby@suse.cz>
Patch-mainline: never

Silence kABI checker. According to the PPC ABI, what follows
kexec_state should be aligned to 32-bit boundary because it's at least
32-bit long (slb_shadow_ptr, pgd or context depending on config). (All
data types are aligned in memory on addresses that are a multiple of
their size.)

And since kexec_state preceeds u32, u16 and u8, another u8 of
kexec_state will fit into the alignment hole.

Signed-off-by: Jiri Slaby <jslaby@suse.cz>
---
 arch/powerpc/include/asm/paca.h |    2 ++
 1 file changed, 2 insertions(+)

--- a/arch/powerpc/include/asm/paca.h
+++ b/arch/powerpc/include/asm/paca.h
@@ -76,7 +76,9 @@ struct paca_struct {
 	s16 hw_cpu_id;			/* Physical processor number */
 	u8 cpu_start;			/* At startup, processor spins until */
 					/* this becomes non-zero. */
+#ifndef __GENKSYMS__ /* this fits a hole (alignment) */
 	u8 kexec_state;         /* set when kexec down has irqs off */
+#endif
 #ifdef CONFIG_PPC_STD_MMU_64
 	struct slb_shadow *slb_shadow_ptr;
 
