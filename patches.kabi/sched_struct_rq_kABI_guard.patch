Subject: sched: guard struct rq kABI changes
From: Mike Galbraith <mgalbraith@suse.de>
Date: Mon Aug 23 09:53:49 CEST 2010
Patch-mainline: never

silence kABI checker.

jslaby: add also cpu_power (2.6.32.29)

Signed-off-by: Mike Galbraith <mgalbraith@suse.de>
Signed-off-by: Jiri Slaby <jslaby@suse.cz>
---
 kernel/sched.c |    7 +++++++
 1 file changed, 7 insertions(+)

--- a/kernel/sched.c
+++ b/kernel/sched.c
@@ -500,6 +500,9 @@ struct rq {
 	struct load_weight load;
 	unsigned long nr_load_updates;
 	u64 nr_switches;
+#ifdef __GENKSYMS__
+	u64 nr_migrations_in;
+#endif
 
 	struct cfs_rq cfs;
 	struct rt_rq rt;
@@ -525,7 +528,9 @@ struct rq {
 	struct mm_struct *prev_mm;
 
 	u64 clock;
+#ifndef __GENKSYMS__
 	u64 clock_task;
+#endif
 
 	atomic_t nr_iowait;
 
@@ -533,7 +538,9 @@ struct rq {
 	struct root_domain *rd;
 	struct sched_domain *sd;
 
+#ifndef __GENKSYMS__
 	unsigned long cpu_power;
+#endif
 
 	unsigned char idle_at_tick;
 	/* For active balancing */
