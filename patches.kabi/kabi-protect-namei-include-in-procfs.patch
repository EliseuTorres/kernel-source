From: Jiri Slaby <jslaby@suse.cz>
Subject: kABI: protect linux/namei.h include in procfs
Patch-mainline: never, kabi

In 3.12.39, commit 147e702ad9582b4dae6241952ac19cf174b59695 (procfs:
fix race between symlink removals and traversals), upstream commit
7e0e953bb0cf649f93277ac8fb67ecbb7f7b04a9, removed #include
 <linux/namei.h> from fs/proc/generic.c. It made struct nameidata
hidden from the kABI checker. Hence it reports kABI changes now.

So, introduce the include back and protect it by __GENKSYMS__.

Signed-off-by: Jiri Slaby <jslaby@suse.cz>
---
 fs/proc/generic.c |    3 +++
 1 file changed, 3 insertions(+)

--- a/fs/proc/generic.c
+++ b/fs/proc/generic.c
@@ -19,6 +19,9 @@
 #include <linux/mount.h>
 #include <linux/init.h>
 #include <linux/idr.h>
+#ifdef __GENKSYMS__
+#include <linux/namei.h>
+#endif
 #include <linux/bitops.h>
 #include <linux/spinlock.h>
 #include <linux/completion.h>
