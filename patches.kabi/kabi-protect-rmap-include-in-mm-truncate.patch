From: Jiri Slaby <jslaby@suse.cz>
Subject: kABI: protect rmap include in mm/truncate.c
Patch-mainline: never, kabi

In 3.12.33, commit 3976690344783e5da7438e52fc2cd16529ddc1b5 (vfs: fix
data corruption when blocksize < pagesize for mmaped data), upstream
commit 90a8020278c1598fafd071736a0846b38510309c, added an #include
into mm/truncate.c. It made struct anon_vma visible to the kABI
checker. Hence it reports kABI changes now.

So, just protect the include by __GENKSYMS__ to hide it from the
checker.

Signed-off-by: Jiri Slaby <jslaby@suse.cz>
---
 mm/truncate.c |    2 ++
 1 file changed, 2 insertions(+)

--- a/mm/truncate.c
+++ b/mm/truncate.c
@@ -20,7 +20,9 @@
 #include <linux/buffer_head.h>	/* grr. try_to_release_page,
 				   do_invalidatepage */
 #include <linux/cleancache.h>
+#ifndef __GENKSYMS__
 #include <linux/rmap.h>
+#endif
 #include "internal.h"
 
 static void clear_exceptional_entry(struct address_space *mapping,
