From: Jiri Slaby <jslaby@suse.cz>
Subject: kABI: protect user_namespace.h include in kernel/groups.c
Patch-mainline: never, kabi

In 3.12.36, commit ae254fcf53097d6d83502c1a75366c7e4eface8b (userns:
Don't allow setgroups until a gid mapping has been setablished),
upstream commit 273d2c67c3e179adb1e74f403d1e9a06e3f841b5, added an
include into kernel/groups.c. It made struct user_namespace visible to
the kABI checker. Hence it reports kABI changes now.

So, just protect the include by __GENKSYMS__ to hide it from the
checker.

Signed-off-by: Jiri Slaby <jslaby@suse.cz>
---
 kernel/groups.c |    2 ++
 1 file changed, 2 insertions(+)

--- a/kernel/groups.c
+++ b/kernel/groups.c
@@ -6,7 +6,9 @@
 #include <linux/slab.h>
 #include <linux/security.h>
 #include <linux/syscalls.h>
+#ifndef __GENKSYMS__
 #include <linux/user_namespace.h>
+#endif
 #include <asm/uaccess.h>
 
 /* init to 2 - one for init_task, one to ensure it is never freed */
