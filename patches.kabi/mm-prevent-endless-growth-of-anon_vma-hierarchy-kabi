From: Michal Hocko <mhocko@suse.cz>
Subject: kabi, mm: prevent endless growth of anon_vma hierarchy
Patch-mainline: never, kabi fixup
References: bnc#904242

anon_vma should be allocated outside of the rmap code so adding new
fields at the end of the structure should be safe.

Signed-off-by: Michal Hocko <mhocko@suse.cz>

---
 include/linux/rmap.h |    2 ++
 1 file changed, 2 insertions(+)

--- a/include/linux/rmap.h
+++ b/include/linux/rmap.h
@@ -46,6 +46,7 @@ struct anon_vma {
 	 */
 	struct rb_root rb_root;	/* Interval tree of private "related" vmas */
 
+#ifndef __GENKSYMS__
 	/*
 	 * Count of child anon_vmas and VMAs which points to this anon_vma.
 	 *
@@ -55,6 +56,7 @@ struct anon_vma {
 	unsigned degree;
 
 	struct anon_vma *parent;	/* Parent of this anon_vma */
+#endif
 };
 
 /*
