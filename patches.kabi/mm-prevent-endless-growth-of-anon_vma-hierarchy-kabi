From: Michal Hocko <mhocko@suse.cz>
Subject: kabi, mm: prevent endless growth of anon_vma hierarchy
Patch-mainline: never, kabi fixup
References: bnc#904242

anon_vma should be allocated outside of the rmap code so adding new
fields at the end of the structure should be safe.

Signed-off-by: Michal Hocko <mhocko@suse.cz>

---
 include/linux/rmap.h |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

--- a/include/linux/rmap.h
+++ b/include/linux/rmap.h
@@ -45,7 +45,7 @@ struct anon_vma {
 	 * mm_take_all_locks() (mm_all_locks_mutex).
 	 */
 	struct list_head head;	/* Chain of private "related" vmas */
-
+#ifndef __GENKSYMS__
 	/*
 	 * Count of child anon_vmas and VMAs which points to this anon_vma.
 	 *
@@ -61,6 +61,7 @@ struct anon_vma {
 	unsigned degree;
 
 	struct anon_vma *parent;	/* Parent of this anon_vma */
+#endif
 };
 
 /*
