From: Jiri Slaby <jslaby@suse.cz>
Subject: kABI: protect ipv6.h include in drivers/net
Patch-mainline: never, kabi

In 3.12.33, commit 30ab1cf8b31dc6a680ac6443a34d02d9edb9a589
(drivers/net, ipv6: Select IPv6 fragment idents for virtio UFO
packets), upstream commit 5188cd44c55db3e92cd9e77a40b5baa7ed4340f7,
added an #include into drivers/net/macvtap.c and drivers/net/tun.c. It
made structs like timewait_sock_ops visible to the kABI checker. Hence
it reports kABI changes now.

So, just protect the include by __GENKSYMS__ to hide it from the
checker.

Signed-off-by: Jiri Slaby <jslaby@suse.cz>
---
 drivers/net/macvtap.c |    2 ++
 drivers/net/tun.c     |    2 ++
 2 files changed, 4 insertions(+)

--- a/drivers/net/macvtap.c
+++ b/drivers/net/macvtap.c
@@ -17,7 +17,9 @@
 #include <linux/idr.h>
 #include <linux/fs.h>
 
+#ifndef __GENKSYMS__
 #include <net/ipv6.h>
+#endif
 #include <net/net_namespace.h>
 #include <net/rtnetlink.h>
 #include <net/sock.h>
--- a/drivers/net/tun.c
+++ b/drivers/net/tun.c
@@ -65,7 +65,9 @@
 #include <linux/nsproxy.h>
 #include <linux/virtio_net.h>
 #include <linux/rcupdate.h>
+#ifndef __GENKSYMS__
 #include <net/ipv6.h>
+#endif
 #include <net/net_namespace.h>
 #include <net/netns/generic.h>
 #include <net/rtnetlink.h>
