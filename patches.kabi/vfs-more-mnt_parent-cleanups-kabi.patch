From: Michal Marek <mmarek@suse.cz>
Subject: Preserve kabi checksum of path_is_under()
Patch-mainline: No

Move the function back to fs/dcache.c, so that the checksum generator
continues to sees the same set of type definitions.

Signed-off-by: Michal Marek <mmarek@suse.cz>
---
 fs/dcache.c    |   12 +++++++++++-
 fs/namespace.c |   10 ----------
 2 files changed, 11 insertions(+), 11 deletions(-)

--- a/fs/dcache.c
+++ b/fs/dcache.c
@@ -37,7 +37,7 @@
 #include <linux/rculist_bl.h>
 #include <linux/prefetch.h>
 #include "internal.h"
-#include "mount.h"
+#include "pnode.h"
 
 /*
  * Usage:
@@ -3040,6 +3040,16 @@ int is_subdir(struct dentry *new_dentry,
 	return result;
 }
 
+int path_is_under(struct path *path1, struct path *path2)
+{
+	int res;
+	br_read_lock(vfsmount_lock);
+	res = is_path_reachable(path1->mnt, path1->dentry, path2);
+	br_read_unlock(vfsmount_lock);
+	return res;
+}
+EXPORT_SYMBOL(path_is_under);
+
 void d_genocide(struct dentry *root)
 {
 	struct dentry *this_parent;
--- a/fs/namespace.c
+++ b/fs/namespace.c
@@ -2541,16 +2541,6 @@ bool is_path_reachable(struct vfsmount *
 	return mnt == root->mnt && is_subdir(dentry, root->dentry);
 }
 
-int path_is_under(struct path *path1, struct path *path2)
-{
-	int res;
-	br_read_lock(vfsmount_lock);
-	res = is_path_reachable(path1->mnt, path1->dentry, path2);
-	br_read_unlock(vfsmount_lock);
-	return res;
-}
-EXPORT_SYMBOL(path_is_under);
-
 /*
  * pivot_root Semantics:
  * Moves the root file system of the current process to the directory put_old,
