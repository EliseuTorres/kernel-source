From: Michal Hocko <mhocko@suse.cz>
Subject: kabi: invalidate removed sys_elem_dir::children
Patch-mainline: never, kabi fixup
References: bnc#919589

sys_elem_dir::children has been removed from the code but we have to preserve
it to preserve the kabi (size of the structure). Let's change the type to void*
to catch a potential abuse in compile time.

Signed-off-by: Michal Hocko <mhocko@suse.cz>

---
 fs/sysfs/sysfs.h |    5 +++++
 1 file changed, 5 insertions(+)

--- a/fs/sysfs/sysfs.h
+++ b/fs/sysfs/sysfs.h
@@ -19,7 +19,12 @@ struct sysfs_open_dirent;
 struct sysfs_elem_dir {
 	struct kobject		*kobj;
 
+#ifdef __GENKSYMS__
 	struct sysfs_dirent	*children;	/* No longer used */
+#else
+	/* Make sure the compilation fails if somebody still needs it */
+	void			*children_unused;
+#endif
 
 	unsigned long		subdirs;
 };
