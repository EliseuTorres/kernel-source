From: Jiri Slaby <jslaby@suse.cz>
Subject: kABI: protect struct tpm_vendor_specific
Patch-mainline: never, kabi

In 3.12.29, commit 3f06fd495304eaca2d7e61b7db3e0c27e152b36e
(tpm: Provide a generic means to override the chip returned timeouts),
upstream commit 8e54caf407b98efa05409e1fee0e5381abd2b088 added
update_timeouts hook into struct tpm_vendor_specific. It indeed
changed the layout of that structure.

However the structure is internal only, so protect the newly added
member the usual way, by #ifndef __GENKSYMS__.

Signed-off-by: Jiri Slaby <jslaby@suse.cz>
---
 drivers/char/tpm/tpm.h |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

--- a/drivers/char/tpm/tpm.h
+++ b/drivers/char/tpm/tpm.h
@@ -95,9 +95,10 @@ struct tpm_vendor_specific {
 	int (*send) (struct tpm_chip *, u8 *, size_t);
 	void (*cancel) (struct tpm_chip *);
 	u8 (*status) (struct tpm_chip *);
+#ifndef __GENKSYMS__
 	bool (*update_timeouts)(struct tpm_chip *chip,
 				unsigned long *timeout_cap);
-
+#endif
 	void (*release) (struct device *);
 	struct miscdevice miscdev;
 	struct attribute_group *attr_group;
