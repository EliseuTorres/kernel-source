From: Jan Kara <jack@suse.cz>
Subject: xfs: Hide additional entries in struct xfs_mount
Patch-mainline: never
References: bnc#846036 bnc#848544

struct xfs_mount is allocated only in xfs_fs_fill_super() and nothing else
should create these structures. So it is safe to hide additional entries in
this structure from the kABI checker.

Signed-off-by: Jan Kara <jack@suse.cz>

diff -rupX /crypted/home/jack/.kerndiffexclude linux-3.0-SLE11-SP3/fs/xfs/xfs_mount.h linux-3.0-SLE11-SP3-xfs_kabi/fs/xfs/xfs_mount.h
--- linux-3.0-SLE11-SP3/fs/xfs/xfs_mount.h	2013-11-20 13:06:00.106674682 +0100
+++ linux-3.0-SLE11-SP3-xfs_kabi/fs/xfs/xfs_mount.h	2013-11-20 13:11:35.139021709 +0100
@@ -214,14 +214,15 @@ typedef struct xfs_mount {
 	struct shrinker		m_inode_shrink;	/* inode reclaim shrinker */
 	int64_t			m_low_space[XFS_LOWSP_MAX];
 						/* low free space thresholds */
-
+	struct vfsmount         *m_vfsmount;	/* Unused */
+	spinlock_t		m_vfsmount_lock;	/* Unused */
+	const char		*m_mtpt;
+#ifndef __GENKSYMS__
 	const char		*m_data_workqueue_name;
 	struct workqueue_struct	*m_data_workqueue;
 	const char		*m_unwritten_workqueue_name;
 	struct workqueue_struct	*m_unwritten_workqueue;
-	struct vfsmount         *m_vfsmount;	/* Unused */
-	spinlock_t		m_vfsmount_lock;	/* Unused */
-	const char		*m_mtpt;
+#endif
 } xfs_mount_t;
 
 /*
