From: Jiri Slaby <jslaby@suse.cz>
Subject: kABI: protect struct usb_hcd
Patch-mainline: never

In 3.0.31, commit a8eaeff79eb97 (USB: EHCI: fix crash during suspend
on ASUS computers), upstream commit 151b61284776, added
broken_pci_sleep bit to struct usb_hcd. It fills a padding in the
structure and does not change the layout.

Let's fix it by simply protecting it by __GENKSYMS__ macro.

Signed-off-by: Jiri Slaby <jslaby@suse.cz>
---
 include/linux/usb/hcd.h |    2 ++
 1 file changed, 2 insertions(+)

--- a/include/linux/usb/hcd.h
+++ b/include/linux/usb/hcd.h
@@ -128,8 +128,10 @@ struct usb_hcd {
 	unsigned		wireless:1;	/* Wireless USB HCD */
 	unsigned		authorized_default:1;
 	unsigned		has_tt:1;	/* Integrated TT in root hub */
+#ifndef __GENKSYMS__
 	unsigned		broken_pci_sleep:1;	/* Don't put the
 			controller in PCI-D3 for system sleep */
+#endif
 
 	int			irq;		/* irq allocated */
 	void __iomem		*regs;		/* device memory/io */
