From: Michal Kubecek <mkubecek@suse.cz>
Date: Mon, 5 May 2014 13:18:44 +0200
Subject: kabi: hide modifications of struct sk_buff done by bnc#861980 fix
Patch-mainline: Never, kabi workaround
References: bnc#861980

This is safe because sizeof(struct sk_buff *) == sizeof(unsigned long)
which is assumed in many other places around the kernel code.

Signed-off-by: Michal Kubecek <mkubecek@suse.cz>
---
 include/linux/skbuff.h | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/include/linux/skbuff.h b/include/linux/skbuff.h
index 668671c..f064c21 100644
--- a/include/linux/skbuff.h
+++ b/include/linux/skbuff.h
@@ -412,8 +412,12 @@ struct sk_buff {
 	struct nf_conntrack	*nfct;
 #endif
 #ifdef NET_SKBUFF_NF_DEFRAG_NEEDED
+#ifdef __GENKSYMS__
+	struct sk_buff		*nfct_reasm;
+#else
 	unsigned long		_nfct_reasm;
 #endif
+#endif
 #ifdef CONFIG_BRIDGE_NETFILTER
 	struct nf_bridge_info	*nf_bridge;
 #endif
-- 
1.8.1.4

