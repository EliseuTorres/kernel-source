Subject: sched: sched_entity kABI guard
From: Mike Galbraith <mgalbraith@suse.de>
Date: Tue Apr 26 11:54:58 CEST 2011
Patch-mainline: no
References: bnc#689746

silence sched-Implement-group-scheduler-statistics-in-one-struct induced kABI checker noise.

Signed-off-by: Mike Galbraith <mgalbraith@suse.de>
---
 include/linux/sched.h |   37 ++++++++++++++++++++++++++++++++++++-
 1 file changed, 36 insertions(+), 1 deletion(-)

Index: linux-2.6.32-SLE11-SP1/include/linux/sched.h
===================================================================
--- linux-2.6.32-SLE11-SP1.orig/include/linux/sched.h
+++ linux-2.6.32-SLE11-SP1/include/linux/sched.h
@@ -1220,8 +1220,43 @@ struct sched_entity {
 	u64			avg_running;
 
 #ifdef CONFIG_SCHEDSTATS
+#ifndef __GENKSYMS__
 	struct sched_statistics statistics;
-#endif
+#else
+	u64			wait_start;
+	u64			wait_max;
+	u64			wait_count;
+	u64			wait_sum;
+	u64			iowait_count;
+	u64			iowait_sum;
+
+	u64			sleep_start;
+	u64			sleep_max;
+	s64			sum_sleep_runtime;
+
+	u64			block_start;
+	u64			block_max;
+	u64			exec_max;
+	u64			slice_max;
+
+	u64			nr_migrations_cold;
+	u64			nr_failed_migrations_affine;
+	u64			nr_failed_migrations_running;
+	u64			nr_failed_migrations_hot;
+	u64			nr_forced_migrations;
+	u64			nr_forced2_migrations;
+
+	u64			nr_wakeups;
+	u64			nr_wakeups_sync;
+	u64			nr_wakeups_migrate;
+	u64			nr_wakeups_local;
+	u64			nr_wakeups_remote;
+	u64			nr_wakeups_affine;
+	u64			nr_wakeups_affine_attempts;
+	u64			nr_wakeups_passive;
+	u64			nr_wakeups_idle;
+#endif /* __GENKSYMS__ */
+#endif /* CONFIG_SCHEDSTATS */
 
 #ifdef CONFIG_FAIR_GROUP_SCHED
 	struct sched_entity	*parent;
