From: Filipe David Borba Manana <fdmanana@gmail.com>
Date: Mon, 25 Nov 2013 03:22:07 +0000
Patch-mainline: 3.14
Git-commit: 68ba990f7d161c31e9eddd98727ba8393089047f
Subject: [PATCH] Btrfs: fix extent boundary check in
 bio_readpage_error

Signed-off-by: Filipe David Borba Manana <fdmanana@gmail.com>
Signed-off-by: Josef Bacik <jbacik@fb.com>
Signed-off-by: Chris Mason <clm@fb.com>
Signed-off-by: David Sterba <dsterba@suse.cz>
---
 fs/btrfs/extent_io.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/fs/btrfs/extent_io.c
+++ b/fs/btrfs/extent_io.c
@@ -2177,7 +2177,7 @@ static int bio_readpage_error(struct bio
 			return -EIO;
 		}
 
-		if (em->start > start || em->start + em->len < start) {
+		if (em->start > start || em->start + em->len <= start) {
 			free_extent_map(em);
 			em = NULL;
 		}
