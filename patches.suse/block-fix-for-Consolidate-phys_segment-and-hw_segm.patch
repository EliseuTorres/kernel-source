From: Stephen Rothwell <sfr@canb.auug.org.au>
Date: Mon, 1 Mar 2010 19:21:01 +1100
Subject: [PATCH] block: fix for "Consolidate phys_segment and hw_segment limits"
X-Git: 91f63d0efa1b2ff3f8773aad61c2970f097232aa
References: FATE#311054
Patch-Mainline: 2.6.34

Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
Signed-off-by: Jens Axboe <jens.axboe@oracle.com>
Signed-off-by: Hannes Reinecke <hare@suse.de>
---
 drivers/block/ps3vram.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/block/ps3vram.c b/drivers/block/ps3vram.c
index 83ebb39..e446082 100644
--- a/drivers/block/ps3vram.c
+++ b/drivers/block/ps3vram.c
@@ -751,7 +751,7 @@ static int __devinit ps3vram_probe(struct ps3_system_bus_device *dev)
 	priv->queue = queue;
 	queue->queuedata = dev;
 	blk_queue_make_request(queue, ps3vram_make_request);
-	blk_queue_max_segments(queue, BLK_MAX_HW_SEGMENTS);
+	blk_queue_max_segments(queue, BLK_MAX_SEGMENTS);
 	blk_queue_max_segment_size(queue, BLK_MAX_SEGMENT_SIZE);
 	blk_queue_max_hw_sectors(queue, BLK_SAFE_MAX_SECTORS);
 
-- 
1.6.0.2

