From: David Sterba <dsterba@suse.cz>
Date: Tue, 19 Apr 2011 14:31:08 +0200
Patch-mainline: yes
References: FATE#306586
Subject: [PATCH] btrfs: remove nested duplicate variable declarations

Signed-off-by: David Sterba <dsterba@suse.cz>
Signed-off-by: David Sterba <dsterba@suse.cz>
---
 fs/btrfs/ctree.c            |    1 -
 fs/btrfs/free-space-cache.c |    3 ---
 2 files changed, 4 deletions(-)

--- a/fs/btrfs/ctree.c
+++ b/fs/btrfs/ctree.c
@@ -3646,7 +3646,6 @@ setup_items_for_insert(struct btrfs_tran
 
 	ret = 0;
 	if (slot == 0) {
-		struct btrfs_disk_key disk_key;
 		btrfs_cpu_key_to_disk(&disk_key, cpu_key);
 		ret = fixup_low_keys(trans, root, path, &disk_key, 1);
 	}
--- a/fs/btrfs/free-space-cache.c
+++ b/fs/btrfs/free-space-cache.c
@@ -1982,8 +1982,6 @@ u64 btrfs_alloc_from_cluster(struct btrf
 	while(1) {
 		if (entry->bytes < bytes ||
 		    (!entry->bitmap && entry->offset < min_start)) {
-			struct rb_node *node;
-
 			node = rb_next(&entry->offset_index);
 			if (!node)
 				break;
@@ -1997,7 +1995,6 @@ u64 btrfs_alloc_from_cluster(struct btrf
 						      cluster, entry, bytes,
 						      min_start);
 			if (ret == 0) {
-				struct rb_node *node;
 				node = rb_next(&entry->offset_index);
 				if (!node)
 					break;
