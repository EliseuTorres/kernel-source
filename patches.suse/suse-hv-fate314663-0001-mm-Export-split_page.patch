From: "K. Y. Srinivasan" <kys@microsoft.com>
Date: Sat, 16 Mar 2013 14:42:04 -0700
Patch-mainline: submitted <lkml 2013-03-18>
Subject: mm: Export split_page()
References: fate#314663

The split_page() function will be very useful for balloon drivers. On Hyper-V,
it will be very efficient to use 2M allocations in the guest as this (a) makes
the ballooning protocol with the host that much more efficient and (b) moving
memory in 2M chunks minimizes fragmentation in the host. Export the split_page()
function to let the guest allocations be in 2M chunks while the host is free to
return this memory at arbitrary granularity.

Signed-off-by: K. Y. Srinivasan <kys@microsoft.com>
Acked-by: <ohering@suse.de>
---
 mm/page_alloc.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/mm/page_alloc.c b/mm/page_alloc.c
index 8fcced7..7ff1536 100644
--- a/mm/page_alloc.c
+++ b/mm/page_alloc.c
@@ -1280,6 +1280,7 @@ void split_page(struct page *page, unsigned int order)
 	for (i = 1; i < (1 << order); i++)
 		set_page_refcounted(page + i);
 }
+EXPORT_SYMBOL_GPL(split_page);
 
 /*
  * Similar to split_page except the page is already free. As this is only
