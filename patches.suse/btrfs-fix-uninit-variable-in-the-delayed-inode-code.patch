From: Chris Mason <chris.mason@oracle.com>
Date: Fri, 3 Jun 2011 01:13:45 -0400
Patch-mainline: yes
References: FATE#306586
Subject: [PATCH] Btrfs: fix uninit variable in the delayed inode code

The nitems counter needs to start at zero

Signed-off-by: Chris Mason <chris.mason@oracle.com>
Signed-off-by: David Sterba <dsterba@suse.cz>
---
 fs/btrfs/delayed-inode.c |    1 +
 1 file changed, 1 insertion(+)

Index: linux-2.6.32-SLE11-SP2/fs/btrfs/delayed-inode.c
===================================================================
--- linux-2.6.32-SLE11-SP2.orig/fs/btrfs/delayed-inode.c
+++ linux-2.6.32-SLE11-SP2/fs/btrfs/delayed-inode.c
@@ -678,6 +678,7 @@ static int btrfs_batch_insert_items(stru
 	INIT_LIST_HEAD(&head);
 
 	next = item;
+	nitems = 0;
 
 	/*
 	 * count the number of the continuous items that we can insert in batch
