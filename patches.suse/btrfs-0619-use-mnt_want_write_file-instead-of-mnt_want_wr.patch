From: Liu Bo <liubo2009@cn.fujitsu.com>
Date: Fri, 29 Jun 2012 03:58:48 -0600
Patch-mainline: 3.6
Git-commit: e54bfa31044d602a57d4e190f6d1c3763ea76bfe
References: FATE#312888
Subject: [PATCH] Btrfs: use mnt_want_write_file instead of
 mnt_want_write

mnt_want_write_file is faster when file has been opened for write.

Signed-off-by: Liu Bo <liubo2009@cn.fujitsu.com>
Signed-off-by: David Sterba <dsterba@suse.cz>
---
 fs/btrfs/ioctl.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/fs/btrfs/ioctl.c
+++ b/fs/btrfs/ioctl.c
@@ -3275,7 +3275,7 @@ static long btrfs_ioctl_balance(struct f
 	if (fs_info->sb->s_flags & MS_RDONLY)
 		return -EROFS;
 
-	ret = mnt_want_write(file->f_path.mnt);
+	ret = mnt_want_write_file(file);
 	if (ret)
 		return ret;
 
