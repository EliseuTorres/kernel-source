From: Nikanth Karthikesan <knikanth@suse.de>
Subject: Silence "ldm_validate_partition_table(): Disk read failed" when booting with "quiet"
Patch-mainline: Not yet. https://lkml.org/lkml/2011/3/17/11
References: bnc#656219

Silence "ldm_validate_partition_table(): Disk read failed" when booting with "quiet"

When the kernel does partition detection, on certain configurations with
external fibre channel raid systems (e.g. clariion from EMC) the read
would fail. And "ldm_validate_partition_table(): Disk read failed"
messages are printed to the console.

But the failure to read is not a critical error. Now since the message
is flagged as KERN_CRIT, it gets printed even when booting with the
"quiet" kernel parameter. Fix it by using KERN_INFO, as the failure to
read here is not really an error.

Signed-off-by: Nikanth Karthikesan <knikanth@suse.de>
Reported-by : Klaus Hartmann <Klaus.Hartmann@ts.fujitsu.com>
Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

---

Index: linux-2.6.32-SLE11-SP1/fs/partitions/ldm.c
===================================================================
--- linux-2.6.32-SLE11-SP1.orig/fs/partitions/ldm.c
+++ linux-2.6.32-SLE11-SP1/fs/partitions/ldm.c
@@ -565,7 +565,7 @@ static bool ldm_validate_partition_table
 
 	data = read_dev_sector (bdev, 0, &sect);
 	if (!data) {
-		ldm_crit ("Disk read failed.");
+		ldm_info ("Disk read failed.");
 		return false;
 	}
 
