From: Corrado Zoccolo <czoccolo@gmail.com>
Date: Mon, 2 Nov 2009 10:40:37 +0100
Subject: [PATCH] cfq-iosched: simplify prio-unboost code
Git-commit: dddb74519aec2081204d203a97578c9fc4e9fb64
References: FATE#311054
Patch-Mainline: 2.6.33

Eliminate redundant checks.

Signed-off-by: Corrado Zoccolo <czoccolo@gmail.com>
Signed-off-by: Jens Axboe <jens.axboe@oracle.com>
Signed-off-by: Hannes Reinecke <hare@suse.de>
---
 block/cfq-iosched.c |    8 +++-----
 1 files changed, 3 insertions(+), 5 deletions(-)

diff --git a/block/cfq-iosched.c b/block/cfq-iosched.c
index 39af050..d0a984a 100644
--- a/block/cfq-iosched.c
+++ b/block/cfq-iosched.c
@@ -2627,12 +2627,10 @@ static void cfq_prio_boost(struct cfq_queue *cfqq)
 			cfqq->ioprio = IOPRIO_NORM;
 	} else {
 		/*
-		 * check if we need to unboost the queue
+		 * unboost the queue (if needed)
 		 */
-		if (cfqq->ioprio_class != cfqq->org_ioprio_class)
-			cfqq->ioprio_class = cfqq->org_ioprio_class;
-		if (cfqq->ioprio != cfqq->org_ioprio)
-			cfqq->ioprio = cfqq->org_ioprio;
+		cfqq->ioprio_class = cfqq->org_ioprio_class;
+		cfqq->ioprio = cfqq->org_ioprio;
 	}
 }
 
-- 
1.6.0.2

