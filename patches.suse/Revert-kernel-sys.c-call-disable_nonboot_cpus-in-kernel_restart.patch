From 81e772bd6a8a845c886147471f385765c17917b3 Mon Sep 17 00:00:00 2001
From: Mel Gorman <mgorman@suse.de>
Date: Mon, 10 Mar 2014 13:33:15 +0000
Subject: [PATCH] Revert "kernel/sys.c: call disable_nonboot_cpus() in
 kernel_restart()"

References: Reduce time to shutdown large machines (bnc#865442)
Patch-mainline: No (Unnecessary)

This reverts commit faaeea39363ad54b3dfe23cc982e484f6e54aa5a. The patches
were only required for the ARM architecture which we do not support but a
consequence of the patch is that large machines take too long to shutdown.
Mainline addresses the problem differently but the patches are unnecessarily
complex for backporting.

Signed-off-by: Mel Gorman <mgorman@suse.de>
---
 kernel/sys.c | 1 -
 1 file changed, 1 deletion(-)

diff --git a/kernel/sys.c b/kernel/sys.c
index ddd9060..967bb95 100644
--- a/kernel/sys.c
+++ b/kernel/sys.c
@@ -332,7 +332,6 @@ void kernel_restart_prepare(char *cmd)
 void kernel_restart(char *cmd)
 {
 	kernel_restart_prepare(cmd);
-	disable_nonboot_cpus();
 	if (!cmd)
 		printk(KERN_EMERG "Restarting system.\n");
 	else
