From: Stefan Behrens <sbehrens@giantdisaster.de>
Date: Thu, 11 Oct 2012 07:25:16 -0600
Patch-mainline: 3.7
Git-commit: 84167d190569eedcdb24bf2499bdda437e442962
References: FATE#312888
Subject: [PATCH] Btrfs: Fix wrong error handling code

gcc says "warning: comparison of unsigned expression >= 0 is always
true" because i is an unsigned long. And gcc is right this time.

Signed-off-by: Stefan Behrens <sbehrens@giantdisaster.de>
Signed-off-by: David Sterba <dsterba@suse.cz>
---
 fs/btrfs/extent_io.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

--- a/fs/btrfs/extent_io.c
+++ b/fs/btrfs/extent_io.c
@@ -4106,8 +4106,8 @@ struct extent_buffer *alloc_dummy_extent
 
 	return eb;
 err:
-	for (i--; i >= 0; i--)
-		__free_page(eb->pages[i]);
+	for (; i > 0; i--)
+		__free_page(eb->pages[i - 1]);
 	__free_extent_buffer(eb);
 	return NULL;
 }
