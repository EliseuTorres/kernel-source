From: NeilBrown <neilb@suse.de>
Date: Mon, 14 Dec 2009 12:49:47 +1100
Subject: [PATCH] md/raid5: remove some sparse warnings.
Git-commit: 8553fe7ec731e4f997245e14319572cb15118018
References: FATE#311054
Patch-Mainline: 2.6.33

qd_idx is previously declared and given exactly the same value!

Signed-off-by: NeilBrown <neilb@suse.de>
Signed-off-by: Hannes Reinecke <hare@suse.de>
---
 drivers/md/raid5.c |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

diff --git a/drivers/md/raid5.c b/drivers/md/raid5.c
index 68521cd..cde48ba 100644
--- a/drivers/md/raid5.c
+++ b/drivers/md/raid5.c
@@ -3449,7 +3449,6 @@ static void handle_stripe6(struct stripe_head *sh)
 	 * completed
 	 */
 	if (sh->reconstruct_state == reconstruct_state_drain_result) {
-		int qd_idx = sh->qd_idx;
 
 		sh->reconstruct_state = reconstruct_state_idle;
 		/* All the 'written' buffers and the parity blocks are ready to
@@ -3840,7 +3839,7 @@ static int chunk_aligned_read(struct request_queue *q, struct bio * raid_bio)
 {
 	mddev_t *mddev = q->queuedata;
 	raid5_conf_t *conf = mddev->private;
-	unsigned int dd_idx;
+	int dd_idx;
 	struct bio* align_bi;
 	mdk_rdev_t *rdev;
 
-- 
1.6.0.2

