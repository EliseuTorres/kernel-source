From: Miklos Szeredi <mszeredi@suse.cz>
Date: Mon, 28 Apr 2014 14:19:24 +0200
Subject: fuse: remove .update_time
Git-commit: 8b47e73e91c064cd75e8bf458ce738e1bfe2e700
Patch-mainline: v3.15-rc5
References: FATE#317677

This implements updating ctime as well as mtime on file_update_time().

Signed-off-by: Miklos Szeredi <mszeredi@suse.cz>
---
 fs/fuse/dir.c |   12 ------------
 1 file changed, 12 deletions(-)

--- a/fs/fuse/dir.c
+++ b/fs/fuse/dir.c
@@ -1678,17 +1678,6 @@ static int fuse_removexattr(struct dentr
 	return err;
 }
 
-static int fuse_update_time(struct inode *inode, struct timespec *now,
-			    int flags)
-{
-	if (flags & S_MTIME) {
-		inode->i_mtime = *now;
-		mark_inode_dirty_sync(inode);
-		BUG_ON(!S_ISREG(inode->i_mode));
-	}
-	return 0;
-}
-
 static const struct inode_operations fuse_dir_inode_operations = {
 	.lookup		= fuse_lookup,
 	.mkdir		= fuse_mkdir,
@@ -1725,7 +1714,6 @@ static const struct inode_operations fus
 	.getxattr	= fuse_getxattr,
 	.listxattr	= fuse_listxattr,
 	.removexattr	= fuse_removexattr,
-	.update_time	= fuse_update_time,
 };
 
 static const struct inode_operations fuse_symlink_inode_operations = {
