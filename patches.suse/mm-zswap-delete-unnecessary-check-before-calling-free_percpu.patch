From: Markus Elfring <elfring@users.sourceforge.net>
Date: Fri, 12 Dec 2014 16:57:18 -0800
Subject: mm/zswap: delete unnecessary check before calling free_percpu()
Git-commit: 442cc432e68b24dc6bd70b1ee1f5d477ee1aa385
Patch-mainline: v3.19-rc1
References: VM Functionality, fate#318829

free_percpu() tests whether its argument is NULL and then returns
immediately.  Thus the test around the call is not needed.

This issue was detected by using the Coccinelle software.

Signed-off-by: Markus Elfring <elfring@users.sourceforge.net>
Cc: Seth Jennings <sjennings@variantweb.net>
Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
Signed-off-by: Vlastimil Babka <vbabka@suse.cz>
---
 mm/zswap.c |    3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

--- a/mm/zswap.c
+++ b/mm/zswap.c
@@ -147,8 +147,7 @@ static int __init zswap_comp_init(void)
 static void __init zswap_comp_exit(void)
 {
 	/* free percpu transforms */
-	if (zswap_comp_pcpu_tfms)
-		free_percpu(zswap_comp_pcpu_tfms);
+	free_percpu(zswap_comp_pcpu_tfms);
 }
 
 /*********************************
