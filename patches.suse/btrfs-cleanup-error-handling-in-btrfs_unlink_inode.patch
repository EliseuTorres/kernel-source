From: Tsutomu Itoh <t-itoh@jp.fujitsu.com>
Date: Thu, 3 Feb 2011 03:16:25 +0000
Patch-mainline: yes
References: FATE#306586
Subject: [PATCH] btrfs: cleanup error handling in
 btrfs_unlink_inode()

When btrfs_alloc_path() fails, btrfs_free_path() need not be called.
Therefore, it changes the branch ahead.

Signed-off-by: Tsutomu Itoh <t-itoh@jp.fujitsu.com>
Signed-off-by: Chris Mason <chris.mason@oracle.com>
Signed-off-by: David Sterba <dsterba@suse.cz>
---
 fs/btrfs/inode.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/fs/btrfs/inode.c
+++ b/fs/btrfs/inode.c
@@ -2645,7 +2645,7 @@ int btrfs_unlink_inode(struct btrfs_tran
 	path = btrfs_alloc_path();
 	if (!path) {
 		ret = -ENOMEM;
-		goto err;
+		goto out;
 	}
 
 	path->leave_spinning = 1;
