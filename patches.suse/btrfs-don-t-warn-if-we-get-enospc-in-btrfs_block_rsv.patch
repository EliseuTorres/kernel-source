From: Josef Bacik <josef@redhat.com>
Date: Wed, 12 Jan 2011 21:04:22 +0000
Patch-mainline: yes
References: FATE#306586
Subject: [PATCH] Btrfs: don't warn if we get ENOSPC in
 btrfs_block_rsv_check

If we run low on space we could get a bunch of warnings out of
btrfs_block_rsv_check, but this is mostly just called via the transaction code
to see if we need to end the transaction, it expects to see failures, so let's
not WARN and freak everybody out for no reason.  Thanks,

Signed-off-by: Josef Bacik <josef@redhat.com>
Signed-off-by: Chris Mason <chris.mason@oracle.com>
Signed-off-by: David Sterba <dsterba@suse.cz>
---
 fs/btrfs/extent-tree.c |    5 -----
 1 file changed, 5 deletions(-)

 fs/btrfs/extent-tree.c |    5 -----
 1 file changed, 5 deletions(-)

 fs/btrfs/extent-tree.c |    5 -----
 1 file changed, 5 deletions(-)

--- a/fs/btrfs/extent-tree.c
+++ b/fs/btrfs/extent-tree.c
@@ -3726,11 +3726,6 @@ int btrfs_block_rsv_check(struct btrfs_t
 		return 0;
 	}
 
-	WARN_ON(1);
-	printk(KERN_INFO"block_rsv size %llu reserved %llu freed %llu %llu\n",
-		block_rsv->size, block_rsv->reserved,
-		block_rsv->freed[0], block_rsv->freed[1]);
-
 	return -ENOSPC;
 }
 
