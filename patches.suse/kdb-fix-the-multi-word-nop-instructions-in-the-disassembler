From: Martin Hicks <mort@sgi.com>
Date: Thu, 25 Feb 2010 10:32:53 -0600
Subject: [PATCH] kdb: fix the multi-word NOP instructions in the disassembler
Git-Repo: KDB repo
Git-commit: c89480f3ba9eff7e3ca17f523699bb3d15c98736
Patch-mainline: Whenever KDB is upstream
References: bnc#584691

Signed-off-by: Martin Hicks <mort@sgi.com>
Acked-by: Jeff Mahoney <jeffm@suse.com>
---
 arch/x86/kdb/x86-dis.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/x86/kdb/x86-dis.c b/arch/x86/kdb/x86-dis.c
index 40e7ae9..47e7871 100644
--- a/arch/x86/kdb/x86-dis.c
+++ b/arch/x86/kdb/x86-dis.c
@@ -842,7 +842,7 @@ static const struct dis386 dis386_twobyte[] = {
   { "(bad)",		XX, XX, XX },
   { "(bad)",		XX, XX, XX },
   { "(bad)",		XX, XX, XX },
-  { "(bad)",		XX, XX, XX },
+  { "nopQ",		Ev, XX, XX },
   /* 20 */
   { "movL",		Rm, Cm, XX },
   { "movL",		Rm, Dm, XX },
@@ -1124,7 +1124,7 @@ static const unsigned char twobyte_has_modrm[256] = {
   /*	   0 1 2 3 4 5 6 7 8 9 a b c d e f	  */
   /*	   -------------------------------	  */
   /* 00 */ 1,1,1,1,0,0,0,0,0,0,0,0,0,1,0,1, /* 0f */
-  /* 10 */ 1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0, /* 1f */
+  /* 10 */ 1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1, /* 1f */
   /* 20 */ 1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,1, /* 2f */
   /* 30 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 3f */
   /* 40 */ 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1, /* 4f */
-- 
1.5.4.rc3

