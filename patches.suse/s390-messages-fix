From: Jeff Mahoney <jeffm@suse.com>
Subject: s390 message catalog: build fixes
Patch-mainline: Depends on the message catalog patches

 dev_printk wasn't defined and the pr_printk_hash macro when messages
 are cataloged didn't produced valid tokens when variables like *len
 were used.

Signed-off-by: Jeff Mahoney <jeffm@suse.com>
---
 include/linux/device.h |    2 ++
 include/linux/printk.h |    2 +-
 2 files changed, 3 insertions(+), 1 deletion(-)

--- a/include/linux/device.h
+++ b/include/linux/device.h
@@ -802,6 +802,8 @@ int printk_dev_hash(const char *, const
 
 #endif
 
+#define dev_printk(level, dev, format, arg...)          \
+        dev_printk_hash(level , dev , format , ## arg)
 #define dev_emerg(dev, format, arg...)		\
 	dev_printk_hash(KERN_EMERG , dev , format , ## arg)
 #define dev_alert(dev, format, arg...)		\
--- a/include/linux/printk.h
+++ b/include/linux/printk.h
@@ -156,7 +156,7 @@ extern void dump_stack(void) __cold;
 
 /* generate magic string for scripts/kmsg-doc to parse */
 #define pr_printk_hash(level, format, ...) \
-	__KMSG_PRINT(level _FMT_ format _ARGS_ ##__VA_ARGS__ _END_)
+	__KMSG_PRINT(level _FMT_ format _ARGS_ __VA_ARGS__ _END_)
 
 #elif defined(CONFIG_KMSG_IDS) && defined(KMSG_COMPONENT)
 
