From: Josef Bacik <jbacik@fusionio.com>
Date: Tue, 23 Apr 2013 11:08:33 -0400
Patch-mainline: 3.10
Git-commit: 5ec8dca7617b77afb0e3c7e6271089172b498546
References: FATE#312888
Subject: [PATCH] Btrfs: don't try and free ebs twice in log replay

This work is done by btrfs_free_path() anyway so there's no need for this
duplicate work.  Thanks,

Signed-off-by: Josef Bacik <jbacik@fusionio.com>
Signed-off-by: David Sterba <dsterba@suse.cz>
---
 fs/btrfs/tree-log.c |    7 -------
 1 file changed, 7 deletions(-)

--- a/fs/btrfs/tree-log.c
+++ b/fs/btrfs/tree-log.c
@@ -2158,7 +2158,6 @@ static int walk_log_tree(struct btrfs_tr
 	int wret;
 	int level;
 	struct btrfs_path *path;
-	int i;
 	int orig_level;
 
 	path = btrfs_alloc_path();
@@ -2215,12 +2214,6 @@ static int walk_log_tree(struct btrfs_tr
 	}
 
 out:
-	for (i = 0; i <= orig_level; i++) {
-		if (path->nodes[i]) {
-			free_extent_buffer(path->nodes[i]);
-			path->nodes[i] = NULL;
-		}
-	}
 	btrfs_free_path(path);
 	return ret;
 }
