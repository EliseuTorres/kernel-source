From: Vitaly Kuznetsov <vkuznets@redhat.com>
Date: Sun, 28 Jun 2015 12:02:36 -0700
Patch-mainline: submitted
Subject: kexec: define kexec_in_progress in !CONFIG_KEXEC case

If some piece of code wants to check kexec_in_progress it has to be put
in #ifdef CONFIG_KEXEC block to not break the build in !CONFIG_KEXEC
case. Overcome this limitation by defining kexec_in_progress to false.

Signed-off-by: Vitaly Kuznetsov <vkuznets@redhat.com>
Signed-off-by: K. Y. Srinivasan <kys@microsoft.com>
Acked-by: <ohering@suse.de>
---
 include/linux/kexec.h | 1 +
 1 file changed, 1 insertion(+)

diff --git a/include/linux/kexec.h b/include/linux/kexec.h
index 3948bf4..009ce1f 100644
--- a/include/linux/kexec.h
+++ b/include/linux/kexec.h
@@ -252,5 +252,6 @@ static inline void crash_kexec(struct pt_regs *regs) {
 struct task_struct;
 static inline void crash_kexec(struct pt_regs *regs) { }
 static inline int kexec_should_crash(struct task_struct *p) { return 0; }
+#define kexec_in_progress false
 #endif /* CONFIG_KEXEC */
 #endif /* LINUX_KEXEC_H */
