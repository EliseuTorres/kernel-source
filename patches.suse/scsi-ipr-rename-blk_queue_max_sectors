From: Hannes Reinecke <hare@suse.de>
Subject: ipr: Rename blk_queue_max_sectors
References: FATE#311054
Patch-Mainline: 2.6.34
Git-commit: 8a78362c4eefc1deddbefe2c7f38aabbc2429d6b

This is a split-off patch from the above commit to
update the IPR driver.

Signed-off-by: Hannes Reinecke <hare@suse.de>
diff --git a/drivers/scsi/ipr.c b/drivers/scsi/ipr.c
index 43f70ae..21b89ab 100644
--- a/drivers/scsi/ipr.c
+++ b/drivers/scsi/ipr.c
@@ -3679,7 +3679,7 @@ static int ipr_slave_configure(struct scsi_device *sdev)
 		if (ipr_is_vset_device(res)) {
 			blk_queue_rq_timeout(sdev->request_queue,
 					     IPR_VSET_RW_TIMEOUT);
-			blk_queue_max_sectors(sdev->request_queue, IPR_VSET_MAX_SECTORS);
+			blk_queue_max_hw_sectors(sdev->request_queue, IPR_VSET_MAX_SECTORS);
 		}
 		if (ipr_is_gata(res) && res->sata_port)
 			ap = res->sata_port->ap;

