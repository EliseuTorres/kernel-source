From: Frederic Weisbecker <fweisbec@gmail.com>
Subject: Merge commit 'perf/core' into perf/hw-breakpoint
Git-commit: 0f8f86c7bdd1c954fbe153af437a0d91a6c5721a
Patch-mainline: 2.6.33-rc1

Merge commit 'perf/core' into perf/hw-breakpoint

Conflicts:
    kernel/Makefile
    kernel/trace/Makefile
    kernel/trace/trace.h
    samples/Makefile

Merge reason: We need to be uptodate with the perf events development
branch because we plan to rewrite the breakpoints API on top of
perf events.

Acked-by: Jeff Mahoney <jeffm@suse.com>
---

 kernel/trace/trace_entries.h |   16 ++++++++++++++++
 1 file changed, 16 insertions(+)

diff --cc kernel/trace/trace_entries.h
index 0000000,ead3d72..e19747d
mode 000000,100644..100644
--- a/kernel/trace/trace_entries.h
+++ b/kernel/trace/trace_entries.h
@@ -1,3 +1,19 @@
 	F_printk("type:%u call_site:%lx ptr:%p",
 		 __entry->type_id, __entry->call_site, __entry->ptr)
 );
+
+FTRACE_ENTRY(ksym_trace, ksym_trace_entry,
+
+	TRACE_KSYM,
+
+	F_STRUCT(
+		__field(	unsigned long,	ip			  )
+		__field(	unsigned char,	type			  )
+		__array(	char	     ,	ksym_name, KSYM_NAME_LEN  )
+		__array(	char	     ,	cmd,	   TASK_COMM_LEN  )
+	),
+
+	F_printk("ip: %pF type: %d ksym_name: %s cmd: %s",
+		(void *)__entry->ip, (unsigned int)__entry->type,
+		__entry->ksym_name, __entry->cmd)
+);
