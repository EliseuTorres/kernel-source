From: Jens Axboe <jaxboe@fusionio.com>
Date: Mon, 7 Jun 2010 20:17:38 +0200
Subject: [PATCH] block: remove duplicate BUG_ON() in bd_finish_claiming()
Git-commit: 3e6c05052c262ebe7fdd85e75e9d4f956cdd8d82
References: FATE#311692
Patch-Mainline: 2.6.35

We do the same BUG_ON() just a line later when calling into
__bd_abort_claiming().

Reported-by: Tejun Heo <tj@kernel.org>
Signed-off-by: Jens Axboe <jaxboe@fusionio.com>
Signed-off-by: Hannes Reinecke <hare@suse.de>
---
 fs/block_dev.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

diff --git a/fs/block_dev.c b/fs/block_dev.c
index ea0c04e..20f03ea 100644
--- a/fs/block_dev.c
+++ b/fs/block_dev.c
@@ -856,7 +856,6 @@ static void bd_finish_claiming(struct block_device *bdev,
 				struct block_device *whole, void *holder)
 {
 	spin_lock(&bdev_lock);
-	BUG_ON(whole->bd_claiming != holder);
 	BUG_ON(!bd_may_claim(bdev, whole, holder));
 	__bd_claim(bdev, whole, holder);
 	__bd_abort_claiming(whole, holder); /* not actually an abort */
-- 
1.6.0.2

