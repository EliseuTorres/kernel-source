From: Zhi Yong Wu <wuzhy@linux.vnet.ibm.com>
Date: Mon, 18 Mar 2013 09:18:09 +0000
Patch-mainline: 3.10
Git-commit: 628c8282bed73c18ff056d655d4a6a63ef55284a
References: FATE#312888
Subject: [PATCH] btrfs: Cleanup some redundant codes in
 btrfs_lookup_csums_range()

Signed-off-by: Zhi Yong Wu <wuzhy@linux.vnet.ibm.com>
Signed-off-by: Josef Bacik <jbacik@fusionio.com>
Signed-off-by: David Sterba <dsterba@suse.cz>
---
 fs/btrfs/file-item.c |    7 ++-----
 1 file changed, 2 insertions(+), 5 deletions(-)

--- a/fs/btrfs/file-item.c
+++ b/fs/btrfs/file-item.c
@@ -358,11 +358,8 @@ int btrfs_lookup_csums_range(struct btrf
 
 		btrfs_item_key_to_cpu(leaf, &key, path->slots[0]);
 		if (key.objectid != BTRFS_EXTENT_CSUM_OBJECTID ||
-		    key.type != BTRFS_EXTENT_CSUM_KEY)
-			break;
-
-		btrfs_item_key_to_cpu(leaf, &key, path->slots[0]);
-		if (key.offset > end)
+		    key.type != BTRFS_EXTENT_CSUM_KEY ||
+		    key.offset > end)
 			break;
 
 		if (key.offset > start)
