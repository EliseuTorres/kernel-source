From 8290f9ee66352a04b2858db63e20229ccd9395fb Mon Sep 17 00:00:00 2001
From: Martin Hicks <mort@sgi.com>
Date: Mon, 8 Feb 2010 13:48:48 -0600
Subject: [PATCH] kdb: fix kdb_cmds to include the arch common macro
References: bnc#578421
Patch-mainline: Whenever kdb is accepted

kbuild must have changed at one point and nobody noticed that
the "archkdb" type macros, which use the archkdbcommon
macro, were not working

Signed-off-by: Martin Hicks <mort@sgi.com>
Acked-by: Jeff Mahoney <jeffm@suse.com>
---
 kdb/Makefile |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/kdb/Makefile b/kdb/Makefile
index 03cd4fb..4a71f75 100644
--- a/kdb/Makefile
+++ b/kdb/Makefile
@@ -39,5 +39,5 @@ quiet_cmd_gen-kdb = GENKDB  $@
 		END {print "extern char *kdb_cmds[]; char __initdata *kdb_cmds[] = {"; for (i = 0; i < cmds; ++i) {print "  kdb_cmd" i ","}; print("  NULL\n};");}' \
 		$(filter-out %/Makefile,$^) > $@
 
-$(obj)/gen-kdb_cmds.c:	$(src)/kdb_cmds $(wildcard $(TOPDIR)/arch/$(KDB_CMDS)) $(src)/Makefile
+$(obj)/gen-kdb_cmds.c:	$(src)/kdb_cmds $(wildcard $(srctree)/arch/$(KDB_CMDS)) $(src)/Makefile
 	$(call cmd,gen-kdb)
-- 
1.5.4.rc3

