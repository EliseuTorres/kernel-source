From: Andrea Arcangeli <aarcange@redhat.com>
Date: Fri, 14 Jan 2011 10:56:38 -0800
Subject: [PATCH] [IA64] fix ia64 build failure in pmdp_get_and_clear
References: THP core (fate #311931)
Patch-mainline: yes
Commit-ID: 6ce1f81f51c7b22f539012e446c01e8c75d20fd9

Implement __pmd macro for ia64 too.

Signed-off-by: Andrea Arcangeli <aarcange@redhat.com>
Signed-off-by: Tony Luck <tony.luck@intel.com>
Signed-off-by: Mel Gorman <mgorman@suse.de>
---
 arch/ia64/include/asm/page.h |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/arch/ia64/include/asm/page.h b/arch/ia64/include/asm/page.h
index aaae2f8..368b646 100644
--- a/arch/ia64/include/asm/page.h
+++ b/arch/ia64/include/asm/page.h
@@ -190,6 +190,7 @@ get_order (unsigned long size)
 # define pgprot_val(x)	((x).pgprot)
 
 # define __pte(x)	((pte_t) { (x) } )
+# define __pmd(x)	((pmd_t) { (x) } )
 # define __pgprot(x)	((pgprot_t) { (x) } )
 
 #else /* !STRICT_MM_TYPECHECKS */
