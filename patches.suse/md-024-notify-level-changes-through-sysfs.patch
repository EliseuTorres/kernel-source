From: Maciej Trela <Maciej.Trela@intel.com>
Date: Wed, 14 Apr 2010 17:17:39 +1000
Subject: [PATCH] md: notify level changes through sysfs.
Git-commit: 5cac7861b2de95a1f714ebdc652813abd0afcc73
Patch-mainline: v2.6.35-rc1

Level changes can be very significant, so make sure
to notify them via sysfs.

Signed-off-by: Maciej Trela <maciej.trela@intel.com>
Signed-off-by: NeilBrown <neilb@suse.de>
---
 drivers/md/md.c |    1 +
 1 file changed, 1 insertion(+)

--- linux-2.6.32-SLE11-SP1.orig/drivers/md/md.c
+++ linux-2.6.32-SLE11-SP1/drivers/md/md.c
@@ -3056,6 +3056,7 @@ level_store(mddev_t *mddev, const char *
 	set_bit(MD_CHANGE_DEVS, &mddev->flags);
 	set_bit(MD_RECOVERY_NEEDED, &mddev->recovery);
 	md_wakeup_thread(mddev->thread);
+	sysfs_notify(&mddev->kobj, NULL, "level");
 	return rv;
 }
 
