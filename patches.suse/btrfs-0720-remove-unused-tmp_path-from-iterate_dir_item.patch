From: Alexander Block <ablock84@googlemail.com>
Date: Wed, 1 Aug 2012 12:03:09 +0200
Patch-mainline: 3.7
Git-commit: 3e126f32f88095ad1bd01b3c451e52aa9094f45c
References: FATE#312888
Subject: [PATCH] Btrfs: remove unused tmp_path from iterate_dir_item

A leftover from older code and unused now.

Reported-by: Alex Lyakas <alex.bolshoy.btrfs@gmail.com>
Signed-off-by: Alexander Block <ablock84@googlemail.com>
Signed-off-by: David Sterba <dsterba@suse.cz>
---
 fs/btrfs/send.c |    8 --------
 1 file changed, 8 deletions(-)

--- a/fs/btrfs/send.c
+++ b/fs/btrfs/send.c
@@ -864,7 +864,6 @@ static int iterate_dir_item(struct send_
 	struct extent_buffer *eb;
 	struct btrfs_item *item;
 	struct btrfs_dir_item *di;
-	struct btrfs_path *tmp_path = NULL;
 	struct btrfs_key di_key;
 	char *buf = NULL;
 	char *buf2 = NULL;
@@ -886,12 +885,6 @@ static int iterate_dir_item(struct send_
 		goto out;
 	}
 
-	tmp_path = alloc_path_for_send();
-	if (!tmp_path) {
-		ret = -ENOMEM;
-		goto out;
-	}
-
 	eb = path->nodes[0];
 	slot = path->slots[0];
 	item = btrfs_item_nr(eb, slot);
@@ -953,7 +946,6 @@ static int iterate_dir_item(struct send_
 	}
 
 out:
-	btrfs_free_path(tmp_path);
 	if (buf_virtual)
 		vfree(buf);
 	else
