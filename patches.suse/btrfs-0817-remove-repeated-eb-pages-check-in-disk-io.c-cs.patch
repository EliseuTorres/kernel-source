From: Wang Sheng-Hui <shhuiw@gmail.com>
Date: Mon, 8 Oct 2012 07:26:15 -0600
Patch-mainline: 3.7
Git-commit: 1037a5affc266fdfe08b2dd415d309ab2778ce6a
References: FATE#312888
Subject: [PATCH] Btrfs: remove repeated eb->pages check in,
 disk-io.c/csum_dirty_buffer

In csum_dirty_buffer, we first get eb from page->private.
Then we check if the page is the first page of eb. Later
we check it again. Remove the repeated check here.

Signed-off-by: Wang Sheng-Hui <shhuiw@gmail.com>
Signed-off-by: David Sterba <dsterba@suse.cz>
---
 fs/btrfs/disk-io.c |    4 ----
 1 file changed, 4 deletions(-)

--- a/fs/btrfs/disk-io.c
+++ b/fs/btrfs/disk-io.c
@@ -434,10 +434,6 @@ static int csum_dirty_buffer(struct btrf
 		WARN_ON(1);
 		return 0;
 	}
-	if (eb->pages[0] != page) {
-		WARN_ON(1);
-		return 0;
-	}
 	if (!PageUptodate(page)) {
 		WARN_ON(1);
 		return 0;
