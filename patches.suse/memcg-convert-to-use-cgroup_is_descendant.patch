From b47f77b5a2243768d5cb1f143ce5e6c28baa271a Mon Sep 17 00:00:00 2001
From: Li Zefan <lizefan@huawei.com>
Date: Mon, 23 Sep 2013 16:55:43 +0800
Subject: [PATCH] memcg: convert to use cgroup_is_descendant()
Git-commit: b47f77b5a2243768d5cb1f143ce5e6c28baa271a
Patch-mainline: 3.13-rc1
References: memcg changes

This is a preparation to kill css_id.

Signed-off-by: Li Zefan <lizefan@huawei.com>
Acked-by: Michal Hocko <mhocko@suse.cz>
Signed-off-by: Tejun Heo <tj@kernel.org>

---
 mm/memcontrol.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/mm/memcontrol.c b/mm/memcontrol.c
index d5ff3ce..aa8363e 100644
--- a/mm/memcontrol.c
+++ b/mm/memcontrol.c
@@ -1318,7 +1318,7 @@ bool __mem_cgroup_same_or_subtree(const struct mem_cgroup *root_memcg,
 		return true;
 	if (!root_memcg->use_hierarchy || !memcg)
 		return false;
-	return css_is_ancestor(&memcg->css, &root_memcg->css);
+	return cgroup_is_descendant(memcg->css.cgroup, root_memcg->css.cgroup);
 }
 
 static bool mem_cgroup_same_or_subtree(const struct mem_cgroup *root_memcg,
-- 
1.7.8.3

