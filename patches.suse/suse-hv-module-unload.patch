Subject: hv: no rmmod for hv_vmbus and hv_utils
From: <ohering@suse.de>
Patch-mainline: Never

The base kernel lacks support for proper rmmod/insmod.

---
 drivers/hv/hv_util.c   |    3 ++-
 drivers/hv/vmbus_drv.c |    3 ++-
 2 files changed, 4 insertions(+), 2 deletions(-)

--- a/drivers/hv/hv_util.c
+++ b/drivers/hv/hv_util.c
@@ -433,15 +433,16 @@ static int __init init_hyperv_utils(void
 	return vmbus_driver_register(&util_drv);
 }
 
+#if 0
 static void exit_hyperv_utils(void)
 {
 	pr_info("De-Registered HyperV Utility Driver\n");
 
 	vmbus_driver_unregister(&util_drv);
 }
+#endif
 
 module_init(init_hyperv_utils);
-module_exit(exit_hyperv_utils);
 
 MODULE_DESCRIPTION("Hyper-V Utilities");
 MODULE_LICENSE("GPL");
--- a/drivers/hv/vmbus_drv.c
+++ b/drivers/hv/vmbus_drv.c
@@ -962,6 +962,7 @@ cleanup:
 	return ret;
 }
 
+#if 0
 static void __exit vmbus_exit(void)
 {
 	int cpu;
@@ -978,9 +979,9 @@ static void __exit vmbus_exit(void)
 	acpi_bus_unregister_driver(&vmbus_acpi_driver);
 	hv_cpu_hotplug_quirk(false);
 }
+#endif
 
 
 MODULE_LICENSE("GPL");
 
 subsys_initcall(hv_acpi_init);
-module_exit(vmbus_exit);
