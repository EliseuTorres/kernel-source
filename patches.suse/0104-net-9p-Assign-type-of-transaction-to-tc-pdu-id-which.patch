From: Venkateswararao Jujjuri (JV) <jvrao@linux.vnet.ibm.com>
Subject: [PATCH 104/111]     [net/9p] Assign type of transaction to tc->pdu->id which is otherwise unsed.
Git-commit: 9bb6c10a4ed48aef49a7243a6f798694722cf380
Patch-Mainline: 2.6.39
References: FATE#311639

    This will be used by the transport layer to determine the out going
    request type. Transport layer uses this information to correctly
    place the mapped pages in the PDU. Patches following this will make
    use of this to achieve zero copy.

	upstream commit 9bb6c10a4ed48aef49a7243a6f798694722cf380

    Signed-off-by: Venkateswararao Jujjuri <jvrao@linux.vnet.ibm.com>
    Signed-off-by: Eric Van Hensbergen <ericvh@gmail.com>
Signed-off-by: Harsh Prateek Bora <harsh@linux.vnet.ibm.com>
Acked-by: Bruce Rogers <brogers@suse.com>
---
 net/9p/protocol.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/net/9p/protocol.c b/net/9p/protocol.c
index d33dc14..7d2efbd 100644
--- a/net/9p/protocol.c
+++ b/net/9p/protocol.c
@@ -576,6 +576,7 @@ EXPORT_SYMBOL(p9stat_read);
 
 int p9pdu_prepare(struct p9_fcall *pdu, int16_t tag, int8_t type)
 {
+	pdu->id = type;
 	return p9pdu_writef(pdu, 0, "dbw", 0, type, tag);
 }
 
-- 
1.7.1.1

