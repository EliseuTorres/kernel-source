From: Josef Bacik <jbacik@fusionio.com>
Date: Fri, 5 Oct 2012 16:43:45 -0400
Patch-mainline: pending
References: FATE#306586
Subject: [PATCH] Btrfs: do not warn_on when we cannot alloc a page for
 an extent buffer
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

It's just annoying and the user will have gotten a nice OOM killer message
so they are already fully aware they are screwed :).  Thanks,

Reported-by: Jérôme Poulin <jeromepoulin@gmail.com>
Signed-off-by: Josef Bacik <jbacik@fusionio.com>
Signed-off-by: David Sterba <dsterba@suse.cz>
---
 fs/btrfs/extent_io.c |    5 ++---
 1 files changed, 2 insertions(+), 3 deletions(-)

diff --git a/fs/btrfs/extent_io.c b/fs/btrfs/extent_io.c
index d0479a7..5713e99 100644
--- a/fs/btrfs/extent_io.c
+++ b/fs/btrfs/extent_io.c
@@ -3805,10 +3805,9 @@ struct extent_buffer *alloc_extent_buffer(struct extent_io_tree *tree,
 	}
 	for (; i < num_pages; i++, index++) {
 		p = find_or_create_page(mapping, index, GFP_NOFS);
-		if (!p) {
-			WARN_ON(1);
+		if (!p)
 			goto free_eb;
-		}
+
 		set_page_extent_mapped(p);
 		mark_page_accessed(p);
 		if (i == 0) {
-- 
1.7.6.233.gd79bc

