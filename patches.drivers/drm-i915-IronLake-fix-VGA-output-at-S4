From: Takashi Iwai <tiwai@suse.de>
Subject: Fix IronLake VGA output at S4
Patch-mainline: Discussed
References: bnc#595755

Calling drm_helper_resume_force_mode() fixes magically the broken VGA
output after S4.

This patch should be replaced with a correct fix in future once when
it's available.

Tracked in kernel bugzilla,
	https://bugzilla.kernel.org/show_bug.cgi?id=15835

Signed-off-by: Takashi Iwai <tiwai@suse.de>

---
 drivers/gpu/drm/i915/i915_drv.c |    2 ++
 1 file changed, 2 insertions(+)

--- a/drivers/gpu/drm/i915/i915_drv.c
+++ b/drivers/gpu/drm/i915/i915_drv.c
@@ -123,6 +123,8 @@
 	if (drm_core_check_feature(dev, DRIVER_MODESET)) {
 		/* Resume the modeset for every activated CRTC */
 		drm_helper_resume_force_mode(dev);
+		if (IS_IGDNG(dev))
+			drm_helper_resume_force_mode(dev);
 	}
 
 	dev_priv->modeset_on_lid = 0;
