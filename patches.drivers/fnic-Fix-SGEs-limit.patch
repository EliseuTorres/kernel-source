From: Hiral Patel <hiralpat@cisco.com>
Date: Tue, 18 Dec 2012 10:15:56 -0800
Subject: fnic: Fix SGEs limit
Git-commit: scsi-misc 9e23ec32e48a4e0591d7d2a868bc456d5f136338
References: FATE#314014
Patch-Mainline: included in scsi-misc

Driver allows IOs with more SGEs than max SGEs supported by Palo.
The current max SGEs supported by the fnic driver is 1024. The
current register settings on Palo supports a max of 256 only.
Palo would return any IO with more than 256 SGEs with an error
indicating INVALID_SGLS. Fnic driver should limit the max supported
SGLs in the driver to 256 to avoid this error.

Signed-off-by: Sesidhar Baddela <sebaddel@cisco.com>
Signed-off-by: Hiral Patel <hiralpat@cisco.com>
Acked-by: Hannes Reinecke <hare@suse.de>
---
 drivers/scsi/fnic/fnic_io.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/scsi/fnic/fnic_io.h b/drivers/scsi/fnic/fnic_io.h
index f0b8969..3455c34 100644
--- a/drivers/scsi/fnic/fnic_io.h
+++ b/drivers/scsi/fnic/fnic_io.h
@@ -21,7 +21,7 @@
 #include <scsi/fc/fc_fcp.h>
 
 #define FNIC_DFLT_SG_DESC_CNT  32
-#define FNIC_MAX_SG_DESC_CNT        1024    /* Maximum descriptors per sgl */
+#define FNIC_MAX_SG_DESC_CNT        256     /* Maximum descriptors per sgl */
 #define FNIC_SG_DESC_ALIGN          16      /* Descriptor address alignment */
 
 struct host_sg_desc {
-- 
1.7.4.2

