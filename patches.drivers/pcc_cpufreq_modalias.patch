From: Thomas Renninger <trenn@suse.de>
Subject: CPUFREQ: Try to load pcc driver on HP ProLiants automatically
Patch-mainline: no, but submitted (cpufreq@vger.kernel.org)
References: bnc#874496

HP ProLiants are sold with CPU frequency controlled by BIOS by default.
The pcc-cpufreq driver still exports some frequency info to userspace and
should be tried to get loaded on these platforms.

Successfully tested on a recent ProLiant machine:
  - without this patch no pcc-cpufreq driver loaded, no frequency info
  - with this patch the driver got autoloaded

Signed-off-by: Thomas Renninger <trenn@suse.de>

diff --git a/drivers/cpufreq/pcc-cpufreq.c b/drivers/cpufreq/pcc-cpufreq.c
index 728a2d8..ff1ebd0 100644
--- a/drivers/cpufreq/pcc-cpufreq.c
+++ b/drivers/cpufreq/pcc-cpufreq.c
@@ -603,6 +603,8 @@ static void __exit pcc_cpufreq_exit(void)
 	free_percpu(pcc_cpu_info);
 }
 
+MODULE_ALIAS("dmi:*:svnHP:pnProLiant*:*");
+
 MODULE_AUTHOR("Matthew Garrett, Naga Chumbalkar");
 MODULE_VERSION(PCC_VERSION);
 MODULE_DESCRIPTION("Processor Clocking Control interface driver");
