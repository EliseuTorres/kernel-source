From bc8fdfbe75058c6569dd6a08bdc2a411db533c47 Mon Sep 17 00:00:00 2001
From: Jingoo Han <jg1.han@samsung.com>
Date: Tue, 30 Jul 2013 19:58:51 +0900
Subject: [PATCH] watchdog: use dev_get_platdata()

Git-commit: bc8fdfbe75058c6569dd6a08bdc2a411db533c47
Patch-mainline: v3.13-rc1
References: bnc#946374
Target: SLE-12 SP1

Use the wrapper function for retrieving the platform data instead of
accessing dev->platform_data directly.

Joey Lee:
Only backport the part of iTCO_wdt.c

Signed-off-by: Jingoo Han <jg1.han@samsung.com>
Reviewed-by: Guenter Roeck <linux@roeck-us.net>
Signed-off-by: Wim Van Sebroeck <wim@iguana.be>
Acked-by: Lee, Chun-Yi <jlee@suse.com>
---
 drivers/watchdog/iTCO_wdt.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/drivers/watchdog/iTCO_wdt.c
+++ b/drivers/watchdog/iTCO_wdt.c
@@ -415,7 +415,7 @@ static int iTCO_wdt_probe(struct platfor
 {
 	int ret = -ENODEV;
 	unsigned long val32;
-	struct lpc_ich_info *ich_info = dev->dev.platform_data;
+	struct lpc_ich_info *ich_info = dev_get_platdata(&dev->dev);
 
 	if (!ich_info)
 		goto out;
