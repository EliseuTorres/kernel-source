From 3c5948cea1ff91c4032c82d0628f4b0ed878ed21 Mon Sep 17 00:00:00 2001
From: Michael Chan <mchan@broadcom.com>
Date: Wed, 13 Jul 2011 17:24:18 +0000
Subject: [PATCH 2/6] cnic: Fix port_mode setting
Git-commit: b7d40315c9643034ac4b5c9dda480d0124416f89
Patch-mainline: 3.1-rc1
References: bnc#709063

Upstream commit: b7d40315c9643034ac4b5c9dda480d0124416f89

CHIP_2_PORT_MODE was not set correctly.

Signed-off-by: Michael Chan <mchan@broadcom.com>
Reviewed-by: Matt Carlson <mcarlson@broadcom.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
Acked-by: Jeff Mahoney <jeffm@suse.com>
---
 drivers/net/cnic.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/net/cnic.c b/drivers/net/cnic.c
index fb61a71..f353b3e 100644
--- a/drivers/net/cnic.c
+++ b/drivers/net/cnic.c
@@ -4837,7 +4837,7 @@ static int cnic_start_bnx2x_hw(struct cnic_dev *dev)
 			cp->port_mode = CHIP_4_PORT_MODE;
 			cp->pfid = func >> 1;
 		} else {
-			cp->port_mode = CHIP_4_PORT_MODE;
+			cp->port_mode = CHIP_2_PORT_MODE;
 			cp->pfid = func & 0x6;
 		}
 	} else {
-- 
1.7.1.GIT



