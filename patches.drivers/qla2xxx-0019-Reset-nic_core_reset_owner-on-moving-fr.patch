From: Sawan Chandak <sawan.chandak@qlogic.com>
Date: Wed, 30 Oct 2013 03:38:26 -0400
Subject: [SCSI] qla2xxx: Reset nic_core_reset_owner on moving from COLD to
 READY for ISP8044
References: bnc#853689,FATE#315933
Patch-Mainline: queued for v3.14
Git-commit: scsi-misc 7446a8aa0ca69e7e457164a702f3c11a543f68d1

Signed-off-by: Sawan Chandak <sawan.chandak@qlogic.com>
Signed-off-by: Saurav Kashyap <saurav.kashyap@qlogic.com>
Signed-off-by: James Bottomley <JBottomley@Parallels.com>
Acked-by: Hannes Reinecke <hare@suse.de>
---
 drivers/scsi/qla2xxx/qla_nx2.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/scsi/qla2xxx/qla_nx2.c b/drivers/scsi/qla2xxx/qla_nx2.c
index 6f509f8..cc3522f 100644
--- a/drivers/scsi/qla2xxx/qla_nx2.c
+++ b/drivers/scsi/qla2xxx/qla_nx2.c
@@ -1860,7 +1860,7 @@ qla8044_device_state_handler(struct scsi_qla_host *vha)
 			goto exit;
 		case QLA8XXX_DEV_COLD:
 			rval = qla8044_device_bootstrap(vha);
-			goto exit;
+			break;
 		case QLA8XXX_DEV_INITIALIZING:
 			qla8044_idc_unlock(ha);
 			msleep(1000);
-- 
1.7.12.4

