From fd4f7f7f5b106bd3fc6cd2d341d245ae1719423f Mon Sep 17 00:00:00 2001
From: Johan Hovold <jhovold@gmail.com>
Date: Mon, 26 Mar 2012 21:01:50 +0200
Subject: [PATCH 2/2] USB: add EOPNOTSUPP to usb_translate_errors
References: bnc#806908
Git-Commit: 67c88382e0bf92d7e09536ac47674c9fc9398b98
Patch-Mainline: v3.5

Allow drivers to return EOPNOTSUPP to user space even when filtered
through usb_translate_errors.

Signed-off-by: Johan Hovold <jhovold@gmail.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Signed-off-by: Oliver Neukum <oneukum@suse.de>
---
 include/linux/usb.h |    1 +
 1 file changed, 1 insertion(+)

diff --git a/include/linux/usb.h b/include/linux/usb.h
index 024f372..0dc7fd8 100644
--- a/include/linux/usb.h
+++ b/include/linux/usb.h
@@ -1626,6 +1626,7 @@ static inline int usb_translate_errors(int error_code)
 	case 0:
 	case -ENOMEM:
 	case -ENODEV:
+	case -EOPNOTSUPP:
 		return error_code;
 	default:
 		return -EIO;
-- 
1.7.10.4

