From: Ben Hutchings <bhutchings@solarflare.com>
Date: Wed, 16 Oct 2013 18:32:39 +0100
Subject: [PATCH v2 182/244] sfc: Do not use MAC address as clock name
Patch-mainline: v3.14-rc1
Git-commit: c1dbdea98d9b32090d5d3e575d60464eb68616d1
References: bsc#909618 FATE#317521

We'll be sharing clocks between multiple functions with their own MAC
addresses.  The name field is now documented as 'A short "friendly
name" to identify the clock ...' and '... not meant to be a unique
id.'  So use the name 'sfc'.

Signed-off-by: Ben Hutchings <bhutchings@solarflare.com>
Acked-by: David Chang <dchang@suse.com>
---
 drivers/net/ethernet/sfc/ptp.c |    5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

--- a/drivers/net/ethernet/sfc/ptp.c
+++ b/drivers/net/ethernet/sfc/ptp.c
@@ -965,9 +965,8 @@ int efx_ptp_probe(struct efx_nic *efx, s
 	ptp->evt_overflow = false;
 
 	ptp->phc_clock_info.owner = THIS_MODULE;
-	snprintf(ptp->phc_clock_info.name,
-		 sizeof(ptp->phc_clock_info.name),
-		 "%pm", efx->net_dev->perm_addr);
+	strlcpy(ptp->phc_clock_info.name, "sfc",
+		sizeof(ptp->phc_clock_info.name));
 	ptp->phc_clock_info.max_adj = MAX_PPB;
 	ptp->phc_clock_info.n_alarm = 0;
 	ptp->phc_clock_info.n_ext_ts = 0;
