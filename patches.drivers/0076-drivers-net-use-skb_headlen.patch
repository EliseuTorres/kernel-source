From: Eric Dumazet <eric.dumazet@gmail.com>
Date: Wed, 14 Apr 2010 15:59:40 -0700
Subject: drivers: net: use skb_headlen()
References: bnc#699092, fate#311825
Patch-mainline: v2.6.35
Git-commit: e743d31312d00932391b123dfac3324d2b9e8c81

replaces (skb->len - skb->data_len) occurrences by skb_headlen(skb)

Signed-off-by: Eric Dumazet <eric.dumazet@gmail.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
Acked-by: Cho, Yu-Chen <acho@suse.com>
---
 drivers/net/e1000e/netdev.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

--- a/drivers/net/e1000e/netdev.c
+++ b/drivers/net/e1000e/netdev.c
@@ -4113,7 +4113,7 @@ static netdev_tx_t e1000_xmit_frame(stru
 	unsigned int max_per_txd = E1000_MAX_PER_TXD;
 	unsigned int max_txd_pwr = E1000_MAX_TXD_PWR;
 	unsigned int tx_flags = 0;
-	unsigned int len = skb->len - skb->data_len;
+	unsigned int len = skb_headlen(skb);
 	unsigned int nr_frags;
 	unsigned int mss;
 	int count = 0;
@@ -4163,7 +4163,7 @@ static netdev_tx_t e1000_xmit_frame(stru
 				dev_kfree_skb_any(skb);
 				return NETDEV_TX_OK;
 			}
-			len = skb->len - skb->data_len;
+			len = skb_headlen(skb);
 		}
 	}
 
