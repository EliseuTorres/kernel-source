From: Hidetoshi Seto <seto.hidetoshi@jp.fujitsu.com>
Subject: i7core_edac: Use saved pointers
References: fate#311968
Patch-Mainline: yes
Git-commit: 73589c80cd0dab94db50800c4834a8d8522cd54f


Signed-off-by: Thomas Renninger <trenn@suse.de>

We already have saved pointers.  Use shorter ones.

Signed-off-by: Hidetoshi Seto <seto.hidetoshi@jp.fujitsu.com>
Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

---
 drivers/edac/i7core_edac.c |    5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

Index: linux-2.6.32-SLE11-SP1/drivers/edac/i7core_edac.c
===================================================================
--- linux-2.6.32-SLE11-SP1.orig/drivers/edac/i7core_edac.c
+++ linux-2.6.32-SLE11-SP1/drivers/edac/i7core_edac.c
@@ -2100,7 +2100,7 @@ static void __devexit i7core_remove(stru
 	}
 
 	list_for_each_entry(i7core_dev, &i7core_edac_list, list) {
-		mci = find_mci_by_dev(&i7core_dev->pdev[0]->dev);
+		mci = i7core_dev->mci;
 		if (unlikely(!mci || !mci->pvt_info)) {
 			debugf0("MC: " __FILE__ ": %s(): dev = %p\n",
 				__func__, &i7core_dev->pdev[0]->dev);
@@ -2109,7 +2109,6 @@ static void __devexit i7core_remove(stru
 				      "Couldn't find mci hanler\n");
 		} else {
 			pvt = mci->pvt_info;
-			i7core_dev = pvt->i7core_dev;
 
 			debugf0("MC: " __FILE__ ": %s(): mci = %p, dev = %p\n",
 				__func__, mci, &i7core_dev->pdev[0]->dev);
@@ -2121,7 +2120,7 @@ static void __devexit i7core_remove(stru
 			i7core_pci_ctl_release(pvt);
 
 			/* Remove MC sysfs nodes */
-			edac_mc_del_mc(&i7core_dev->pdev[0]->dev);
+			edac_mc_del_mc(mci->dev);
 
 			debugf1("%s: free mci struct\n", mci->ctl_name);
 			kfree(mci->ctl_name);
