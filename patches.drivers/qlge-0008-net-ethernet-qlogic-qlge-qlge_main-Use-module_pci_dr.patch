From: =?UTF-8?q?Peter=20H=C3=BCwe?= <PeterHuewe@gmx.de>
Date: Tue, 21 May 2013 12:58:08 +0000
Subject: [PATCH 08/32] net/ethernet/qlogic/qlge/qlge_main: Use
 module_pci_driver to register driver
Patch-mainline: v3.11-rc1
Git-commit: 70a611debe964ae508d67528d82ca7fa0715f5a3
References: bsc#909361 FATE#317547

Removing some boilerplate by using module_pci_driver instead of calling
register and unregister in the otherwise empty init/exit functions.

Signed-off-by: Peter Huewe <peterhuewe@gmx.de>
Signed-off-by: David S. Miller <davem@davemloft.net>
Acked-by: Gary Ching-Pang Lin <glin@suse.com>
---
 drivers/net/ethernet/qlogic/qlge/qlge_main.c |   13 +------------
 1 file changed, 1 insertion(+), 12 deletions(-)

--- a/drivers/net/ethernet/qlogic/qlge/qlge_main.c
+++ b/drivers/net/ethernet/qlogic/qlge/qlge_main.c
@@ -4932,15 +4932,4 @@ static struct pci_driver qlge_driver = {
 	.err_handler = &qlge_err_handler
 };
 
-static int __init qlge_init_module(void)
-{
-	return pci_register_driver(&qlge_driver);
-}
-
-static void __exit qlge_exit(void)
-{
-	pci_unregister_driver(&qlge_driver);
-}
-
-module_init(qlge_init_module);
-module_exit(qlge_exit);
+module_pci_driver(qlge_driver);
