Date:	Mon, 13 Aug 2012 19:57:03 +0300
From:	Dan Carpenter <dan.carpenter@oracle.com>
To:	Sarah Sharp <sarah.a.sharp@linux.intel.com>
Cc:	Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
	linux-usb@vger.kernel.org, kernel-janitors@vger.kernel.org
Subject: [patch] xhci: Fix a logical vs bitwise AND bug
Message-ID: <20120813165703.GA5363@elgon.mountain>
References: bnc#772427
Patch-Mainline: v2.6.36-rc2

The intent was to test whether the flag was set.

Signed-off-by: Dan Carpenter <dan.carpenter@oracle.com>
Signed-off-by: Oliver Neukum <oneukum@suse.de>

diff --git a/drivers/usb/host/xhci.c b/drivers/usb/host/xhci.c
index c59d5b5..617b0a7 100644
--- a/drivers/usb/host/xhci.c
+++ b/drivers/usb/host/xhci.c
@@ -659,7 +659,7 @@ void xhci_shutdown(struct usb_hcd *hcd)
 {
 	struct xhci_hcd *xhci = hcd_to_xhci(hcd);
 
-	if (xhci->quirks && XHCI_SPURIOUS_REBOOT)
+	if (xhci->quirks & XHCI_SPURIOUS_REBOOT)
 		usb_disable_xhci_ports(to_pci_dev(hcd->self.controller));
 
 	spin_lock_irq(&xhci->lock);
--

