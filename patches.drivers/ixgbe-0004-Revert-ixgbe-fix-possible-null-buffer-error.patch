From: Benjamin Poirier <bpoirier@suse.de>
Date: Mon, 28 Jan 2013 14:14:15 -0500
Subject: Revert "ixgbe: fix possible null buffer error"
Patch-mainline: Never, simplifies backport
References: bnc#795303 FATE#313662

This reverts commit b73077a5fce232f3e95099f3bd9c084ab320aa85.

Signed-off-by: Benjamin Poirier <bpoirier@suse.de>
---
 drivers/net/ixgbe/ixgbe_main.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)
--- a/drivers/net/ixgbe/ixgbe_main.c
+++ b/drivers/net/ixgbe/ixgbe_main.c
@@ -1371,8 +1371,8 @@ static void ixgbe_clean_rx_irq(struct ix
 		if (ring_is_rsc_enabled(rx_ring))
 			pkt_is_rsc = ixgbe_get_rsc_state(rx_desc);
 
-		/* linear means we are building an skb from multiple pages */
-		if (!skb_is_nonlinear(skb)) {
+		/* if this is a skb from previous receive DMA will be 0 */
+		if (rx_buffer_info->dma) {
 			u16 hlen;
 			if (pkt_is_rsc &&
 			    !(staterr & IXGBE_RXD_STAT_EOP) &&
