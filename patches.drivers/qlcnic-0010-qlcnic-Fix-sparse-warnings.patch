From: Rajesh Borundia <rajesh.borundia@qlogic.com>
Date: Tue, 2 Apr 2013 05:34:42 +0000
Subject: [PATCH 010/270] qlcnic: Fix sparse warnings.
Patch-mainline: v3.10-rc1
Git-commit: 0c453de6d53b5aabfee817abf0f69e9534c751c1
References: bsc#909350 FATE#317546

warning: 'pf_info.max_tx_ques' may be used uninitialized in this function
[-Wmaybe-uninitialized]

Signed-off-by: Rajesh Borundia <rajesh.borundia@qlogic.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
Acked-by: Shahed Shaikh <shahed.shaikh@qlogic.com>
Acked-by: Gary Ching-Pang Lin <glin@suse.com>
---
 drivers/net/ethernet/qlogic/qlcnic/qlcnic_sriov_pf.c |    3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

--- a/drivers/net/ethernet/qlogic/qlcnic/qlcnic_sriov_pf.c
+++ b/drivers/net/ethernet/qlogic/qlcnic/qlcnic_sriov_pf.c
@@ -156,6 +156,7 @@ static int qlcnic_sriov_get_pf_info(stru
 	npar_info->max_local_ipv6_addrs = LSW(cmd.rsp.arg[8]);
 	npar_info->max_remote_ipv6_addrs = MSW(cmd.rsp.arg[8]);
 
+	qlcnic_sriov_pf_set_ff_max_res(adapter, npar_info);
 	dev_info(&adapter->pdev->dev,
 		 "\n\ttotal_pf: %d,\n"
 		 "\n\ttotal_rss_engines: %d max_vports: %d max_tx_ques %d,\n"
@@ -376,8 +377,6 @@ static int qlcnic_sriov_pf_init(struct q
 	if (err)
 		goto delete_vport;
 
-	qlcnic_sriov_pf_set_ff_max_res(adapter, &pf_info);
-
 	err = qlcnic_get_nic_info(adapter, &nic_info, func);
 	if (err)
 		goto delete_vport;
