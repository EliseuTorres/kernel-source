From padmanabh.ratnakar@emulex.com  Thu Jun 23 15:40:25 2011
From: Padmanabh Ratnakar <padmanabh.ratnakar@emulex.com>
Date: Tue, 15 Mar 2011 14:57:09 -0700
Subject: [PATCH] be2net: Fix UDP packet detected status in RX compl
Git-commit: 9ecb42fda614c4e4f46e95712621510f8d746980
Patch-mainline: v2.6.39-rc1
References: FATE#311448, bnc#697255

Status of UDP packet detection not getting populated in RX completion
structure. This is required in csum_passed() routine.

Signed-off-by: Padmanabh Ratnakar <padmanabh.ratnakar@emulex.com>
Signed-off-by: Sathya Perla <sathya.perla@emulex.com>
Signed-off-by: David S. Miller <davem@davemloft.net>

Acked-by: Jeff Mahoney <jeffm@suse.com>
---
 drivers/net/benet/be_main.c |    2 ++
 1 file changed, 2 insertions(+)
--- a/drivers/net/benet/be_main.c
+++ b/drivers/net/benet/be_main.c
@@ -999,6 +999,7 @@ static void be_parse_rx_compl_v1(struct
 	rxcp->vlanf = AMAP_GET_BITS(struct amap_eth_rx_compl_v1, vtp, compl);
 	rxcp->err = AMAP_GET_BITS(struct amap_eth_rx_compl_v1, err, compl);
 	rxcp->tcpf = AMAP_GET_BITS(struct amap_eth_rx_compl_v1, tcpf, compl);
+	rxcp->udpf = AMAP_GET_BITS(struct amap_eth_rx_compl_v1, udpf, compl);
 	rxcp->ip_csum =
 		AMAP_GET_BITS(struct amap_eth_rx_compl_v1, ipcksm, compl);
 	rxcp->l4_csum =
@@ -1024,6 +1025,7 @@ static void be_parse_rx_compl_v0(struct
 	rxcp->vlanf = AMAP_GET_BITS(struct amap_eth_rx_compl_v0, vtp, compl);
 	rxcp->err = AMAP_GET_BITS(struct amap_eth_rx_compl_v0, err, compl);
 	rxcp->tcpf = AMAP_GET_BITS(struct amap_eth_rx_compl_v0, tcpf, compl);
+	rxcp->udpf = AMAP_GET_BITS(struct amap_eth_rx_compl_v0, udpf, compl);
 	rxcp->ip_csum =
 		AMAP_GET_BITS(struct amap_eth_rx_compl_v0, ipcksm, compl);
 	rxcp->l4_csum =
