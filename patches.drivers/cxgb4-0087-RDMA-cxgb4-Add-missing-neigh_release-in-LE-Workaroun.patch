From: Kumar Sanghvi <kumaras@chelsio.com>
Date: Thu, 6 Feb 2014 16:00:16 +0530
Subject: [PATCH 087/223] RDMA/cxgb4: Add missing neigh_release in
 LE-Workaround path
Patch-mainline: v3.14-rc3
Git-commit: 0f0132001fd239bb67c1f68436b95cc79de89736
References: bsc#909577 FATE#317550

Signed-off-by: Kumar Sanghvi <kumaras@chelsio.com>
Signed-off-by: Hariprasad Shenai <hariprasad@chelsio.com>
Signed-off-by: Roland Dreier <roland@purestorage.com>
Acked-by: David Chang <dchang@suse.com>
Signed-off-by: John Jolly <jjolly@suse.de>
---
 drivers/infiniband/hw/cxgb4/cm.c |    1 +
 1 file changed, 1 insertion(+)

--- a/drivers/infiniband/hw/cxgb4/cm.c
+++ b/drivers/infiniband/hw/cxgb4/cm.c
@@ -3110,6 +3110,7 @@ static int rx_pkt(struct c4iw_dev *dev,
 		goto free_dst;
 	}
 
+	neigh_release(neigh);
 	step = dev->rdev.lldi.nrxq / dev->rdev.lldi.nchan;
 	rss_qid = dev->rdev.lldi.rxq_ids[pi->port_id * step];
 	window = (__force u16) htons((__force u16)tcph->window);
