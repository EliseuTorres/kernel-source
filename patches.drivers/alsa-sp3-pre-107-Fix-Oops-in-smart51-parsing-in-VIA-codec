From 21d45d2ba97fa5bcb41b444095338dde792026d3 Mon Sep 17 00:00:00 2001
From: Takashi Iwai <tiwai@suse.de>
Date: Fri, 8 Jul 2011 11:35:11 +0200
Subject: [PATCH] ALSA: hda - Fix Oops in smart51 parsing in VIA codec
Git-commit: 21d45d2ba97fa5bcb41b444095338dde792026d3
Patch-mainline: 3.1-rc2
References: FATE#314310

Typical off-by-one thinko.

Signed-off-by: Takashi Iwai <tiwai@suse.de>

---
 sound/pci/hda/patch_via.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/sound/pci/hda/patch_via.c
+++ b/sound/pci/hda/patch_via.c
@@ -1802,7 +1802,7 @@ static void mangle_smart51(struct hda_co
 			for (j = 0; j < nums; j++)
 				if (ins[pins[j]].type < ins[i].type) {
 					memmove(pins + j + 1, pins + j,
-						(nums - j - 1) * sizeof(int));
+						(nums - j) * sizeof(int));
 					break;
 				}
 			pins[j] = i;
