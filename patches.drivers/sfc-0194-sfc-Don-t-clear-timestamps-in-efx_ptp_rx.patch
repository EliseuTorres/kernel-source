From: Ben Hutchings <bhutchings@solarflare.com>
Date: Thu, 28 Nov 2013 18:58:11 +0000
Subject: [PATCH v2 194/244] sfc: Don't clear timestamps in efx_ptp_rx()
Patch-mainline: v3.14-rc1
Git-commit: a45a3a5cdc8dca283e4373045aae8af485f07a07
References: bsc#909618 FATE#317521

A freshly allocated skb starts with timestamps clear.

Signed-off-by: Ben Hutchings <bhutchings@solarflare.com>
Acked-by: David Chang <dchang@suse.com>
---
 drivers/net/ethernet/sfc/ptp.c |    6 ------
 1 file changed, 6 deletions(-)

--- a/drivers/net/ethernet/sfc/ptp.c
+++ b/drivers/net/ethernet/sfc/ptp.c
@@ -1323,14 +1323,8 @@ static bool efx_ptp_rx(struct efx_channe
 
 	/* Does this packet require timestamping? */
 	if (ntohs(*(__be16 *)&skb->data[PTP_DPORT_OFFSET]) == PTP_EVENT_PORT) {
-		struct skb_shared_hwtstamps *timestamps;
-
 		match->state = PTP_PACKET_STATE_UNMATCHED;
 
-		/* Clear all timestamps held: filled in later */
-		timestamps = skb_hwtstamps(skb);
-		memset(timestamps, 0, sizeof(*timestamps));
-
 		/* We expect the sequence number to be in the same position in
 		 * the packet for PTP V1 and V2
 		 */
