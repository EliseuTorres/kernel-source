From 60678b60d78cd268a3aed3044dfbbb85760b2c54 Mon Sep 17 00:00:00 2001
From: Oliver Neukum <oliver@neukum.org>
Date: Sun, 19 Dec 2010 21:54:48 +0100
Subject: USB: add helper to convert USB error codes
Patch-mainline: v2.6.39
Git-commit: 60678b60d78cd268a3aed3044dfbbb85760b2c54

This converts error codes specific to USB to generic error codes
that can be returned to user space. Tests showed that it is so small
that it is better inlined.

Signed-off-by: Oliver Neukum <oneukum@suse.de>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

---
 drivers/usb/core/usb.h |   13 +++++++++++++
 1 file changed, 13 insertions(+)

--- a/drivers/usb/core/usb.h
+++ b/drivers/usb/core/usb.h
@@ -161,6 +161,19 @@ static inline int is_active(const struct
 	return f->is_active;
 }
 
+/* translate USB error codes to codes user space understands */
+static inline int usb_translate_errors(int error_code)
+{
+	switch (error_code) {
+	case 0:
+	case -ENOMEM:
+	case -ENODEV:
+		return error_code;
+	default:
+		return -EIO;
+	}
+}
+
 
 /* for labeling diagnostics */
 extern const char *usbcore_name;
