From: Brandon Philips <bphilips@suse.de>
Subject: enic: return err in vnic_dev_*_addr
Patch-mainline: Never, backport
Git-commit: f8bd909183acffad68780b10c1cdf36161cfd5d1
References: bnc#6382582
Patch-mainline: v2.6.35-rc1~473^2~32

vnic_dev_del_addr and vnic_dev_add_addr need to return err for the next
cleanup patch to work. Upstream made this change along with others in
the patch "net: Add ndo_{set|get}_vf_port support for enic dynamic
vnics"

Signed-off-by: Brandon Philips <bphilips@suse.de>

---
 drivers/net/enic/vnic_dev.c |    8 ++++++--
 drivers/net/enic/vnic_dev.h |    4 ++--
 2 files changed, 8 insertions(+), 4 deletions(-)

--- a/drivers/net/enic/vnic_dev.c
+++ b/drivers/net/enic/vnic_dev.c
@@ -567,7 +567,7 @@ void vnic_dev_packet_filter(struct vnic_
 		printk(KERN_ERR "Can't set packet filter\n");
 }
 
-void vnic_dev_add_addr(struct vnic_dev *vdev, u8 *addr)
+int vnic_dev_add_addr(struct vnic_dev *vdev, u8 *addr)
 {
 	u64 a0 = 0, a1 = 0;
 	int wait = 1000;
@@ -580,9 +580,11 @@ void vnic_dev_add_addr(struct vnic_dev *
 	err = vnic_dev_cmd(vdev, CMD_ADDR_ADD, &a0, &a1, wait);
 	if (err)
 		printk(KERN_ERR "Can't add addr [%pM], %d\n", addr, err);
+
+	return err;
 }
 
-void vnic_dev_del_addr(struct vnic_dev *vdev, u8 *addr)
+int vnic_dev_del_addr(struct vnic_dev *vdev, u8 *addr)
 {
 	u64 a0 = 0, a1 = 0;
 	int wait = 1000;
@@ -595,6 +597,8 @@ void vnic_dev_del_addr(struct vnic_dev *
 	err = vnic_dev_cmd(vdev, CMD_ADDR_DEL, &a0, &a1, wait);
 	if (err)
 		printk(KERN_ERR "Can't del addr [%pM], %d\n", addr, err);
+
+	return err;
 }
 
 int vnic_dev_set_ig_vlan_rewrite_mode(struct vnic_dev *vdev,
--- a/drivers/net/enic/vnic_dev.h
+++ b/drivers/net/enic/vnic_dev.h
@@ -103,8 +103,8 @@ int vnic_dev_stats_dump(struct vnic_dev
 int vnic_dev_hang_notify(struct vnic_dev *vdev);
 void vnic_dev_packet_filter(struct vnic_dev *vdev, int directed, int multicast,
 	int broadcast, int promisc, int allmulti);
-void vnic_dev_add_addr(struct vnic_dev *vdev, u8 *addr);
-void vnic_dev_del_addr(struct vnic_dev *vdev, u8 *addr);
+int vnic_dev_add_addr(struct vnic_dev *vdev, u8 *addr);
+int vnic_dev_del_addr(struct vnic_dev *vdev, u8 *addr);
 int vnic_dev_mac_addr(struct vnic_dev *vdev, u8 *mac_addr);
 int vnic_dev_raise_intr(struct vnic_dev *vdev, u16 intr);
 int vnic_dev_notify_setcmd(struct vnic_dev *vdev,
