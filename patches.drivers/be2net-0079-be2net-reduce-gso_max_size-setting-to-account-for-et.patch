From: Sarveshwar Bandi <sarveshwar.bandi@emulex.com>
Date: Wed, 13 Jun 2012 19:51:43 +0000
Subject: [PATCH 079/143] be2net: reduce gso_max_size setting to account for
 ethernet header.
Patch-mainline: v3.5-rc5
Git-commit: b7e5887e0e414bde0a2f311ae3fbea5611562e29
References: bnc#777565 FATE#313819

The maximum size of packet that can be handled by controller including ethernet
header is 65535. Reducing gso_max_size accordingly.

Signed-off-by: Sarveshwar Bandi <sarveshwar.bandi@emulex.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
Acked-by: Benjamin Poirier <bpoirier@suse.de>
---
 drivers/net/ethernet/emulex/benet/be_main.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/drivers/net/ethernet/emulex/benet/be_main.c
+++ b/drivers/net/ethernet/emulex/benet/be_main.c
@@ -3226,7 +3226,7 @@ static void be_netdev_init(struct net_de
 
 	netdev->flags |= IFF_MULTICAST;
 
-	netif_set_gso_max_size(netdev, 65535);
+	netif_set_gso_max_size(netdev, 65535 - ETH_HLEN);
 
 	netdev->netdev_ops = &be_netdev_ops;
 
