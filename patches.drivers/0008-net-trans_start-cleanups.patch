From: Eric Dumazet <eric.dumazet@gmail.com>
Date: Mon, 10 May 2010 05:01:31 -0700
Subject: [PATCH 8/22] net: trans_start cleanups
References: bnc#674189, fate#311981
Patch-mainline: v2.6.35-rc1
Git-commit: 1ae5dc342ac78d7a42965fd1f323815f6f5ef2c1

Now that core network takes care of trans_start updates, dont do it
in drivers themselves, if possible. Drivers can avoid one cache miss
(on dev->trans_start) in their start_xmit() handler.

Exceptions are NETIF_F_LLTX drivers

Signed-off-by: Eric Dumazet <eric.dumazet@gmail.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
Acked-by: Chen, Chien-Chia <machen@suse.com>
---
 drivers/net/vmxnet3/vmxnet3_drv.c         |    1 -

 drivers/net/vmxnet3/vmxnet3_drv.c |    1 -
 1 file changed, 1 deletion(-)

--- a/drivers/net/vmxnet3/vmxnet3_drv.c
+++ b/drivers/net/vmxnet3/vmxnet3_drv.c
@@ -1001,7 +1001,6 @@ vmxnet3_tq_xmit(struct sk_buff *skb, str
 		VMXNET3_WRITE_BAR0_REG(adapter, VMXNET3_REG_TXPROD,
 				       tq->tx_ring.next2fill);
 	}
-	netdev->trans_start = jiffies;
 
 	return NETDEV_TX_OK;
 
