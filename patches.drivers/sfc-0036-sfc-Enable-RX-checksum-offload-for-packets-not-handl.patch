From: Jon Cooper <jcooper@solarflare.com>
Date: Mon, 8 Apr 2013 12:49:48 +0100
Subject: [PATCH v2 036/244] sfc: Enable RX checksum offload for packets not
 handled by GRO
Patch-mainline: v3.11-rc1
Git-commit: c99dffc4170b23455f9ee9e56baf5f77a68ca4c8
References: bsc#909618 FATE#317521

Signed-off-by: Ben Hutchings <bhutchings@solarflare.com>
Acked-by: David Chang <dchang@suse.com>
---
 drivers/net/ethernet/sfc/rx.c |    2 ++
 1 file changed, 2 insertions(+)

--- a/drivers/net/ethernet/sfc/rx.c
+++ b/drivers/net/ethernet/sfc/rx.c
@@ -598,6 +598,8 @@ static void efx_rx_deliver(struct efx_ch
 
 	/* Set the SKB flags */
 	skb_checksum_none_assert(skb);
+	if (likely(rx_buf->flags & EFX_RX_PKT_CSUMMED))
+		skb->ip_summed = CHECKSUM_UNNECESSARY;
 
 	if (channel->type->receive_skb)
 		if (channel->type->receive_skb(channel, skb))
