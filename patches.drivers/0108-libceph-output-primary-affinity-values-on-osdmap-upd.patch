From 6e00efddc53cfcfb1f4dc82b7ad3dba4563c4224 Mon Sep 17 00:00:00 2001
From: Ilya Dryomov <ilya.dryomov@inktank.com>
Date: Wed, 2 Apr 2014 20:34:04 +0400
Subject: [PATCH 108/213] libceph: output primary affinity values on osdmap
 updates
References: fate#318918
Git-commit: f31da0f3e12e57f21d73315e06c48fb9860fe07d
Patch-mainline: v3.15-rc5

Similar to osd weights, output primary affinity values on incremental
osdmap updates.

Signed-off-by: Ilya Dryomov <ilya.dryomov@inktank.com>
Acked-by: David Disseldorp <ddiss@suse.de>

---
 net/ceph/osdmap.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/net/ceph/osdmap.c b/net/ceph/osdmap.c
index 408d148..e632b5a 100644
--- a/net/ceph/osdmap.c
+++ b/net/ceph/osdmap.c
@@ -1005,6 +1005,8 @@ static int decode_new_primary_affinity(void **p, void *end,
 		ret = set_primary_affinity(map, osd, aff);
 		if (ret)
 			return ret;
+
+		pr_info("osd%d primary-affinity 0x%x\n", osd, aff);
 	}
 
 	return 0;
-- 
2.1.4

