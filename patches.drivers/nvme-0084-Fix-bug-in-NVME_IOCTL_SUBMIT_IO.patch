From: Matthew Wilcox <matthew.r.wilcox@intel.com>
Date: Tue, 9 Aug 2011 12:56:37 -0400
Subject: Fix bug in NVME_IOCTL_SUBMIT_IO
Git-commit: 6413214c5d424fd5aae6567848340f962ad2ce0f
References: FATE#313627
Patch-Mainline: v3.7-rc1

Missing 'break' in the switch statement meant that we'd fall through
to the 'return -EINVAL' case.
Acked-by: Hannes Reinecke <hare@suse.de>
---
 drivers/block/nvme.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/drivers/block/nvme.c b/drivers/block/nvme.c
index 9e3c724..0956e12 100644
--- a/drivers/block/nvme.c
+++ b/drivers/block/nvme.c
@@ -1054,6 +1054,7 @@ static int nvme_submit_io(struct nvme_ns *ns, struct nvme_user_io __user *uio)
 	case nvme_cmd_compare:
 		nents = nvme_map_user_pages(dev, io.opcode & 1, io.addr,
 								length, &sg);
+		break;
 	default:
 		return -EINVAL;
 	}
-- 
1.7.4.2

