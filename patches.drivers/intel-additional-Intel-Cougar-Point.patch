From: Seth Heasley <seth.heasley@intel.com>
Subject: [PATCH] x86/PCI: irq and pci_ids patch for additional Intel Cougar Point DeviceIDs
Patch-mainline: 33852cb03ee4cdb05dc6e3a21ec19a4ee63511a4
References: bnc#708269

This patch adds additional LPC Controller DeviceIDs for the Intel Cougar
Point PCH.

The DeviceIDs are defined and referenced as a range of values, the same
way Ibex Peak was implemented.

Signed-off-by: Seth Heasley <seth.heasley@intel.com>
Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>
Acked-by: Jiri Kosina <jkosina@suse.cz>
---
 arch/x86/pci/irq.c      |    9 +++++++--
 include/linux/pci_ids.h |    4 ++--
 2 files changed, 9 insertions(+), 4 deletions(-)

Index: linux-2.6.32-SLE11-SP2/arch/x86/pci/irq.c
===================================================================
--- linux-2.6.32-SLE11-SP2.orig/arch/x86/pci/irq.c
+++ linux-2.6.32-SLE11-SP2/arch/x86/pci/irq.c
@@ -590,8 +590,6 @@ static __init int intel_router_probe(str
 	case PCI_DEVICE_ID_INTEL_ICH10_1:
 	case PCI_DEVICE_ID_INTEL_ICH10_2:
 	case PCI_DEVICE_ID_INTEL_ICH10_3:
-	case PCI_DEVICE_ID_INTEL_CPT_LPC1:
-	case PCI_DEVICE_ID_INTEL_CPT_LPC2:
 	case PCI_DEVICE_ID_INTEL_PATSBURG_LPC_1:
 	case PCI_DEVICE_ID_INTEL_PATSBURG_LPC_2:
 		r->name = "PIIX/ICH";
@@ -610,6 +608,13 @@ static __init int intel_router_probe(str
 		return 1;
 	}
 
+	if ((device >= PCI_DEVICE_ID_INTEL_CPT_LPC_MIN) && 
+		(device <= PCI_DEVICE_ID_INTEL_CPT_LPC_MAX)) {
+		r->name = "PIIX/ICH";
+		r->get = pirq_piix_get;
+		r->set = pirq_piix_set;
+		return 1;
+	}
 	return 0;
 }
 
Index: linux-2.6.32-SLE11-SP2/include/linux/pci_ids.h
===================================================================
--- linux-2.6.32-SLE11-SP2.orig/include/linux/pci_ids.h
+++ linux-2.6.32-SLE11-SP2/include/linux/pci_ids.h
@@ -2445,8 +2445,8 @@
 #define PCI_DEVICE_ID_INTEL_82845_HB	0x1a30
 #define PCI_DEVICE_ID_INTEL_IOAT	0x1a38
 #define PCI_DEVICE_ID_INTEL_CPT_SMBUS	0x1c22
-#define PCI_DEVICE_ID_INTEL_CPT_LPC1	0x1c42
-#define PCI_DEVICE_ID_INTEL_CPT_LPC2	0x1c43
+#define PCI_DEVICE_ID_INTEL_CPT_LPC_MIN	0x1c42
+#define PCI_DEVICE_ID_INTEL_CPT_MAX	0x1c5f
 #define PCI_DEVICE_ID_INTEL_PATSBURG_SMBUS	0x1d22
 #define PCI_DEVICE_ID_INTEL_PATSBURG_LPC_1	0x1d40
 #define PCI_DEVICE_ID_INTEL_PATSBURG_LPC_2	0x1d41
