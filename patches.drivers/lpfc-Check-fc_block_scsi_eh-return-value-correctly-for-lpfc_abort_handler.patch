From: Ankit Jain <jankit@suse.com>
Subject: [lpfc] Check fc_block_scsi_eh return value correctly for lpfc_abort_handler
References: bnc#803674
Patch-mainline: Never

This fixes a regression introduced by the distro driver patch:
patches.drivers/lpfc-8.3.32-Correct-successful-aborts-returning-error-status.patch .

fc_block_scsi_eh returns SUCCESS and not 0, so correctly check
the return value in lpfc_abort_handler.

Signed-off-by: Ankit Jain <jankit@suse.com>

---
 drivers/scsi/lpfc/lpfc_scsi.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

Index: b/drivers/scsi/lpfc/lpfc_scsi.c
===================================================================
--- a/drivers/scsi/lpfc/lpfc_scsi.c
+++ b/drivers/scsi/lpfc/lpfc_scsi.c
@@ -3249,7 +3249,7 @@ lpfc_abort_handler(struct scsi_cmnd *cmn
 	DECLARE_WAIT_QUEUE_HEAD_ONSTACK(waitq);
 
 	status = fc_block_scsi_eh(cmnd);
-	if (status)
+	if (status != SUCCESS)
 		return status;
 
 	lpfc_cmd = (struct lpfc_scsi_buf *)cmnd->host_scribble;
