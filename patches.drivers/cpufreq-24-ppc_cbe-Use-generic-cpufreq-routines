From: Viresh Kumar <viresh.kumar@linaro.org>
Subject: cpufreq: ppc_cbe: Use generic cpufreq routines
Git-commit: c3bc3d67ff07c1986e8ededc14e3fbdd26528f17
Patch-mainline: v3.13-rc1
References: bnc#885934,bnc#878240

 cpufreq: ppc_cbe: Use generic cpufreq routines

Most of the CPUFreq drivers do similar things in .exit() and .verify() routines
and .attr. So its better if we have generic routines for them which can be used
by cpufreq drivers then.

This patch uses these generic routines in the ppc_cbe driver.

Signed-off-by: Viresh Kumar <viresh.kumar@linaro.org>
Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
Acked-by: Torsten Duwe <duwe@suse.de>

Index: linux-3.12-SLE12/drivers/cpufreq/ppc_cbe_cpufreq.c
===================================================================
--- linux-3.12-SLE12.orig/drivers/cpufreq/ppc_cbe_cpufreq.c
+++ linux-3.12-SLE12/drivers/cpufreq/ppc_cbe_cpufreq.c
@@ -130,17 +130,6 @@ static int cbe_cpufreq_cpu_init(struct c
 	return cpufreq_frequency_table_cpuinfo(policy, cbe_freqs);
 }
 
-static int cbe_cpufreq_cpu_exit(struct cpufreq_policy *policy)
-{
-	cpufreq_frequency_table_put_attr(policy->cpu);
-	return 0;
-}
-
-static int cbe_cpufreq_verify(struct cpufreq_policy *policy)
-{
-	return cpufreq_frequency_table_verify(policy, cbe_freqs);
-}
-
 static int cbe_cpufreq_target(struct cpufreq_policy *policy,
 			      unsigned int target_freq,
 			      unsigned int relation)
@@ -176,10 +165,10 @@ static int cbe_cpufreq_target(struct cpu
 }
 
 static struct cpufreq_driver cbe_cpufreq_driver = {
-	.verify		= cbe_cpufreq_verify,
+	.verify		= cpufreq_generic_frequency_table_verify,
 	.target		= cbe_cpufreq_target,
 	.init		= cbe_cpufreq_cpu_init,
-	.exit		= cbe_cpufreq_cpu_exit,
+	.exit		= cpufreq_generic_exit,
 	.name		= "cbe-cpufreq",
 	.flags		= CPUFREQ_CONST_LOOPS,
 };
