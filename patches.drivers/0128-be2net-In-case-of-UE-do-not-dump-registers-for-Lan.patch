From padmanabh.ratnakar@emulex.com  Thu Jun 23 15:40:26 2011
From: Padmanabh Ratnakar <padmanabh.ratnakar@emulex.com>
Date: Tue, 10 May 2011 05:13:01 +0000
Subject: [PATCH] be2net: In case of UE, do not dump registers for Lancer
Git-commit: 18a91e6002207c8212e0960854f88ab924ea22f9
Patch-mainline: v3.0-rc1
References: FATE#311448, bnc#697255

In case of UE, do not dump registers for Lancer as they are not
supported.

Signed-off-by: Padmanabh Ratnakar <padmanabh.ratnakar@emulex.com>
Signed-off-by: David S. Miller <davem@davemloft.net>

Acked-by: Jeff Mahoney <jeffm@suse.com>
---
 drivers/net/benet/be_cmds.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)
--- a/drivers/net/benet/be_cmds.c
+++ b/drivers/net/benet/be_cmds.c
@@ -293,7 +293,8 @@ static int be_mbox_db_ready_wait(struct
 
 		if (msecs > 4000) {
 			dev_err(&adapter->pdev->dev, "mbox poll timed out\n");
-			be_detect_dump_ue(adapter);
+			if (!lancer_chip(adapter))
+				be_detect_dump_ue(adapter);
 			return -1;
 		}
 
