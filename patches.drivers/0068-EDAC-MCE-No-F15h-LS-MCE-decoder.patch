From: Borislav Petkov <borislav.petkov@amd.com>
Subject: EDAC, MCE: No F15h LS MCE decoder
References: fate#311581
Patch-Mainline: yes
Git-commit: b18434cad1740466f7a1c304ea4af0f4d3c874f1

Signed-off-by: Thomas Renninger <trenn@suse.de>

F15h BD doesn't generate LS MCEs so warn about it.

Signed-off-by: Borislav Petkov <borislav.petkov@amd.com>
---
 drivers/edac/mce_amd.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/edac/mce_amd.c b/drivers/edac/mce_amd.c
index 7eb2706..44e6cda 100644
--- a/drivers/edac/mce_amd.c
+++ b/drivers/edac/mce_amd.c
@@ -467,7 +467,7 @@ static void amd_decode_ls_mce(struct mce *m)
 	u16 ec = m->status & 0xffff;
 	u8 xec = (m->status >> 16) & xec_mask;
 
-	if (boot_cpu_data.x86 == 0x14) {
+	if (boot_cpu_data.x86 >= 0x14) {
 		pr_emerg("You shouldn't be seeing an LS MCE on this cpu family,"
 			 " please report on LKML.\n");
 		return;
-- 
1.7.5.3

