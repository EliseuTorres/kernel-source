From 32ff13e66a863d16541d6e76c27d1ae1fe8c8e4f Mon Sep 17 00:00:00 2001
From: Xenia Ragiadakou <burzalodowa@gmail.com>
Date: Sat, 31 Aug 2013 04:40:49 +0300
Subject: [PATCH 13/30] usbcore: fix incorrect type in assignment in
 descriptors_changed()
References: FATE#317453
Git-Commit: b9a1048137f4ae43ee90f61a3f34f0efe863cfeb
Patch-Mainline: v3.12

This patch fixes the incorrect assignment of a variable with type 'le16'
to a variable with type 'unsigned int'.

Signed-off-by: Xenia Ragiadakou <burzalodowa@gmail.com>
Reported-by: kbuild test robot <fengguang.wu@intel.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Signed-off-by: Oliver Neukum <oneukum@suse.de>
---
 drivers/usb/core/hub.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/drivers/usb/core/hub.c b/drivers/usb/core/hub.c
index e264743..c1c01b4 100644
--- a/drivers/usb/core/hub.c
+++ b/drivers/usb/core/hub.c
@@ -4738,10 +4738,10 @@ static int descriptors_changed(struct usb_device *udev,
 	if ((old_bos && !udev->bos) || (!old_bos && udev->bos))
 		return 1;
 	if (udev->bos) {
-		len = udev->bos->desc->wTotalLength;
-		if (len != old_bos->desc->wTotalLength)
+		len = le16_to_cpu(udev->bos->desc->wTotalLength);
+		if (len != le16_to_cpu(old_bos->desc->wTotalLength))
 			return 1;
-		if (memcmp(udev->bos->desc, old_bos->desc, le16_to_cpu(len)))
+		if (memcmp(udev->bos->desc, old_bos->desc, len))
 			return 1;
 	}
 
-- 
1.8.4.5

