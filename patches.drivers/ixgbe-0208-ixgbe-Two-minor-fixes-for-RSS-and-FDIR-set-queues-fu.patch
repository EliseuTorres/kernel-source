From: Alexander Duyck <alexander.h.duyck@intel.com>
Date: Wed, 8 Feb 2012 07:51:42 +0000
Subject: ixgbe: Two minor fixes for RSS and FDIR set queues functions
Patch-mainline: v3.4-rc1
Git-commit: 6ca435078822d9728318dee49ba4f2ff8a2ead24
References: bnc#795303 FATE#313662

This change fixes two minor issues. The first was the fact that we were
setting the return value to false twice in the set_rss_queues function.
The second is the fact that we should have been using "min_t(int," instead
of "min((int)" in set_fdir_queues.

Signed-off-by: Alexander Duyck <alexander.h.duyck@intel.com>
Tested-by: Stephen Ko <stephen.s.ko@intel.com>
Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
Acked-by: Benjamin Poirier <bpoirier@suse.de>
---
 drivers/net/ethernet/intel/ixgbe/ixgbe_main.c |    4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)
--- a/drivers/net/ethernet/intel/ixgbe/ixgbe_main.c
+++ b/drivers/net/ethernet/intel/ixgbe/ixgbe_main.c
@@ -4329,8 +4329,6 @@ static inline bool ixgbe_set_rss_queues(
 		adapter->num_rx_queues = f->indices;
 		adapter->num_tx_queues = f->indices;
 		ret = true;
-	} else {
-		ret = false;
 	}
 
 	return ret;
@@ -4351,7 +4349,7 @@ static inline bool ixgbe_set_fdir_queues
 	bool ret = false;
 	struct ixgbe_ring_feature *f_fdir = &adapter->ring_feature[RING_F_FDIR];
 
-	f_fdir->indices = min((int)num_online_cpus(), f_fdir->indices);
+	f_fdir->indices = min_t(int, num_online_cpus(), f_fdir->indices);
 	f_fdir->mask = 0;
 
 	/*
