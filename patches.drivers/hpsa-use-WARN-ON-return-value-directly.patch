From: Stephen M. Cameron <scameron@beardog.cce.hp.com>
Date: Mon, 14 Jan 2013 12:42:16 +0100
Subject: hpsa: use WARN-ON return value directly

References: FATE#313833
Patch-Mainline: n/a
Make the code closer to kernel.org without changing behavior

Signed-off-by: Stephen M. Cameron <scameron@beardog.cce.hp.com>
Acked-by: Hannes Reinecke <hare@suse.de>
---
 drivers/scsi/hpsa.c |    7 +------
 1 files changed, 1 insertions(+), 6 deletions(-)

diff --git a/drivers/scsi/hpsa.c b/drivers/scsi/hpsa.c
index fb5cf05..18cd410 100644
--- a/drivers/scsi/hpsa.c
+++ b/drivers/scsi/hpsa.c
@@ -631,13 +631,8 @@ static void enqueue_cmd_and_start_io(struct ctlr_info *h,
 
 static inline void removeQ(struct CommandList *c)
 {
-	int empty;
-
-	empty = list_empty(&c->list);
-	if (empty) {
-		WARN_ON(empty);
+	if (WARN_ON(list_empty(&c->list)))
 		return;
-	}
 	list_del_init(&c->list);
 }
 
-- 
1.7.4.2

