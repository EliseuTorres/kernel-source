From: Tomas Winkler <tomas.winkler@intel.com>
Subject: mei: wd: add option WDIOF_SETTIMEOUT
References: fate#311770
Patch-Mainline: v3.7-rc1
Git-commit: c8df72920c9cd8e43899a5660ee54a46ac2588a6


Signed-off-by: Thomas Renninger <trenn@suse.de>

According watchdog-kernel-api.txt WDIOF_SETTIMEOUT
should be set if the driver supplies set_timeout function

Signed-off-by: Tomas Winkler <tomas.winkler@intel.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/misc/mei/wd.c b/drivers/misc/mei/wd.c
index 3006cca..94f2c0a 100644
--- a/drivers/misc/mei/wd.c
+++ b/drivers/misc/mei/wd.c
@@ -341,7 +341,9 @@ static const struct watchdog_ops wd_ops = {
 };
 static const struct watchdog_info wd_info = {
 		.identity = INTEL_AMT_WATCHDOG_ID,
-		.options = WDIOF_KEEPALIVEPING | WDIOF_ALARMONLY,
+		.options = WDIOF_KEEPALIVEPING |
+			   WDIOF_SETTIMEOUT |
+			   WDIOF_ALARMONLY,
 };
 
 static struct watchdog_device amt_wd_dev = {
