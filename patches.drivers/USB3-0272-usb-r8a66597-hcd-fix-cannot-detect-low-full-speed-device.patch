From 87abd0a92c72eea71542d6c972c67e39e584e989 Mon Sep 17 00:00:00 2001
From: Yoshihiro Shimoda <yoshihiro.shimoda.uh@renesas.com>
Date: Tue, 21 Jun 2011 13:24:42 +0900
Subject: usb: r8a66597-hcd: fix cannot detect low/full speed device
Patch-mainline: v3.0
Git-commit: 87abd0a92c72eea71542d6c972c67e39e584e989

This controller can control "Transaction Translators", but
the hcd->has_tt is not set.
Since the commit d199c96d41d80a567493e12b8e96ea056a1350c1
("USB: prevent buggy from crashing the USB stack") has checked it,
the driver could not work the low/full speed device.

Signed-off-by: Yoshihiro Shimoda <yoshihiro.shimoda.uh@renesas.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

---
 drivers/usb/host/r8a66597-hcd.c |    1 +
 1 file changed, 1 insertion(+)

--- a/drivers/usb/host/r8a66597-hcd.c
+++ b/drivers/usb/host/r8a66597-hcd.c
@@ -2516,6 +2516,7 @@ static int __devinit r8a66597_probe(stru
 	INIT_LIST_HEAD(&r8a66597->child_device);
 
 	hcd->rsrc_start = res->start;
+	hcd->has_tt = 1;
 
 	ret = usb_add_hcd(hcd, irq, IRQF_DISABLED | irq_trigger);
 	if (ret != 0) {
