From: Kalesh AP <kalesh.purayil@emulex.com>
Date: Thu, 17 Jul 2014 16:20:22 +0530
Subject: be2net: return -ENOMEM for memory allocation failures
Patch-mainline: v3.17-rc1
Git-commit: 6b5686891c9858aea914c1d1c965d6bbc8a0521d
References: bnc#908322 FATE#317535

Signed-off-by: Sathya Perla <sathya.perla@emulex.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
Acked-by: Benjamin Poirier <bpoirier@suse.de>
---
 drivers/net/ethernet/emulex/benet/be_main.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

--- a/drivers/net/ethernet/emulex/benet/be_main.c
+++ b/drivers/net/ethernet/emulex/benet/be_main.c
@@ -2824,7 +2824,7 @@ static int be_setup_wol(struct be_adapte
 	cmd.va = dma_zalloc_coherent(&adapter->pdev->dev, cmd.size, &cmd.dma,
 				     GFP_KERNEL);
 	if (cmd.va == NULL)
-		return -1;
+		return -ENOMEM;
 
 	if (enable) {
 		status = pci_write_config_dword(adapter->pdev,
@@ -4378,7 +4378,7 @@ static int be_stats_init(struct be_adapt
 	cmd->va = dma_zalloc_coherent(&adapter->pdev->dev, cmd->size, &cmd->dma,
 				      GFP_KERNEL);
 	if (cmd->va == NULL)
-		return -1;
+		return -ENOMEM;
 	return 0;
 }
 
