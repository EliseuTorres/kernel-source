From 56a1df46c19150db0a9b0f0c14e0b1d42e7f32d4 Mon Sep 17 00:00:00 2001
From: Johan Hovold <jhovold@gmail.com>
Date: Sat, 15 May 2010 17:53:44 +0200
Subject: USB: serial: add special case for processing of empty read
 urbs
Patch-mainline: v2.6.35
Git-commit: 56a1df46c19150db0a9b0f0c14e0b1d42e7f32d4

Return immediately from generic process_read_urb if urb is empty.

Signed-off-by: Johan Hovold <jhovold@gmail.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

---
 drivers/usb/serial/generic.c |    3 +++
 1 file changed, 3 insertions(+)

--- a/drivers/usb/serial/generic.c
+++ b/drivers/usb/serial/generic.c
@@ -323,6 +323,9 @@ void usb_serial_generic_process_read_urb
 	char *ch = (char *)urb->transfer_buffer;
 	int i;
 
+	if (!urb->actual_length)
+		return;
+
 	tty = tty_port_tty_get(&port->port);
 	if (!tty)
 		return;
