From: Ben Hutchings <bhutchings@solarflare.com>
Date: Thu, 5 Jan 2012 18:50:29 +0000
Subject: sfc: Avoid assignment in an if-statement, reported by checkpatch
Patch-mainline: v3.4-rc1
Git-commit: e9e01846c7e18a3b5682b54e50f1005949737bd9
References: bnc#786035 FATE#314299

Fix the following error:

ERROR: do not use assignment in if condition

Signed-off-by: Ben Hutchings <bhutchings@solarflare.com>
Acked-by: Benjamin Poirier <bpoirier@suse.de>
---
 drivers/net/ethernet/sfc/efx.c |    8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

--- a/drivers/net/ethernet/sfc/efx.c
+++ b/drivers/net/ethernet/sfc/efx.c
@@ -1069,9 +1069,11 @@ static int efx_init_io(struct efx_nic *e
 	 * masks event though they reject 46 bit masks.
 	 */
 	while (dma_mask > 0x7fffffffUL) {
-		if (pci_dma_supported(pci_dev, dma_mask) &&
-		    ((rc = pci_set_dma_mask(pci_dev, dma_mask)) == 0))
-			break;
+		if (pci_dma_supported(pci_dev, dma_mask)) {
+			rc = pci_set_dma_mask(pci_dev, dma_mask);
+			if (rc == 0)
+				break;
+		}
 		dma_mask >>= 1;
 	}
 	if (rc) {
