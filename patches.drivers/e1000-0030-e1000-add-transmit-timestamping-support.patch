From: Willem de Bruijn <willemb@google.com>
Date: Fri, 27 Apr 2012 09:04:04 +0000
Subject: [PATCH 30/51] e1000: add transmit timestamping support
Patch-mainline: v3.5-rc1
Git-commit: eab467f56371b85c937a5b5969bd15150044b6f9
References: bnc#795304 FATE#313649

Signed-off-by: Willem de Bruijn <willemb@google.com>
Acked-by: Eric Dumazet <edumazet@google.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
Acked-by: John Ronciak <john.ronciak@intel.com>
Acked-by: Benjamin Poirier <bpoirier@suse.de>
---
 drivers/net/ethernet/intel/e1000/e1000_main.c |    2 ++
 1 file changed, 2 insertions(+)

--- a/drivers/net/ethernet/intel/e1000/e1000_main.c
+++ b/drivers/net/ethernet/intel/e1000/e1000_main.c
@@ -3242,6 +3242,8 @@ static netdev_tx_t e1000_xmit_frame(stru
 	                     nr_frags, mss);
 
 	if (count) {
+		skb_tx_timestamp(skb);
+
 		e1000_tx_queue(adapter, tx_ring, tx_flags, count);
 		/* Make sure there is space in the ring for the next send. */
 		e1000_maybe_stop_tx(netdev, tx_ring, MAX_SKB_FRAGS + 2);
