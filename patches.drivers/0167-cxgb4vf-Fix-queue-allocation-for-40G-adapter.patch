From: Hariprasad Shenai <hariprasad@chelsio.com>
Date: Wed, 14 Jan 2015 17:58:10 +0530
Subject: [PATCH 167/230] cxgb4vf: Fix queue allocation for 40G adapter
Patch-mainline: v3.19-rc5
Git-commit: 14b3812f7a33ef0ed17e97c616503d4bbf90e403
References: bsc#924379 FATE#318566 bsc#921338

Signed-off-by: Hariprasad Shenai <hariprasad@chelsio.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
Acked-by: David Chang <dchang@suse.com>
---
 drivers/net/ethernet/chelsio/cxgb4vf/cxgb4vf_main.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/drivers/net/ethernet/chelsio/cxgb4vf/cxgb4vf_main.c
+++ b/drivers/net/ethernet/chelsio/cxgb4vf/cxgb4vf_main.c
@@ -2426,7 +2426,7 @@ static void cfg_queues(struct adapter *a
 	 */
 	n10g = 0;
 	for_each_port(adapter, pidx)
-		n10g += is_10g_port(&adap2pinfo(adapter, pidx)->link_cfg);
+		n10g += is_x_10g_port(&adap2pinfo(adapter, pidx)->link_cfg);
 
 	/*
 	 * We default to 1 queue per non-10G port and up to # of cores queues
