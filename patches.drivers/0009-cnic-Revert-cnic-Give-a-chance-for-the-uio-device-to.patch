From mchan@broadcom.com  Thu Jun 23 16:09:51 2011
From: Michael Chan <mchan@broadcom.com>
Date: Thu, 16 Jun 2011 21:56:21 -0700
Subject: [PATCH 009/151] cnic: Revert "cnic: Give a chance for the uio device
 to be opened"
Patch-mainline: No, not accepted upstream.
References: FATE#311458 FATE#311459 FATE#311460 FATE#311461 FATE#311462 bnc#698050

This patch was not accepted upstream.

Signed-off-by: Michael Chan <mchan@broadcom.com>
Acked-by: Jeff Mahoney <jeffm@suse.com>
---
 drivers/net/cnic.c |   11 +----------
 1 files changed, 1 insertions(+), 10 deletions(-)

diff --git a/drivers/net/cnic.c b/drivers/net/cnic.c
index 35d99ca..e44e408 100644
--- a/drivers/net/cnic.c
+++ b/drivers/net/cnic.c
@@ -273,18 +273,9 @@ static int cnic_send_nlmsg(struct cnic_local *cp, u32 type,
 	u16 len = 0;
 	u32 msg_type = ISCSI_KEVENT_IF_DOWN;
 	struct cnic_ulp_ops *ulp_ops;
-	int count = 0;
 
-	while (count < 40 && cp->uio_dev == -1) {
-		msleep(50);
-		count++;
-	}
-
-	if (cp->uio_dev == -1) {
-		printk(KERN_WARNING PFX "%s: no uio dev to send nl request\n",
-			cp->dev->netdev->name);
+	if (cp->uio_dev == -1)
 		return -ENODEV;
-	}
 
 	if (csk) {
 		len = sizeof(path_req);
-- 
1.6.4.GIT

