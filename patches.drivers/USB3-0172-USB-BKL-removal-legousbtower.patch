From 3c02b1d79e04e86f8bd2ff56da3743c2980f3e34 Mon Sep 17 00:00:00 2001
From: Oliver Neukum <oliver@neukum.org>
Date: Thu, 14 Jan 2010 16:12:53 +0100
Subject: USB: BKL removal: legousbtower
Patch-mainline: v2.6.34
Git-commit: 3c02b1d79e04e86f8bd2ff56da3743c2980f3e34

BKL was not needed at all. Removed without replacement.

Signed-off-by: Oliver Neukum <oliver@neukum.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

---
 drivers/usb/misc/legousbtower.c |    3 ---
 1 file changed, 3 deletions(-)

--- a/drivers/usb/misc/legousbtower.c
+++ b/drivers/usb/misc/legousbtower.c
@@ -82,7 +82,6 @@
 #include <linux/module.h>
 #include <linux/completion.h>
 #include <linux/mutex.h>
-#include <linux/smp_lock.h>
 #include <asm/uaccess.h>
 #include <linux/usb.h>
 #include <linux/poll.h>
@@ -346,7 +345,6 @@ static int tower_open (struct inode *ino
 
 	dbg(2, "%s: enter", __func__);
 
-	lock_kernel();
 	nonseekable_open(inode, file);
 	subminor = iminor(inode);
 
@@ -432,7 +430,6 @@ unlock_exit:
 	mutex_unlock(&dev->lock);
 
 exit:
-	unlock_kernel();
 	dbg(2, "%s: leave, return value %d ", __func__, retval);
 
 	return retval;
