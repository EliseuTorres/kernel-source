From 59b723cdf8014d3811c79e87de1cfd90eb0feec5 Mon Sep 17 00:00:00 2001
From: Lin Wang <bupt.wanglin@gmail.com>
Date: Thu, 8 May 2014 19:25:54 +0300
Subject: [PATCH 25/30] xhci: fix wrong port number reported when setting
 USB2.0 hardware LPM.
References: FATE#317453
Git-Commit: 654a55d34f880bb56b3cebab53771a09a404a1f8
Patch-Mainline:v3.16

This patch fix wrong port number reported when trying to enable/disable
USB2.0 hardware LPM.

Signed-off-by: Lin Wang <lin.x.wang@intel.com>
Signed-off-by: Mathias Nyman <mathias.nyman@linux.intel.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Signed-off-by: Oliver Neukum <oneukum@suse.de>
---
 drivers/usb/host/xhci.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/usb/host/xhci.c b/drivers/usb/host/xhci.c
index 1a74da1..bd3f49a 100644
--- a/drivers/usb/host/xhci.c
+++ b/drivers/usb/host/xhci.c
@@ -3890,7 +3890,7 @@ int xhci_set_usb2_hardware_lpm(struct usb_hcd *hcd,
 	field = le32_to_cpu(udev->bos->ext_cap->bmAttributes);
 
 	xhci_dbg(xhci, "%s port %d USB2 hardware LPM\n",
-			enable ? "enable" : "disable", port_num);
+			enable ? "enable" : "disable", port_num + 1);
 
 	if (enable) {
 		/* Host supports BESL timeout instead of HIRD */
-- 
1.8.4.5

