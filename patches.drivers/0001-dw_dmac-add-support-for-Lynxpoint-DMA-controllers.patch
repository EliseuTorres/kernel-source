From cfdf5b6cc5985014a7ce891093f4fd0ae2d27ca6 Mon Sep 17 00:00:00 2001
From: Mika Westerberg <mika.westerberg@linux.intel.com>
Date: Thu, 7 Feb 2013 17:36:28 +0200
Subject: [PATCH] dw_dmac: add support for Lynxpoint DMA controllers

Git-commit: cfdf5b6cc5985014a7ce891093f4fd0ae2d27ca6
Patch-mainline: v3.9
References: fate#317311
Target: SLE11 SP4

Intel Lynxpoint PCH Low Power Subsystem has DMA controller to support general
purpose serial buses like SPI, I2C, and HSUART. This controller is enumerated
from ACPI namespace with ACPI ID INTL9C60.

Signed-off-by: Mika Westerberg <mika.westerberg@linux.intel.com>
Signed-off-by: Andy Shevchenko <andriy.shevchenko@linux.intel.com>
Acked-by: Viresh Kumar <viresh.kumar@linaro.org>
Signed-off-by: Vinod Koul <vinod.koul@intel.com>
Acked-by: Lee, Chun-Yi <jlee@suse.com>
---
 drivers/dma/dw_dmac.c | 6 ++++++
 1 file changed, 6 insertions(+)

Index: linux-3.0-SLE11-SP4/drivers/dma/dw_dmac.c
===================================================================
--- linux-3.0-SLE11-SP4.orig/drivers/dma/dw_dmac.c
+++ linux-3.0-SLE11-SP4/drivers/dma/dw_dmac.c
@@ -1552,6 +1552,11 @@ static const struct dev_pm_ops dw_dev_pm
 	.resume_noirq = dw_resume_noirq,
 };
 
+static const struct platform_device_id dw_dma_ids[] = {
+	{ "INTL9C60", 0 },
+	{ }
+};
+
 static struct platform_driver dw_driver = {
 	.remove		= __exit_p(dw_remove),
 	.shutdown	= dw_shutdown,
@@ -1559,6 +1564,7 @@ static struct platform_driver dw_driver
 		.name	= "dw_dmac",
 		.pm	= &dw_dev_pm_ops,
 	},
+	.id_table	= dw_dma_ids,
 };
 
 static int __init dw_init(void)
