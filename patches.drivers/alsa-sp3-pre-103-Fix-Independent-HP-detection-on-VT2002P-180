From a2a870c82797e47884b2736e95e9d9c89a51c219 Mon Sep 17 00:00:00 2001
From: Lydia Wang <lydiawang@viatech.com.cn>
Date: Fri, 8 Jul 2011 14:04:33 +0800
Subject: [PATCH] ALSA: hda - Fix Independent-HP detection on VT2002P/1802/1812 codecs
Git-commit: a2a870c82797e47884b2736e95e9d9c89a51c219
Patch-mainline: 3.1-rc2
References: FATE#314310

For VT2002P, VT1802 and VT1812 codecs, to create Independent HP
control.

Signed-off-by: Lydia Wang <lydiawang@viatech.com.cn>
Signed-off-by: Takashi Iwai <tiwai@suse.de>

---
 sound/pci/hda/patch_via.c |    6 ++++++
 1 file changed, 6 insertions(+)

--- a/sound/pci/hda/patch_via.c
+++ b/sound/pci/hda/patch_via.c
@@ -1915,6 +1915,12 @@ static int via_auto_create_hp_ctls(struc
 				   &spec->hp_path)) {
 		spec->hp_dac_nid = spec->hp_path.path[0];
 		spec->hp_indep_shared = true;
+	} else if (spec->multiout.dac_nids[HDA_CLFE] &&
+		 parse_output_path(codec, pin,
+				   spec->multiout.dac_nids[HDA_CLFE],
+				   &spec->hp_path)) {
+		spec->hp_dac_nid = spec->hp_path.path[0];
+		spec->hp_indep_shared = true;
 	}
 
 	if (!parse_output_path(codec, pin, spec->multiout.dac_nids[HDA_FRONT],
