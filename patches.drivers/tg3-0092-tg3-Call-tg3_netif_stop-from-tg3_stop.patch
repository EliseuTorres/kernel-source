From: Nithin Nayak Sujir <nsujir@broadcom.com>
Date: Mon, 5 Nov 2012 14:26:30 +0000
Subject: [PATCH 092/105] tg3: Call tg3_netif_stop() from tg3_stop()
Patch-mainline: v3.8-rc1
Git-commit: bd473da35bc21a0004b8ad35c19e0c8b53b03f36
References: bnc#790588 FATE#313912

instead of making separate tg3_napi_disable() and netif_tx_disable() calls.

Update version to 3.126.

Signed-off-by: Nithin Nayak Sujir <nsujir@broadcom.com>
Signed-off-by: Michael Chan <mchan@broadcom.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
Acked-by: Nithin Nayak Sujir <nsujir@broadcom.com>
Acked-by: Benjamin Poirier <bpoirier@suse.de>
---
 drivers/net/ethernet/broadcom/tg3.c |    4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

--- a/drivers/net/ethernet/broadcom/tg3.c
+++ b/drivers/net/ethernet/broadcom/tg3.c
@@ -10395,10 +10395,8 @@ static void tg3_stop(struct tg3 *tp)
 {
 	int i;
 
-	tg3_napi_disable(tp);
 	tg3_reset_task_cancel(tp);
-
-	netif_tx_stop_all_queues(tp->dev);
+	tg3_netif_stop(tp);
 
 	tg3_timer_stop(tp);
 
