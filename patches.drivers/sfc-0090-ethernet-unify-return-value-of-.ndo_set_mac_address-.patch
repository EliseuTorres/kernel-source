From: Danny Kukawka <danny.kukawka@bisect.de>
Date: Tue, 21 Feb 2012 02:07:49 +0000
Subject: ethernet: unify return value of .ndo_set_mac_address if address is
 invalid
Patch-mainline: v3.4-rc1
Git-commit: 504f9b5a6bb5336ad434438d0cdd61a16db80129 (partial)
References: bnc#786035 FATE#314299

Unify return value of .ndo_set_mac_address if the given address
isn't valid. Return -EADDRNOTAVAIL as eth_mac_addr() already does
if is_valid_ether_addr() fails.

Signed-off-by: Danny Kukawka <danny.kukawka@bisect.de>
Signed-off-by: David S. Miller <davem@davemloft.net>
[bwh: Restricted to drivers/net/ethernet/sfc/]
Acked-by: Ben Hutchings <bhutchings@solarflare.com>
Acked-by: Benjamin Poirier <bpoirier@suse.de>
---
 drivers/net/ethernet/sfc/efx.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/drivers/net/ethernet/sfc/efx.c
+++ b/drivers/net/ethernet/sfc/efx.c
@@ -1939,7 +1939,7 @@ static int efx_set_mac_address(struct ne
 		netif_err(efx, drv, efx->net_dev,
 			  "invalid ethernet MAC address requested: %pM\n",
 			  new_addr);
-		return -EINVAL;
+		return -EADDRNOTAVAIL;
 	}
 
 	memcpy(net_dev->dev_addr, new_addr, net_dev->addr_len);
