From: Dan Williams <dan.j.williams@intel.com>
Date: Wed, 4 May 2011 13:49:32 -0700
Subject: [PATCH 150/273] isci: remove compile-time (Kconfig) silicon configuration
Git-commit: c6d42257899505ea1982eba4c5e8bc7981e63e07
References: FATE#311808,bnc#709528
Patch-Mainline: 3.0

Pre-production silicon support is deprecated, and will be removed
completely in the future.

Signed-off-by: Dan Williams <dan.j.williams@intel.com>
Signed-off-by: Hannes Reinecke <hare@suse.de>
---
 drivers/scsi/Kconfig     |   18 ------------------
 drivers/scsi/isci/init.c |    8 +-------
 2 files changed, 1 insertions(+), 25 deletions(-)

diff --git a/drivers/scsi/Kconfig b/drivers/scsi/Kconfig
index 1b15565..1033517 100644
--- a/drivers/scsi/Kconfig
+++ b/drivers/scsi/Kconfig
@@ -836,24 +836,6 @@ config SCSI_ISCI
 
 	  The experimental tag will be removed after the driver exits alpha
 
-choice
-	prompt "Default Silicon Revision"
-	depends on SCSI_ISCI
-	default PBG_HBA_A2
-	# temporary A-step silicon is pre-production
-
-config PBG_HBA_BETA
-	bool "B0"
-
-config PBG_HBA_A2
-	bool "A2"
-
-config PBG_HBA_A0
-	bool "A0"
-
-endchoice
-
-
 config SCSI_GENERIC_NCR5380
 	tristate "Generic NCR5380/53c400 SCSI PIO support"
 	depends on ISA && SCSI
diff --git a/drivers/scsi/isci/init.c b/drivers/scsi/isci/init.c
index 10b60ab..6c2d686 100644
--- a/drivers/scsi/isci/init.c
+++ b/drivers/scsi/isci/init.c
@@ -87,15 +87,9 @@ MODULE_DEVICE_TABLE(pci, isci_id_table);
 
 /* linux isci specific settings */
 
-#if defined(CONFIG_PBG_HBA_A0)
-int isci_si_rev = ISCI_SI_REVA0;
-#elif defined(CONFIG_PBG_HBA_A2)
 int isci_si_rev = ISCI_SI_REVA2;
-#else
-int isci_si_rev = ISCI_SI_REVB0;
-#endif
 module_param(isci_si_rev, int, 0);
-MODULE_PARM_DESC(isci_si_rev, "override default si rev (0: A0 1: A2 2: B0)");
+MODULE_PARM_DESC(isci_si_rev, "(deprecated) override default si rev (0: A0 1: A2 2: B0)");
 
 unsigned char no_outbound_task_to = 20;
 module_param(no_outbound_task_to, byte, 0);
-- 
1.6.0.2

