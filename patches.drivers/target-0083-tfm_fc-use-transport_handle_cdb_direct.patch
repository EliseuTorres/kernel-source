From: Christoph Hellwig <hch@lst.de>
Date: Mon, 12 Sep 2011 21:50:49 +0200
Subject: [PATCH] tfm_fc: use transport_handle_cdb_direct
Git-commit: 4ca495e0630b6fd960f94f89a9f13ad32b91bc96
References: FATE#313550
Patch-Mainline: v3.2

ft_send_work is always called from workqueue context, which means we can
handle the CDB directly instead of doing another context switch.

Signed-off-by: Christoph Hellwig <hch@lst.de>
Cc: Kiran Patil <kiran.patil@intel.com>
Signed-off-by: Nicholas Bellinger <nab@linux-iscsi.org>
Acked-by: Hannes Reinecke <hare@suse.de>
---
 drivers/target/tcm_fc/tfc_cmd.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/target/tcm_fc/tfc_cmd.c b/drivers/target/tcm_fc/tfc_cmd.c
index 04acc3e..dbe78a7 100644
--- a/drivers/target/tcm_fc/tfc_cmd.c
+++ b/drivers/target/tcm_fc/tfc_cmd.c
@@ -642,7 +642,7 @@ static void ft_send_work(struct work_struct *work)
 		transport_generic_free_cmd(se_cmd, 0, 0);
 		return;
 	}
-	transport_generic_handle_cdb(se_cmd);
+	transport_handle_cdb_direct(se_cmd);
 	return;
 
 err:
-- 
1.7.4.2

