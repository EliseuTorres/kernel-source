From ajit.khaparde@emulex.com  Thu Jun 23 15:40:25 2011
From: Ajit Khaparde <ajit.khaparde@emulex.com>
Date: Tue, 1 Feb 2011 15:41:59 -0800
Subject: [PATCH] be2net: remove netif_stop_queue being called before register_netdev.
Git-commit: 9b6cefd6593c2b661e0052d53f2fff6fc5463975
Patch-mainline: v2.6.38-rc4
References: FATE#311448, bnc#697255

It is illegal to call netif_stop_queue before register_netdev.

Signed-off-by: Ajit Khaparde <ajit.khaparde@emulex.com>
Signed-off-by: David S. Miller <davem@davemloft.net>

Acked-by: Jeff Mahoney <jeffm@suse.com>
---
 drivers/net/benet/be_main.c |    2 --
 1 file changed, 2 deletions(-)
--- a/drivers/net/benet/be_main.c
+++ b/drivers/net/benet/be_main.c
@@ -2532,8 +2532,6 @@ static void be_netdev_init(struct net_de
 
 	netif_napi_add(netdev, &adapter->tx_eq.napi, be_poll_tx_mcc,
 		BE_NAPI_WEIGHT);
-
-	netif_stop_queue(netdev);
 }
 
 static void be_unmap_pci_bars(struct be_adapter *adapter)
