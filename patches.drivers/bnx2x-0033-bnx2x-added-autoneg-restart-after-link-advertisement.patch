From: Yaniv Rosner <yaniv.rosner@broadcom.com>
Date: Wed, 15 Feb 2012 02:10:25 +0000
Subject: [PATCH 033/111] bnx2x: added autoneg-restart after link
 advertisement changes
Patch-mainline: v3.4-rc1
Git-commit: 1b85ae52733b859e280035330e016731d4a62307
References: bnc#790597 FATE#313915

Signed-off-by: Yaniv Rosner <yaniv.rosner@broadcom.com>
Signed-off-by: Eilon Greenstein <eilong@broadcom.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
Acked-by: Benjamin Poirier <bpoirier@suse.de>
---
 drivers/net/ethernet/broadcom/bnx2x/bnx2x_link.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/drivers/net/ethernet/broadcom/bnx2x/bnx2x_link.c
+++ b/drivers/net/ethernet/broadcom/bnx2x/bnx2x_link.c
@@ -3817,7 +3817,7 @@ static void bnx2x_warpcore_enable_AN_KR(
 
 	/* Enable Autoneg */
 	bnx2x_cl45_write(bp, phy, MDIO_AN_DEVAD,
-			 MDIO_WC_REG_IEEE0BLK_MIICNTL, 0x1000);
+			 MDIO_WC_REG_IEEE0BLK_MIICNTL, 0x1200);
 
 }
 
