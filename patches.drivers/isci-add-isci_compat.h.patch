From: Hannes Reinecke <hare@suse.de>
Date: Thu, 16 Jun 2011 14:52:57 +0200
Subject: isci: add isci_compat.h
References: FATE#311808
Patch-Mainline: n/a

Add a compability wrapper to compile under SLES11 SP2.

Signed-off-by: Hannes Reinecke <hare@suse.de>
---
 drivers/scsi/isci/isci.h        |    2 ++
 drivers/scsi/isci/isci_compat.h |   16 ++++++++++++++++
 2 files changed, 18 insertions(+), 0 deletions(-)
 create mode 100644 drivers/scsi/isci/isci_compat.h

diff --git a/drivers/scsi/isci/isci.h b/drivers/scsi/isci/isci.h
index 714ed92..f581584 100644
--- a/drivers/scsi/isci/isci.h
+++ b/drivers/scsi/isci/isci.h
@@ -59,6 +59,8 @@
 #include <linux/interrupt.h>
 #include <linux/types.h>
 
+#include "isci_compat.h"
+
 #define DRV_NAME "isci"
 #define SCI_PCI_BAR_COUNT 2
 #define SCI_NUM_MSI_X_INT 2
diff --git a/drivers/scsi/isci/isci_compat.h b/drivers/scsi/isci/isci_compat.h
new file mode 100644
index 0000000..2d5c430
--- /dev/null
+++ b/drivers/scsi/isci/isci_compat.h
@@ -0,0 +1,16 @@
+/*
+ * isci_compat.h
+ *
+ * Compability functions for isci on SLES11 SP2
+ */
+#ifndef _ISCI_COMPAT_H
+#define _ISCI_COMPAT_H
+
+#ifndef	BUILD_BUG_ON_NOT_POWER_OF_2
+#define BUILD_BUG_ON_NOT_POWER_OF_2(n)
+#endif
+#ifndef BUILD_BUG_ON
+#define BUILD_BUG_ON(condition)
+#endif
+
+#endif /* _ISCI_COMPAT_H */
-- 
1.6.0.2

