From: Dmitry Kravkov <dmitry@broadcom.com>
Date: Wed, 4 Apr 2012 02:27:42 +0000
Subject: [PATCH 078/111] bnx2x: add missing parenthesis to prevent u32
 overflow
Patch-mainline: v3.5-rc1
Git-commit: cfcadc97a890b81f619715739ef101f8c2010e6b
References: bnc#790597 FATE#313915

Commit b475d78 lacked two pairs of parenthesis, causing an overflow in the
congestion management.

Signed-off-by: Dmitry Kravkov <dmitry@broadcom.com>
Signed-off-by: Yuval Mintz <yuvalmin@broadcom.com>
Signed-off-by: Eilon Greenstein <eilong@broadcom.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
Acked-by: Benjamin Poirier <bpoirier@suse.de>
---
 drivers/net/ethernet/broadcom/bnx2x/bnx2x_init.h |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

--- a/drivers/net/ethernet/broadcom/bnx2x/bnx2x_init.h
+++ b/drivers/net/ethernet/broadcom/bnx2x/bnx2x_init.h
@@ -409,7 +409,7 @@ static inline void bnx2x_init_min(const
 			 */
 			vdata->vnic_min_rate[vnic].vn_credit_delta =
 				(u32)input_data->vnic_min_rate[vnic] * 100 *
-				T_FAIR_COEF / (8 * 100 * vnicWeightSum);
+				(T_FAIR_COEF / (8 * 100 * vnicWeightSum));
 			if (vdata->vnic_min_rate[vnic].vn_credit_delta <
 			    pdata->fair_vars.fair_threshold +
 			    MIN_ABOVE_THRESH) {
@@ -446,7 +446,7 @@ static inline void bnx2x_init_fw_wrr(con
 				 */
 				ccd[cos] =
 				    (u32)input_data->cos_min_rate[cos] * 100 *
-				    T_FAIR_COEF / (8 * 100 * cosWeightSum);
+				    (T_FAIR_COEF / (8 * 100 * cosWeightSum));
 				 if (ccd[cos] < pdata->fair_vars.fair_threshold
 						+ MIN_ABOVE_THRESH) {
 					ccd[cos] =
