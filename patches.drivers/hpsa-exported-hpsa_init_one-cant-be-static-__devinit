From: Jeff Mahoney <jeffm@suse.com>
Subject: hpsa: Exported hpsa_init_one() can't be static __devinit
Patch-mainline: Never

 patches.drivers/hpsa-update-to-hp-version.patch exports hpsa_dev_init,
 but it's also marked static __devinit. That will blow up if actually
 used by another module after this one is finished loading.

 This also resolves a build issue:
 drivers/scsi/hpsa.c:3654: error: __ksymtab_hpsa_alternate_pci_init causes a section type conflict

 hpsa_alternate_pci_init was properly annotated but hpsa_init_one was
 declared first, causing the conflict.

Signed-off-by: Jeff Mahoney <jeffm@suse.com>
---
 drivers/scsi/hpsa.c |    3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

--- a/drivers/scsi/hpsa.c
+++ b/drivers/scsi/hpsa.c
@@ -4117,8 +4117,7 @@ static void hpsa_undo_allocations_after_
 	kfree(h);
 }
 
-static int __devinit hpsa_init_one(struct pci_dev *pdev,
-				    const struct pci_device_id *ent)
+int hpsa_init_one(struct pci_dev *pdev, const struct pci_device_id *ent)
 {
 	int dac, rc;
 	struct ctlr_info *h;
