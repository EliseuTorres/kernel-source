From: Yong Zhang <yong.zhang@windriver.com>
Subject: kernel.h: fix wrong usage of __ratelimit()
References: fate#311968
Git-commit: bb1dc0bacb8ddd7ba6a5906c678a5a5a110cf695
Patch-mainline: v2.6.34-rc4


Signed-off-by: Thomas Renninger <trenn@suse.de>

When __ratelimit() returns 1 this means that we can go ahead.

Signed-off-by: Yong Zhang <yong.zhang@windriver.com>
Cc: Ingo Molnar <mingo@elte.hu>
Cc: Joe Perches <joe@perches.com>
Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

---
 include/linux/kernel.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

Index: linux-2.6.32-SLE11-SP1/include/linux/kernel.h
===================================================================
--- linux-2.6.32-SLE11-SP1.orig/include/linux/kernel.h
+++ linux-2.6.32-SLE11-SP1/include/linux/kernel.h
@@ -447,7 +447,7 @@ int printk_hash(const char *, const char
 		.burst = DEFAULT_RATELIMIT_BURST,       \
 	};                                              \
 							\
-	if (!__ratelimit(&_rs))                         \
+	if (__ratelimit(&_rs))                          \
 		printk(fmt, ##__VA_ARGS__);		\
 })
 #else
