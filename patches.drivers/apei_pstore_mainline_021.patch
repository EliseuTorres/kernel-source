From: Chen Gong <gong.chen@linux.intel.com>
Subject: ACPI APEI: Add Kconfig option IRQ_WORK for GHES
References: bnc#697859
Patch-Mainline: 03ba176a29dae5b4849f45c0b5c89b9d78baa2c6 undefined
Git-commit: 03ba176a29dae5b4849f45c0b5c89b9d78baa2c6


Signed-off-by: Thomas Renninger <trenn@suse.de>

IRQ_WORK is used by GHES, but it is selected by PERF_EVENT.
For now PERF_EVENT is selected by x86 by default, but
in concept, IRQ_WORK should be selected by GHES, not by others.

Signed-off-by: Chen Gong <gong.chen@linux.intel.com>
Signed-off-by: Len Brown <len.brown@intel.com>

diff --git a/drivers/acpi/apei/Kconfig b/drivers/acpi/apei/Kconfig
index c34aa51..e3f4787 100644
--- a/drivers/acpi/apei/Kconfig
+++ b/drivers/acpi/apei/Kconfig
@@ -13,6 +13,7 @@ config ACPI_APEI_GHES
 	bool "APEI Generic Hardware Error Source"
 	depends on ACPI_APEI && X86
 	select ACPI_HED
+	select IRQ_WORK
 	select LLIST
 	select GENERIC_ALLOCATOR
 	help
