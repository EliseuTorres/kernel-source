From: Takashi Iwai <tiwai@suse.de>
Subject: drm/i915: Disable ACPI lid detection as an ad hoc workaround
Patch-mainline: Never
References: bnc#577937

On 2.6.32 and later kernels, the backlight of 945GM/965GM doesn't recover
after the lid is reopened.  This is a regression from 2.6.31, and a
workaround is to disable the dynamic lid-detection.

NOTE: this fix is NOT THE RIGHT THING.  Remove this patch once when the
better and correct fix is done in the upstream (and backported).

Signed-off-by: Takashi Iwai <tiwai@suse.de>

---
 drivers/gpu/drm/i915/intel_lvds.c |    4 ++++
 1 file changed, 4 insertions(+)

--- a/drivers/gpu/drm/i915/intel_lvds.c
+++ b/drivers/gpu/drm/i915/intel_lvds.c
@@ -643,6 +643,8 @@ static enum drm_connector_status intel_l
 {
 	enum drm_connector_status status = connector_status_connected;
 
+	return status; /* XXX AD-HOC WORKAROUND!! (bnc#577937) */
+
 	if (!acpi_lid_open() && !dmi_check_system(bad_lid_status))
 		status = connector_status_disconnected;
 
@@ -702,6 +704,8 @@ static int intel_lid_notify(struct notif
 	struct drm_device *dev = dev_priv->dev;
 	struct drm_connector *connector = dev_priv->int_lvds_connector;
 
+	return NOTIFY_OK; /* XXX AD-HOC WORKAROUND!! (bnc#577937) */
+
 	/*
 	 * check and update the status of LVDS connector after receiving
 	 * the LID nofication event.
