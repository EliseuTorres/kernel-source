From: "David S. Miller" <davem@davemloft.net>
Date: Thu, 28 Nov 2013 18:53:36 -0500
Subject: Revert "be2net: call napi_disable() for all event queues"
Patch-mainline: v3.13-rc3
Git-commit: 71237b6feb8361a00a1cb481a0c901fbee8f82a5
References: bnc#855062 FATE#315961

This reverts commit 55485e7b417b640870b14eceec4cfbcb2b3e7a92.

I applied the wrong version of this patch, the right one is coming up
next.

Signed-off-by: David S. Miller <davem@davemloft.net>
Acked-by: Benjamin Poirier <bpoirier@suse.de>
---
 drivers/net/ethernet/emulex/benet/be_main.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)
--- a/drivers/net/ethernet/emulex/benet/be_main.c
+++ b/drivers/net/ethernet/emulex/benet/be_main.c
@@ -2663,8 +2663,8 @@ static int be_close(struct net_device *n
 			napi_disable(&eqo->napi);
 			be_disable_busy_poll(eqo);
 		}
+		adapter->flags &= ~BE_FLAGS_NAPI_ENABLED;
 	}
-	adapter->flags &= ~BE_FLAGS_NAPI_ENABLED;
 
 	be_async_mcc_disable(adapter);
 
