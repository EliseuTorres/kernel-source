From: Jens Axboe <axboe@kernel.dk>
Date: Thu, 4 Apr 2013 09:03:41 +0200
Subject: mtip32xx: fix two smatch warnings
References: bnc#818635
Patch-Mainline: v3.9-rc7
Git-commit: c66bb3f075cfe2d17b2427e96e043622db02759c

Dan reports:

New smatch warnings:
drivers/block/mtip32xx/mtip32xx.c:2728 show_device_status() warn: variable dereferenced before check 'dd' (see line 2727)
drivers/block/mtip32xx/mtip32xx.c:2758 show_device_status() warn: variable dereferenced before check 'dd' (see line 2757)

which are checking if dd == NULL, in a list_for_each_entry() type loop.
Get rid of the check, dd can never be NULL here.

Reported-by: Dan Carpenter <dan.carpenter@oracle.com>
Signed-off-by: Jens Axboe <axboe@kernel.dk>
Acked-by: Hannes Reinecke <hare@suse.de>
---
 drivers/block/mtip32xx/mtip32xx.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/block/mtip32xx/mtip32xx.c b/drivers/block/mtip32xx/mtip32xx.c
index 8d0dab5..23bef74 100644
--- a/drivers/block/mtip32xx/mtip32xx.c
+++ b/drivers/block/mtip32xx/mtip32xx.c
@@ -2723,7 +2723,7 @@ static ssize_t show_device_status(struct device_driver *drv, char *buf)
 	spin_lock_irqsave(&dev_lock, flags);
 	size += sprintf(&buf[size], "Devices Present:\n");
 	list_for_each_entry_safe(dd, tmp, &online_list, online_list) {
-		if (dd && dd->pdev) {
+		if (dd->pdev) {
 			if (dd->port &&
 			    dd->port->identify &&
 			    dd->port->identify_valid) {
@@ -2753,7 +2753,7 @@ static ssize_t show_device_status(struct device_driver *drv, char *buf)
 
 	size += sprintf(&buf[size], "Devices Being Removed:\n");
 	list_for_each_entry_safe(dd, tmp, &removing_list, remove_list) {
-		if (dd && dd->pdev) {
+		if (dd->pdev) {
 			if (dd->port &&
 			    dd->port->identify &&
 			    dd->port->identify_valid) {
-- 
1.7.12.4

