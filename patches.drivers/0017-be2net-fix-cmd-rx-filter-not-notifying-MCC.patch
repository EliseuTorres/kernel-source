From: Sathya Perla <sathya.perla@emulex.com>
Date: Wed, 3 Aug 2011 05:19:27 -0700
Subject: [PATCH] be2net: fix cmd-rx-filter not notifying MCC
References: bnc#722092
Patch-mainline: v3.0
Git-commit: 0d1d5875ef6c7903ab86ae3ecdbc78a5ca2e44ee

Dave, I missed out on this line while composing the 4/6 patch from my
yesterday's patchset ("[PATCH net-next 4/6] be2net: use RX_FILTER cmd
to program multicast addresses"). As you've already queued up the
patchset for net-next, I'm sending the fix in a separate patch. Pls
apply.

Signed-off-by: Sathya Perla <sathya.perla@emulex.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
Acked-by: David Chang <dchang@suse.com>
---
 drivers/net/benet/be_cmds.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/drivers/net/benet/be_cmds.c b/drivers/net/benet/be_cmds.c
index 7292be6..4278595 100644
--- a/drivers/net/benet/be_cmds.c
+++ b/drivers/net/benet/be_cmds.c
@@ -1593,6 +1593,7 @@ int be_cmd_rx_filter(struct be_adapter *adapter, u32 flags, u32 value)
 			memcpy(req->mcast_mac[i++].byte, ha->addr, ETH_ALEN);
 	}
 
+	status = be_mcc_notify_wait(adapter);
 err:
 	spin_unlock_bh(&adapter->mcc_lock);
 	return status;
-- 
1.5.6.1

