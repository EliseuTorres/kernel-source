From: Bernhard Kohl <Riedel-und-Kohl@t-online.de>
Date: Sun, 13 May 2012 23:39:01 +0200
Subject: [PATCH] target: add support for the WRITE_VERIFY command
Git-commit: 66246617ab7f0587f42ca49825a16d7a391fe15b
References: FATE#313550
Patch-Mainline: v3.5

Some legacy OS use WRITE_VERIFY on hard disks.

Signed-off-by: Bernhard Kohl <bernhard.kohl@gmx.net>
Signed-off-by: Nicholas Bellinger <nab@linux-iscsi.org>
Acked-by: Hannes Reinecke <hare@suse.de>
---
 drivers/target/target_core_transport.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/drivers/target/target_core_transport.c b/drivers/target/target_core_transport.c
index 3545662..db29f1f 100644
--- a/drivers/target/target_core_transport.c
+++ b/drivers/target/target_core_transport.c
@@ -2481,6 +2481,7 @@ static int transport_generic_cmd_sequencer(
 		cmd->se_cmd_flags |= SCF_SCSI_DATA_SG_IO_CDB;
 		break;
 	case WRITE_10:
+	case WRITE_VERIFY:
 		sectors = transport_get_sectors_10(cdb, cmd, &sector_ret);
 		if (sector_ret)
 			goto out_unsupported_cdb;
-- 
1.7.4.2

