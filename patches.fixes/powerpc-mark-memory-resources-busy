From: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Subject: powerpc/mm: Mark Memory Resources as busy
Git-commit: f748edafac858404be6c8dd67160c2032d97ddf5
Patch-mainline: v3.12-rc1
References: bnc#827527 
    
    Memory I/O resources need to be marked as busy or else we cannot remove
    them when doing memory hot remove.
    
Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Acked-by: Torsten Duwe <duwe@suse.de>

 arch/powerpc/mm/mem.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)
Index: linux-3.0-SLE11-SP3/arch/powerpc/mm/mem.c
===================================================================
--- linux-3.0-SLE11-SP3.orig/arch/powerpc/mm/mem.c
+++ linux-3.0-SLE11-SP3/arch/powerpc/mm/mem.c
@@ -543,7 +543,7 @@ static int add_system_ram_resources(void
 			res->name = "System RAM";
 			res->start = base;
 			res->end = base + size - 1;
-			res->flags = IORESOURCE_MEM;
+			res->flags = IORESOURCE_MEM | IORESOURCE_BUSY;
 			WARN_ON(request_resource(&iomem_resource, res) < 0);
 		}
 	}
