From: Goldwyn Rodrigues <rgoldwyn@gmail.com>
Git-commit: e099127169429c19544a8f55dd26937fddd5b1f4
Date:   Wed Jun 12 14:04:51 2013 -0700
Patch-mainline: Yes, v3.10-rc6
References: bnc#819363
Subject: fs/ocfs2/namei.c: remove unecessary ERROR when removing non-empty directory
    
    While removing a non-empty directory, the kernel dumps a message:
    
      (rmdir,21743,1):ocfs2_unlink:953 ERROR: status = -39
    
    Suppress the error message from being printed in the dmesg so users
    don't panic.
    
Signed-off-by: Goldwyn Rodrigues <rgoldwyn@suse.com>
Cc: Mark Fasheh <mfasheh@suse.com>
Cc: Joel Becker <jlbec@evilplan.org>
Acked-by: Sunil Mushran <sunil.mushran@gmail.com>
Reviewed-by: Jie Liu <jeff.liu@oracle.com>
Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

Index: linux-3.0-SLE11-SP2/fs/ocfs2/namei.c
===================================================================
--- linux-3.0-SLE11-SP2.orig/fs/ocfs2/namei.c	2013-05-11 10:52:01.375531641 -0500
+++ linux-3.0-SLE11-SP2/fs/ocfs2/namei.c	2013-07-01 09:15:44.894845095 -0500
@@ -949,7 +949,7 @@ leave:
 	ocfs2_free_dir_lookup_result(&orphan_insert);
 	ocfs2_free_dir_lookup_result(&lookup);
 
-	if (status)
+	if (status && (status != -ENOTEMPTY))
 		mlog_errno(status);
 
 	return status;
@@ -1472,7 +1472,7 @@ bail:
 	brelse(old_dir_bh);
 	brelse(new_dir_bh);
 
-	if (status)
+	if (status && (status != -ENOTEMPTY))
 		mlog_errno(status);
 
 	return status;
