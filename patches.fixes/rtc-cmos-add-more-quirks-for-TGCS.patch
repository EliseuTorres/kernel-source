From: Takashi Iwai <tiwai@suse.de>
Subject: [PATCH] rtc: Add more TGCS models for alarm disable quirk
Patch-mainline: To be upstreamed
References: bnc#927262

The recent TGCS POS machines with Baytrail need the same workaround
like Truman model for avoiding spurious reboot at shtudown.
The model numbers are:
  With vendor ID 'TOSHIBA':
  6140      # for Darth, Ichigan
  4900      # for Jade, Pearl
  4810      # for Jaspar, Opal
  4852E7
  485257
  With vendor ID 'IBM CORPORATION':
  4900

Signed-off-by: Takashi Iwai <tiwai@suse.de>
Signed-off-by: Egbert Eich <eich@suse.de>

---
 drivers/rtc/rtc-cmos.c |   54 +++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 54 insertions(+)

--- a/drivers/rtc/rtc-cmos.c
+++ b/drivers/rtc/rtc-cmos.c
@@ -402,6 +402,60 @@ static const struct dmi_system_id rtc_qu
 			DMI_MATCH(DMI_PRODUCT_NAME, "4852570"),
 		},
 	},
+	/* https://bugzilla.novell.com/show_bug.cgi?id=927262 */
+	{
+		.callback = set_alarm_disable_quirk,
+		.ident    = "TGCS POS",
+		.matches  = {
+			DMI_MATCH(DMI_SYS_VENDOR, "TOSHIBA"),
+			DMI_MATCH(DMI_PRODUCT_NAME, "6140"),
+		},
+	},
+	/* https://bugzilla.novell.com/show_bug.cgi?id=927262 */
+	{
+		.callback = set_alarm_disable_quirk,
+		.ident    = "TGCS POS",
+		.matches  = {
+			DMI_MATCH(DMI_SYS_VENDOR, "TOSHIBA"),
+			DMI_MATCH(DMI_PRODUCT_NAME, "4900"),
+		},
+	},
+	/* https://bugzilla.novell.com/show_bug.cgi?id=927262 */
+	{
+		.callback = set_alarm_disable_quirk,
+		.ident    = "TGCS POS",
+		.matches  = {
+			DMI_MATCH(DMI_SYS_VENDOR, "IBM CORPORATION"),
+			DMI_MATCH(DMI_PRODUCT_NAME, "4900"),
+		},
+	},
+	/* https://bugzilla.novell.com/show_bug.cgi?id=927262 */
+	{
+		.callback = set_alarm_disable_quirk,
+		.ident    = "TGCS POS",
+		.matches  = {
+			DMI_MATCH(DMI_SYS_VENDOR, "TOSHIBA"),
+			DMI_MATCH(DMI_PRODUCT_NAME, "4810"),
+		},
+	},
+	/* https://bugzilla.novell.com/show_bug.cgi?id=927262 */
+	{
+		.callback = set_alarm_disable_quirk,
+		.ident    = "TGCS POS",
+		.matches  = {
+			DMI_MATCH(DMI_SYS_VENDOR, "TOSHIBA"),
+			DMI_MATCH(DMI_PRODUCT_NAME, "485257"),
+		},
+	},
+	/* https://bugzilla.novell.com/show_bug.cgi?id=927262 */
+	{
+		.callback = set_alarm_disable_quirk,
+		.ident    = "TGCS POS",
+		.matches  = {
+			DMI_MATCH(DMI_SYS_VENDOR, "TOSHIBA"),
+			DMI_MATCH(DMI_PRODUCT_NAME, "4852E7"),
+		},
+	},
 	/* https://bugzilla.novell.com/show_bug.cgi?id=812592 */
 	{
 		.callback = set_alarm_disable_quirk,
