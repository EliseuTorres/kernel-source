From: Bjorn Helgaas <bhelgaas@google.com>
Date: Sat, 14 Dec 2013 13:06:47 -0700
Subject: PCI: pciehp: Use symbolic constants, not hard-coded bitmask
Git-commit: df72648c4d61d6d0ce033c0467a9fabec670fe46
Patch-mainline: v3.14-rc1
References: bnc#898295

Use the PCI_EXP_SLTSTA definitions, not 0x1f, when clearing Slot Status
bits.

No functional change.

Signed-off-by: Bjorn Helgaas <bhelgaas@google.com>
Acked-by: Borislav Petkov <bp@suse.de>
---
 drivers/pci/hotplug/pciehp_hpc.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

Index: kernel/drivers/pci/hotplug/pciehp_hpc.c
===================================================================
--- kernel.orig/drivers/pci/hotplug/pciehp_hpc.c	2014-10-28 17:56:07.272596499 +0100
+++ kernel/drivers/pci/hotplug/pciehp_hpc.c	2014-10-28 17:56:43.252596999 +0100
@@ -1020,7 +1020,10 @@ struct controller *pcie_init(struct pcie
         }
 
 	/* Clear all remaining event bits in Slot Status register */
-	if (pciehp_writew(ctrl, PCI_EXP_SLTSTA, 0x1f))
+	if (pciehp_writew(ctrl, PCI_EXP_SLTSTA,
+		PCI_EXP_SLTSTA_ABP | PCI_EXP_SLTSTA_PFD |
+		PCI_EXP_SLTSTA_MRLSC | PCI_EXP_SLTSTA_PDC |
+		PCI_EXP_SLTSTA_CC))
 		goto abort_ctrl;
 
 	/* Disable sotfware notification */
