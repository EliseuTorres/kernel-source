From: Michael Neuling <mikey@neuling.org>
Subject: powerpc: Add second POWER8 PVR entry
Git-commit: 33959f88fce9b8d3346d8000b3425814cbc6d6c0
Patch-mainline: v3.11-rc4
References: bnc#874440 

[Backport Power8E cputable entry to SLES11 SP3.]

POWER8 comes with two different PVRs.  This patch enables the additional
PVR in the cputable.

The existing entry (PVR=0x4b) is renamed to POWER8E and the new entry
(PVR=0x4d) is given POWER8.

Signed-off-by: Michael Neuling <mikey@neuling.org>
Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
[Backport to SLES11 SP3]
Signed-off-by: Kevin W. Monroe <kwmonroe@linux.vnet.ibm.com>
Acked-by: Torsten Duwe <duwe@suse.de>
---
diff a/arch/powerpc/kernel/cputable.c b/arch/powerpc/kernel/cputable.c
--- a/arch/powerpc/kernel/cputable.c
+++ b/arch/powerpc/kernel/cputable.c
@@ -472,9 +472,21 @@ static struct cpu_spec __initdata cpu_specs[] = {
 		.cpu_restore		= __restore_cpu_power7,
 		.platform		= "power7+",
 	},
-	{	/* Power8 */
+	{	/* Power8E */
 		.pvr_mask		= 0xffff0000,
 		.pvr_value		= 0x004b0000,
+		.cpu_name		= "POWER8E (raw)",
+		.icache_bsize		= 128,
+		.dcache_bsize		= 128,
+		.num_pmcs		= 6,
+		.pmc_type		= PPC_PMC_IBM,
+		.oprofile_cpu_type	= "ppc64/power8",
+		.oprofile_type		= PPC_OPROFILE_INVALID,
+		.platform		= "power8",
+	},
+	{	/* Power8 */
+		.pvr_mask		= 0xffff0000,
+		.pvr_value		= 0x004d0000,
 		.cpu_name		= "POWER8 (raw)",
 		.icache_bsize		= 128,
 		.dcache_bsize		= 128,
