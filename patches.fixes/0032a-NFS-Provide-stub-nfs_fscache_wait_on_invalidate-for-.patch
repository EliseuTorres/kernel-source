From: David Howells <dhowells@redhat.com>
Date: Fri, 21 Dec 2012 12:15:05 +0000
Subject: [PATCH] NFS: Provide stub nfs_fscache_wait_on_invalidate() for when
 CONFIG_NFS_FSCACHE=n
Git-commit: c129c29347b6cf0d64bfe53848f68320286612ab
Patch-mainline: v3.8

(Not needed for standard configs, but don't hurt and helps if
 I want to build without FSCACHE support - neilb)

Provide a stub nfs_fscache_wait_on_invalidate() function for when
CONFIG_NFS_FSCACHE=n lest the following error appear:

  fs/nfs/inode.c: In function 'nfs_invalidate_mapping':
  fs/nfs/inode.c:887:2: error: implicit declaration of function 'nfs_fscache_wait_on_invalidate' [-Werror=implicit-function-declaration]
  cc1: some warnings being treated as errors

Reported-by: kbuild test robot <fengguang.wu@intel.com>
Reported-by: Vineet Gupta <Vineet.Gupta1@synopsys.com>
Reported-by: Borislav Petkov <bp@alien8.de>
Signed-off-by: David Howells <dhowells@redhat.com>
Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
Acked-by: NeilBrown <neilb@suse.de>

---
 fs/nfs/fscache.h |    1 +
 1 file changed, 1 insertion(+)

--- linux-3.0-SLE11-SP3.orig/fs/nfs/fscache.h
+++ linux-3.0-SLE11-SP3/fs/nfs/fscache.h
@@ -230,6 +230,7 @@ static inline void nfs_readpage_to_fscac
 
 
 static inline void nfs_fscache_invalidate(struct inode *inode) {}
+static inline void nfs_fscache_wait_on_invalidate(struct inode *inode) {}
 
 static inline const char *nfs_server_fscache_state(struct nfs_server *server)
 {
