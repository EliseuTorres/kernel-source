Subject: sched: Fix buglet in return_cfs_rq_runtime()
From: Paul Turner <pjt@google.com>
Date: Mon, 7 Nov 2011 20:26:34 -0800
Patch-mainline: tip fccfdc6f0d8c83c854eeb6d93aa158f0e551bd49
References:

In return_cfs_rq_runtime() we want to return bandwidth when there are no
remaining tasks, not "return" when this is the case.

Signed-off-by: Paul Turner <pjt@google.com>
Signed-off-by: Peter Zijlstra <a.p.zijlstra@chello.nl>
Link: http://lkml.kernel.org/r/20111108042736.623812423@google.com
Signed-off-by: Ingo Molnar <mingo@elte.hu>
Acked-by: Mike Galbraith <mgalbraith@suse.de>

---
 kernel/sched_fair.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

Index: linux-3.0-SLE11-SP2/kernel/sched_fair.c
===================================================================
--- linux-3.0-SLE11-SP2.orig/kernel/sched_fair.c
+++ linux-3.0-SLE11-SP2/kernel/sched_fair.c
@@ -1751,7 +1751,7 @@ static void __return_cfs_rq_runtime(stru
 
 static __always_inline void return_cfs_rq_runtime(struct cfs_rq *cfs_rq)
 {
-	if (!cfs_rq->runtime_enabled || !cfs_rq->nr_running)
+	if (!cfs_rq->runtime_enabled || cfs_rq->nr_running)
 		return;
 
 	__return_cfs_rq_runtime(cfs_rq);
