From: Tristan Ye <tristan.ye@oracle.com>
Date: Thu, 17 Dec 2009 18:42:16 +0800
Subject: [PATCH 23/28] Ocfs2: Should ocfs2 support fiemap for S_IFDIR inode?
Patch-mainline: 2.6.33
Git-commit: 55f4946ed23cbf78efe9f818c4b55e890fe2beff

Let userspace have a chance to get the extent info of a
directory just like extN did.

Signed-off-by: Tristan Ye <tristan.ye@oracle.com>
Signed-off-by: Joel Becker <joel.becker@oracle.com>
Signed-off-by: Mark Fasheh <mfasheh@suse.com>
---
 fs/ocfs2/namei.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/fs/ocfs2/namei.c b/fs/ocfs2/namei.c
index f010b22..0b9f35e 100644
--- a/fs/ocfs2/namei.c
+++ b/fs/ocfs2/namei.c
@@ -2326,4 +2326,5 @@ const struct inode_operations ocfs2_dir_iops = {
 	.getxattr	= generic_getxattr,
 	.listxattr	= ocfs2_listxattr,
 	.removexattr	= generic_removexattr,
+	.fiemap         = ocfs2_fiemap,
 };
-- 
1.6.4.2

