From: Mike Wolf <mjw at us.ibm.com>
Subject: [PATCH] powerpc: fix cpu name in show-cpuinfo
References: bnc#565267
Patch-mainline: 2.6.33 (submitted 12 Dec 09)

When looking at /proc/cpuinfo the cpuname will be 'unknown"
if the pvr mask is 0.  This is the case for the kernel running
on new or unknown hardware.  However the cpuname is always specified
so use the name regardless of the pvr mask.

Signed-off-by: Mike Wolf <mjw at us.ibm.com>
Acked-by: Jeff Mahoney <jeffm@suse.com>
---

 arch/powerpc/kernel/setup-common.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/arch/powerpc/kernel/setup-common.c
+++ b/arch/powerpc/kernel/setup-common.c
@@ -195,7 +195,7 @@
 	seq_printf(m, "processor\t: %lu\n", cpu_id);
 	seq_printf(m, "cpu\t\t: ");
 
-	if (cur_cpu_spec->pvr_mask)
+	if (cur_cpu_spec->cpu_name)
 		seq_printf(m, "%s", cur_cpu_spec->cpu_name);
 	else
 		seq_printf(m, "unknown (%08x)", pvr);
