From tao.ma@oracle.com  Fri Sep 24 14:30:41 2010
From: Tao Ma <tao.ma@oracle.com>
Date: Mon, 19 Jul 2010 13:55:10 -0700
Subject: [PATCH 075/314] ocfs2: Add parenthesis to wrap the check for O_DIRECT.
Oracle-commit: 06e4e85919cef97554b7fd1ae7570461bb020b74
Git-commit: 60c486744c9a30ea60fa863e9587242dde2fe4bd
Patch-mainline: 2.6.33-rc8

Mainline commit 60c486744c9a30ea60fa863e9587242dde2fe4bd

Add parenthesis to wrap the check for O_DIRECT.

Signed-off-by: Tao Ma <tao.ma@oracle.com>
Signed-off-by: Joel Becker <joel.becker@oracle.com>
Acked-by: Jeff Mahoney <jeffm@suse.com>
Signed-off-by: Mark Fasheh <mfasheh@suse.com>
---
 fs/ocfs2/file.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/fs/ocfs2/file.c b/fs/ocfs2/file.c
index d8beee8..631b815 100644
--- a/fs/ocfs2/file.c
+++ b/fs/ocfs2/file.c
@@ -2016,8 +2016,8 @@ out_dio:
 	/* buffered aio wouldn't have proper lock coverage today */
 	BUG_ON(ret == -EIOCBQUEUED && !(file->f_flags & O_DIRECT));
 
-	if ((file->f_flags & O_SYNC && !direct_io) || IS_SYNC(inode) ||
-	    (file->f_flags & O_DIRECT && has_refcount)) {
+	if (((file->f_flags & O_SYNC) && !direct_io) || IS_SYNC(inode) ||
+	    ((file->f_flags & O_DIRECT) && has_refcount)) {
 		ret = filemap_fdatawrite_range(file->f_mapping, pos,
 					       pos + count - 1);
 		if (ret < 0)
-- 
1.7.1

