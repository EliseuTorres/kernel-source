From: Yang Hongyang <yanghy@cn.fujitsu.com>
Date: Tue, 26 Jan 2010 00:48:23 +0000
Subject: [PATCH] Btrfs: fix a memory leak in btrfs_init_acl
Git-commit: f858153c367a397235d3e81136741e40e44faf1d
Patch-mainline: v2.6.33-rc6

In btrfs_init_acl() cloned acl is not released

Signed-off-by: Yang Hongyang <yanghy@cn.fujitsu.com>
Signed-off-by: Chris Mason <chris.mason@oracle.com>
Acked-by: Jeff Mahoney <jeffm@suse.com>
---

 fs/btrfs/acl.c |    1 +
 1 file changed, 1 insertion(+)

diff --git a/fs/btrfs/acl.c b/fs/btrfs/acl.c
index fa44e92..da3133c 100644
--- a/fs/btrfs/acl.c
+++ b/fs/btrfs/acl.c
@@ -269,6 +269,7 @@ int btrfs_init_acl(struct btrfs_trans_handle *trans,
 						    ACL_TYPE_ACCESS);
 			}
 		}
+		posix_acl_release(clone);
 	}
 failed:
 	posix_acl_release(acl);
