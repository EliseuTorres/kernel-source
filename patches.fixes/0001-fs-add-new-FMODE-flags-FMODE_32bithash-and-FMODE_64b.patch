From: Bernd Schubert <bernd.schubert@itwm.fraunhofer.de>
Date: Tue, 13 Mar 2012 22:51:38 -0400
Subject: [PATCH] fs: add new FMODE flags: FMODE_32bithash and FMODE_64bithash
Git-commit: 6a8a13e03861c0ab83ab07d573ca793cff0e5d00
Patch-mainline: v3.4
References: bnc#898554

Those flags are supposed to be set by NFS readdir() to tell ext3/ext4
to 32bit (NFSv2) or 64bit hash values (offsets) in seekdir().

Signed-off-by: Bernd Schubert <bernd.schubert@itwm.fraunhofer.de>
Signed-off-by: "Theodore Ts'o" <tytso@mit.edu>
Acked-by: NeilBrown <neilb@suse.de>

---
 include/linux/fs.h |    4 ++++
 1 file changed, 4 insertions(+)

--- linux-3.0-SLE11-SP3.orig/include/linux/fs.h
+++ linux-3.0-SLE11-SP3/include/linux/fs.h
@@ -90,6 +90,10 @@ struct inodes_stat_t {
 /* File is opened using open(.., 3, ..) and is writeable only for ioctls
    (specialy hack for floppy.c) */
 #define FMODE_WRITE_IOCTL	((__force fmode_t)0x100)
+/* 32bit hashes as llseek() offset (for directories) */
+#define FMODE_32BITHASH         ((__force fmode_t)0x200)
+/* 64bit hashes as llseek() offset (for directories) */
+#define FMODE_64BITHASH         ((__force fmode_t)0x400)
 
 /*
  * Don't update ctime and mtime.
