From: Jiri Kosina <jkosina@suse.cz>
Subject: [PATCH] HID: fix unused rsize usage
References: bnc#783475
Patch-mainline: bc197eede in hid.git, scheduled for 3.12

27ce4050 ("HID: fix data access in implement()") by mistake removed
a setting of buffer size in hidp. Fix that by putting it back.

Reported-by: kbuild test robot <fengguang.wu@intel.com>
Signed-off-by: Jiri Kosina <jkosina@suse.cz>
---
 net/bluetooth/hidp/core.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

Index: linux-3.0-SLE11-SP2/net/bluetooth/hidp/core.c
===================================================================
--- linux-3.0-SLE11-SP2.orig/net/bluetooth/hidp/core.c
+++ linux-3.0-SLE11-SP2/net/bluetooth/hidp/core.c
@@ -317,6 +317,7 @@ static int hidp_send_report(struct hidp_
 
 	hid_output_report(report, buf);
 
+	rsize = ((report->size - 1) >> 3) + 1 + (report->id > 0);
 	ret = hidp_queue_report(session, buf, rsize);
 	
 	kfree(buf);
