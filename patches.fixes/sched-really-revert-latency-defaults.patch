From: Mike Galbraith <mgalbraith@suse.de>
Subject: sched: really revert latency defaults to SP1 values
Date: Tue Jun 12 07:00:24 CEST 2012
Patch-mainline: never
References: Scheduler enhancements for I7 (bnc#754690)

Something happened during SP2 generation, normalized_foo was not adjusted, so
SP2 defaults are set to stock 3.0 values.  The 3.0 values produce much lower
latencies than SP1 without injuring conpute throughput except at the very heavy
end of the spectrum.  This patch is only for history, values will next be
tweaked to preserve low latencies, while improving high load throughput.

Signed-off-by: Mike Galbraith <mgalbraith@suse.de>

---
 kernel/sched_fair.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

--- a/kernel/sched_fair.c
+++ b/kernel/sched_fair.c
@@ -37,7 +37,7 @@
  *  run vmstat and monitor the context-switches (cs) field)
  */
 unsigned int sysctl_sched_latency = 20000000ULL;
-unsigned int normalized_sysctl_sched_latency = 6000000ULL;
+unsigned int normalized_sysctl_sched_latency = 20000000ULL;
 
 /*
  * The initial- and re-scaling of tunables is configurable
@@ -56,12 +56,12 @@ enum sched_tunable_scaling sysctl_sched_
  * (default: 4 msec * (1 + ilog(ncpus)), units: nanoseconds)
  */
 unsigned int sysctl_sched_min_granularity = 4000000ULL;
-unsigned int normalized_sysctl_sched_min_granularity = 750000ULL;
+unsigned int normalized_sysctl_sched_min_granularity = 4000000ULL;
 
 /*
  * is kept at sysctl_sched_latency / sysctl_sched_min_granularity
  */
-static unsigned int sched_nr_latency = 8;
+static unsigned int sched_nr_latency = 5;
 
 /*
  * After fork, child runs first. If set to 0 (default) then
@@ -86,7 +86,7 @@ unsigned int sysctl_sched_compat_yield _
  * have immediate wakeup/sleep latencies.
  */
 unsigned int sysctl_sched_wakeup_granularity = 5000000UL;
-unsigned int normalized_sysctl_sched_wakeup_granularity = 1000000UL;
+unsigned int normalized_sysctl_sched_wakeup_granularity = 5000000UL;
 
 const_debug unsigned int sysctl_sched_migration_cost = 500000UL;
 
