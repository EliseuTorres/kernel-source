From: Miklos Szeredi <mszeredi@suse.cz>
Subject: xfs: prevent leaking uninitialized stack memory in FSGEOMETRY_V1
Patch-mainline: 2.6.38?
References: CVE-2011-0711 bnc#672524

Acked-by: Miklos Szeredi <mszeredi@suse.cz>
Signed-off-by: Miklos Szeredi <mszeredi@suse.cz>

---
 fs/xfs/xfs_fsops.c |    1 +
 1 file changed, 1 insertion(+)

Index: linux-2.6.32-SLE11-SP1/fs/xfs/xfs_fsops.c
===================================================================
--- linux-2.6.32-SLE11-SP1.orig/fs/xfs/xfs_fsops.c	2011-02-22 11:19:18.000000000 +0100
+++ linux-2.6.32-SLE11-SP1/fs/xfs/xfs_fsops.c	2011-02-22 12:21:50.000000000 +0100
@@ -56,6 +56,7 @@ xfs_fs_geometry(
 	xfs_fsop_geom_t		*geo,
 	int			new_version)
 {
+	memset(geo, 0, sizeof(xfs_fsop_geom_t));
 	geo->blocksize = mp->m_sb.sb_blocksize;
 	geo->rtextsize = mp->m_sb.sb_rextsize;
 	geo->agblocks = mp->m_sb.sb_agblocks;
