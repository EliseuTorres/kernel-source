From sunil.mushran@oracle.com  Fri Sep 24 14:30:43 2010
From: Sunil Mushran <sunil.mushran@oracle.com>
Date: Mon, 19 Jul 2010 13:55:11 -0700
Subject: [PATCH 157/314] ocfs2: Make nointr a default mount option
Oracle-commit: e79e0dd2e502ec0b8fce0e40c3546c61e9ce2106
Git-commit: 4b37fcb7d41ce3b9264b9562d6ffd62db9294bd1
Patch-mainline: 2.6.35-rc1

Mainline commit 4b37fcb7d41ce3b9264b9562d6ffd62db9294bd1

OCFS2 has never really supported intr. This patch acknowledges this reality
and makes nointr the default mount option. In a later patch, we intend to
support intr.

Signed-off-by: Sunil Mushran <sunil.mushran@oracle.com>
Signed-off-by: Joel Becker <joel.becker@oracle.com>
Acked-by: Jeff Mahoney <jeffm@suse.com>
Signed-off-by: Mark Fasheh <mfasheh@suse.com>
---
 fs/ocfs2/super.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/fs/ocfs2/super.c b/fs/ocfs2/super.c
index 79d7d4c..12c2203 100644
--- a/fs/ocfs2/super.c
+++ b/fs/ocfs2/super.c
@@ -1297,7 +1297,7 @@ static int ocfs2_parse_options(struct super_block *sb,
 		   options ? options : "(none)");
 
 	mopt->commit_interval = 0;
-	mopt->mount_opt = 0;
+	mopt->mount_opt = OCFS2_MOUNT_NOINTR;
 	mopt->atime_quantum = OCFS2_DEFAULT_ATIME_QUANTUM;
 	mopt->slot = OCFS2_INVALID_SLOT;
 	mopt->localalloc_opt = -1;
-- 
1.7.1

