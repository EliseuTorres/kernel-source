From: Ian Campbell <ian.campbell@citrix.com>
Date: Thu, 20 Oct 2011 04:58:32 -0400
Subject: [PATCH 04/28] mm: add a "struct page_frag" type containing a page,
 offset and length
Git-commit: 30d3c128eafd2277ca2bb4b62845f25ad9295c12
Patch-mainline: v3.2-rc1
References: bnc#784800 FATE#314296

A few network drivers currently use skb_frag_struct for this purpose but I have
patches which add additional fields and semantics there which these other uses
do not want.

A structure for reference sub-page regions seems like a generally useful thing
so do so instead of adding a network subsystem specific structure.

Signed-off-by: Ian Campbell <ian.campbell@citrix.com>
Acked-by: Jens Axboe <jaxboe@fusionio.com>
Acked-by: David Rientjes <rientjes@google.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
Acked-by: Benjamin Poirier <bpoirier@suse.de>
---
 include/linux/mm_types.h |   11 +++++++++++
 1 file changed, 11 insertions(+)

--- a/include/linux/mm_types.h
+++ b/include/linux/mm_types.h
@@ -125,6 +125,17 @@ struct page {
 #endif
 };
 
+struct page_frag {
+	struct page *page;
+#if (BITS_PER_LONG > 32) || (PAGE_SIZE >= 65536)
+	__u32 offset;
+	__u32 size;
+#else
+	__u16 offset;
+	__u16 size;
+#endif
+};
+
 typedef unsigned long __nocast vm_flags_t;
 
 /*
