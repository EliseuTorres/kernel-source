From: Sankar P <psankar@novell.com>
Subject: [PATCH] novfs: Fix error codes for getxattr for novfs
Patch-mainline: No
References: bnc#529535

getxattr function should not use harsh error codes like ENOENT
if the named attribute cannot be obtained. This fixes makes
novfs return ENOATTR as suggested by the man page.

Signed-off-by: Sankar P <psankar@novell.com>
Acked-by: Jan Kara <jack@suse.cz>
---
 tmp/linux-2.6.32-sle11sp1/fs/novfs/file.c |    8 +-------
 1 files changed, 1 insertions(+), 7 deletions(-)

diff --git a/fs/novfs/file.c b/fs/novfs/file.c
index 6335069..675f26c 100644
--- a/fs/novfs/file.c
+++ b/fs/novfs/file.c
@@ -320,13 +320,7 @@ int novfs_getx_file_info(char *Path, const char *Name, char *buffer,
 					 reply->Reply.ErrorCode);
 				DbgPrint("xattr: replylen=%d", replylen);
 
-				//0xC9 = EA not found (C9), 0xD1 = EA access denied
-				if ((reply->Reply.ErrorCode == 0xC9)
-				    || (reply->Reply.ErrorCode == 0xD1)) {
-					retCode = -ENOATTR;
-				} else {
-					retCode = -ENOENT;
-				}
+				retCode = -ENOATTR;
 			} else {
 
 				*dataLen =
-- 
1.7.1

